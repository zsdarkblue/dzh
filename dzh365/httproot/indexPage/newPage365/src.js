/*
	Copyright (c) 2012-2013,   To get sources and documentation, please visit:

		http://dms.gw.com.cn
*/

//>>built
require({cache:{"indexPage/newPage365/view/util/help":function(){define([],function(){function v(h,f,b){return(h=(h.get("oldVRangeValues")||{})[b[h.store.idProperty||"obj"]])?h[f.field]:void 0}function u(h,f,b,d){return['<div class="',0==h["new"]?"":+h["new"]>+h[d]?"font-red":+h["new"]<+h[d]?"font-green":"",'">',b,f>b?"\u2193":f<b?"\u2191":"&nbsp;&nbsp;","</div>"].join("")}return{isLogin:function(){return!0},yiUnitFmt:function(h,f,b){return b&&0<b?(b/1E8).toFixed(2)+"\u4ebf":""},formatter:function(h){h=
h[0];h["new"]?(h["new"]=(new Number(h["new"])).toFixed(2),h.amount=(new Number(h.amount)).toFixed(2)):(h["new"]="",h.amount="",h.updnratio="");return h},arrowQuoteFormatter:function(h,f,b,d,g,a){return b?(h=v(a,d,g),u(g,h,b,"lastclose")):b},arrowPercentFormatter:function(h,f,b,d,g,a){return b?(h=v(a,d,g),u(g,+h,(new Number(100*b)).toFixed(2),"lastclose")):b}}})},"dojox/slickgrid/quoteblock":function(){require({cache:{"url:dojox/slickgrid/templates/quoteblock.html":'<div style="overflow:hidden;outline:0px;position:relative;border: #484848 1px solid;" \r\n\tclass="slickgrid quoteblock spacer1" tabindex="0">\r\n\t<div tabIndex="0" class="vbox" style="outline:0px;position:absolute;height:100%;width:100%;">\r\n\t\t<div tabIndex="0" style="outline:0px;position:relative;">\r\n\t\t\t<header data-dojo-attach-point="headerNode"></header>\r\n\t\t</div>\r\n\t\t<div class="viewport spacer1" tabIndex="0" data-dojo-attach-point="viewportNode">\r\n\t\t\t<dl data-dojo-attach-point="canvasNode"></dl>\r\n\t\t</div>\r\n\t</div>\r\n</div>'}});
define("dojox/slickgrid/quoteblock","dojo/string,dojo/_base/declare,dijit/_WidgetBase,dijit/_TemplatedMixin,dojo/text!./templates/quoteblock.html,dojox/store/GridWSStore,dojo/dom-geometry,dojo/on,dojo/mouse,dojo/query,dojo/dom-construct,dojo/dom,dojo/_base/array,dojo/_base/lang,dojo/aspect,dojo/dom-attr,dojo/dom-class,dojo/dom-style,dojo/NodeList-traverse,dojo/NodeList-manipulate".split(","),function(v,u,h,f,b,d,g,a,e,m,c,l,n,i,o){return u("dojox.grid.quoteblock",[h,f],{templateString:b,_columnDefaults:{name:"",
resizable:!0,sortable:!1,minWidth:30,width:80,headerCssClass:"",cssClass:"",formatter:function(a,c,e){return null==e?"":e}},_options:{cellFlashingCssClass:"flashing",selectedCellCssClass:"selected",showHeader:!0,rowHeight:25,reverseShow:!1},pushOptions:{whereField:"obj"},constructor:function(){},postMixInProperties:function(){this.inherited(arguments);this.uid="ms_"+Math.round(1E6*Math.random());this.data=this.data||[];this.options=this.options||{};this.columnDefaults=this.columnDefaults||{};this.queryLimit=
this.queryLimit||{};this.queryOptions=this.queryOptions||{}},defaultFormatter:function(a,c,e){return null==e?"":e},buildRendering:function(){this.inherited(arguments);for(var a=this.columns,c=[],e=0,m=0,b=a.length;m<b;m++)a[m]=i.mixin({},this._columnDefaults,this.columnDefaults,a[m]),e+=a[m].width;this.allColumnsWidth=e;m=0;for(b=a.length;m<b;m++)c.push('<div style="width:'+100*a[m].width/e+'%;" class="header '+a[m].headerCssClass+'">'+a[m].name+"</div>");this.headerNode.innerHTML=c.join("");if(this.options&&
!1===this.options.showHeader)this.headerNode.style.display="none"},postCreate:function(){this.inherited(arguments);this.options=i.mixin({},this._options,this.options);for(var a=this.columns,c=0,e=a.length;c<e;c++)a[c]=i.mixin({},this._columnDefaults,this.columnDefaults,a[c]);this.pushStore=this.pushStore||new d({store:this.store});if(this.whereField)this.pushOptions={whereField:this.whereField};o.after(this.store,"setData",i.hitch(this,function(){this.data=this.store.data}));this.oldVRangeValues=
{};o.after(this.store,"put",i.hitch(this,function(a,c){this.updateRow(this.store.index[a]);this.pushQueryLimit&&(this.oldVRangeValues[a]=i.clone(c[0]))}));this.renderQuery();this.$viewport=m(this.viewportNode);this.$canvas=m(this.canvasNode);this.$header=m(this.headerNode);this.$viewport.on("scroll",i.hitch(this,this.handleScroll));this.$canvas.on("click",i.hitch(this,this.handleClick));this.$canvas.on("dblclick",i.hitch(this,this.handleDblClick));this.$canvas.on(".row:mouseover",i.hitch(this,this.handleMouseOver));
this.$canvas.on(".row:mouseout",i.hitch(this,this.handleMouseOut));this.on("viewportchanged",i.hitch(this,function(){this._subscribe()}))},startup:function(){this.inherited(arguments)},resize:function(a){if(!a||this._currentH!=a.h)this.viewportH=this.viewportNode.clientHeight,this.pushQueryLimit&&this._subscribe(),a&&(this._currentH=a.h)},destroy:function(){this.inherited(arguments)},refresh:function(){for(var a=[],c=0,e=this.getDataLength();c<e;c++)a.push('<dd row="'+c+'" id="'+this.uid+c+'" class="slick-row row">'+
this.appendRowHtml(c)+"</dd>");this.canvasNode.innerHTML=a.join("");this.pushQueryLimit&&this._subscribe()},updateRow:function(a){l.byId(this.uid+a).innerHTML=this.appendRowHtml(a)},appendRowHtml:function(a){for(var c=this.columns,e=this.getDataItem(a),m=[],b=0,d=c.length;b<d;b++){var i=c[b];m.push('<div cell="'+b+'" style="width:'+100*i.width/this.allColumnsWidth+'%;" class="slick-cell cell cell'+b+" "+i.cssClass+'">'+i.formatter(a,b,e[i.field],i,e,this)+"</div>")}return m.join("")},getDataLength:function(){return this.data.length},
getDataItem:function(a){return this.data[a]},renderQuery:function(a,c){var a=a||this.queryLimit,c=c||this.queryOptions,e=this.store.query(a,c);e.then?e.then(i.hitch(this,function(a){a instanceof Array?(this.data=a,this.refresh()):0>a.res_type&&this.emit("dataerror",a)})):(this.data=e,this.refresh());return e},getVisibleRange:function(){this.viewportH=this.viewportH||this.viewportNode.clientHeight;this.viewportTop=this.viewportTop||this.viewportNode.scrollTop;return{top:Math.floor(this.viewportTop/
this.options.rowHeight),bottom:Math.ceil((this.viewportTop+this.viewportH)/this.options.rowHeight)}},_subscribe:function(){for(var a=this.getVisibleRange(),c=this.data.slice(a.top,a.bottom),e=this.pushOptions.whereField,m=[],b=0,d=c.length;b<d;b++)m.push(c[b][e]);if(0<m.length)this.pushQueryLimit.where="obj="+m.join(","),this.pushStore.query(this.pushQueryLimit),this._oldVRange=a,this.oldVRangeValues={}},handleScroll:function(a){this.viewportTop=this.viewportNode.scrollTop;this.emit("viewportchanged",
a);this.emit("scroll",a)},handleClick:function(a){var c=m(a.target).closest(".row"),e=m(a.target).closest(".cell");this.emit("click",a,{row:c,cell:e})},handleDblClick:function(a){var c=m(a.target).closest(".row"),e=m(a.target).closest(".cell");this.emit("dbclick",a,{row:c,cell:e})},handleMouseOver:function(a){m(a.target).closest(".row").addClass("row-hover");this.emit("mouseover",a,{})},handleMouseOut:function(a){m(a.target).closest(".row").removeClass("row-hover");this.emit("mouseover",a,{})},isEmptyObject:function(a){for(var c in a)return!1;
return!0}})})},"url:dojox/slickgrid/templates/quoteblock.html":'<div style="overflow:hidden;outline:0px;position:relative;border: #484848 1px solid;" \r\n\tclass="slickgrid quoteblock spacer1" tabindex="0">\r\n\t<div tabIndex="0" class="vbox" style="outline:0px;position:absolute;height:100%;width:100%;">\r\n\t\t<div tabIndex="0" style="outline:0px;position:relative;">\r\n\t\t\t<header data-dojo-attach-point="headerNode"></header>\r\n\t\t</div>\r\n\t\t<div class="viewport spacer1" tabIndex="0" data-dojo-attach-point="viewportNode">\r\n\t\t\t<dl data-dojo-attach-point="canvasNode"></dl>\r\n\t\t</div>\r\n\t</div>\r\n</div>',
"dojox/customfig/widget/MinSharingPlans":function(){define("dojox/customfig/widget/MinSharingPlans","dojo/_base/declare,dojo/_base/lang,dojo/_base/array,dojo/dom-geometry,dojo/dom-style,dijit/_WidgetBase,dijit/_TemplatedMixin,dojox/customfig/Plot,dojox/customfig/mains/SharingPlans,dojox/store/SharingPlansWSStore,dojox/customfig/datas/SharingPlansData,../utils,dojox/customfig/indicators/Indicators".split(","),function(v,u,h,f,b,d,g,a,e,m,c,l){var n=u.getObject("dojox.customfig.indicators");return v("dojox.customfig.widget.MinSharingPlans",
[d,g],{templateString:'<div><div data-dojo-attach-point="containerNode" style="width:100%; height:100%;position:relative"></div></div>',codes:[],did:null,plot:null,storeName:null,storeTradeTime:null,storeDatas:[],dataHandleName:null,dataHandleTradeTime:null,dataHandleDatas:[],queryObj:{time:"time",price:"price",volume:"volume",amount:"amount",tickcount:"tickcount",buyprice:"buyprice",buyvolume:"buyvolume",sellprice:"sellprice",sellvolume:"sellvolume"},indicator2Field:{ma:"price",vol:"volume",macd:"price"},
constructor:function(a){this.kwArgs=a||{}},startup:function(){this.inherited(arguments);if(0==parseFloat(b.get(this.domNode,"height"))&&this.domNode.parentNode){var c=f.getMarginBox(this.domNode.parentNode);delete c.t;delete c.l;f.setMarginBox(this.domNode,c)}var c=this.kwArgs,d=c.indicators||[],l=c.mainIndicators||[],g=this.plot=new a(c.plot,this.containerNode),p=new e(this.plot,c.sharingPlans||{});g.addMain(p);h.forEach(d,function(a){g.addIndicator(new n[a.type](g,a.params))});h.forEach(l,function(a){g.addMainIndicator(new n[a.type](g,
a.params))});this.codes=c.codes;this.storeName=new m;this.storeTradeTime=new m;this.render()},getData:function(){this.unReg();this.reg()},reg:function(){var a=this.storeName,e=this.storeTradeTime,b=this.storeDatas,d=this.dataHandleName,g=this.dataHandleTradeTime,f=this.dataHandleDatas,q=this.plot,s=q.main,n=q.indicators,x=this;mainIndicators=q.mainIndicators;queryObj=this.queryObj;indicator2Field=this.indicator2Field;codes=h.map(this.codes,function(a){return a.name});codeTypes=h.map(this.codes,function(a){return a.type});
s.setMainCode(codes);var z={service:"objinfo",type:"getinfo",where:"obj="+codes.join(","),field:"name,lastclose,lastexecprice",response_times:"1",response_mode:0};d&&d.destroy();d=this.dataHandleName=new c(a,{query:z},{name:"name",lastclose:"lastclose",lastexecprice:"lastexecprice"});d.setCallback(function(a){var c=[],e=[];a.name&&h.forEach(a.name,function(a){c.push(a)});s.setMainLabels(c);h.forEach(codes,function(c,m){var b=a[codeTypes[m]];"undefined"!=typeof b&&"undefined"!=typeof b[m]?e.push(+b[m]):
e.push(0)});s.setBaseValue(e);q.setData(a)});a={service:"objinfo",type:"base",where:"obj="+codes.join(","),field:"open_close_num,open_close_time",response_times:"1",response_mode:0};g&&g.destroy();var g=this.dataHandleTradeTime=new c(e,{query:a},{open_close_num:"open_close_num",open_close_time:"open_close_time"}),y=[];g.setCallback(function(a){if(a.open_close_num)for(var c=0,e=a.open_close_num.length;c<e;c++)if(y.push(l.organizeXLabels(a.open_close_num[c],a.open_close_time[c])),c)s.setTimeKey(l.checkSameValueInMainarr(y[0],
y[c]),c-1);else{s.setXLabels(y[0]);for(var m in n)n[m].setXLabels(y[0]);for(m in mainIndicators)mainIndicators[m].setXLabels(y[0])}q.setData(a)});e=0;for(g=codes.length;e<g;e++){a={service:"quote",type:"min",where:"obj="+codes[e],count:0,response_times:"-1",response_mode:0};b[e]?d=b[e]:(d=new m,b.push(d));a=new c(d,{query:a},queryObj);f.push(a);var A=setTimeout(function(){q.render()},30);a.setCallback(function(a,c){return function(e){e[a]&&(A&&clearTimeout(A),s.setData(e[a].price,c),0===c&&(x.setData2indicator(n,
indicator2Field,e[a],c),x.setData2indicator(mainIndicators,indicator2Field,e[a],c)),q.setData(e[a]),q.render())}}(codes[e],e))}},unReg:function(){var a=this.dataHandleDatas||[];h.forEach(this.storeDatas,function(a){a.cancel(a.req_seq)});h.forEach(a,function(a){a.destroy()});a=this.dataHandleDatas=[];this.plot.clear()},render:function(){var a=this.plot;this.getData();a.render()},resize:function(a){a&&(f.setMarginBox(this.domNode,{w:a.w,h:a.h}),f.setMarginBox(this.containerNode,{w:a.w,h:a.h}),a=f.getMarginBox(this.containerNode),
delete a.l,delete a.t,this.plot.resize(a))},changeDid:function(a){this.did=a},changeCodes:function(a){if("[object Array]"===Object.prototype.toString.call(a))this.codes=a},addCode:function(a){var c=this.getCodes();-1==c.join(",").indexOf(a.name)&&1<=c.length&&c.push(a)},delCode:function(){var a=this.getCodes();if(2<=a.length)this.codes=a.slice(0,a.length-1)},delAllCode:function(){var a=this.getCodes();if(1<=a.length)this.codes=a.slice(0,1)},addIndicator:function(a){var c=a.type,e=this.plot;!e.indicators[c.toLowerCase()]&&
n[c]&&e.addIndicator(new n[c](e,a.params))},delIndicator:function(a){var c=this.plot,e=c.indicators,a=a.toLowerCase();e[a]&&c.delIndicator(a)},addMainIndicator:function(a){var c=a.type,e=this.plot;!e.mainIndicators[c.toLowerCase()]&&n[c]&&e.addMainIndicator(new n[c](e,a.params))},delMainIndicator:function(a){var c=this.plot,e=c.mainIndicators,a=a.toLowerCase();e[a]&&c.delMainIndicator(a)},setTheme:function(a){this.plot.setTheme(a)},getCodes:function(){return this.codes},setData2indicator:function(a,
c,e,m){var b,d,l,s;for(s in a)if(l=a[s],b=c[l.type])"[object String]"===Object.prototype.toString.call(b)&&e[b]?l.setData(e[b],m):"object Array"===Object.prototype.toString.call(b)&&(d=[],h.forEach(b,function(a){e[a]&&d.push(e[a])}),l.setData(d,m))}})})},"dojox/customfig/Plot":function(){define("dojox/customfig/Plot","../main,dojo/_base/declare,dijit/_WidgetBase,dojo/_base/lang,dojo/dom,dojo/dom-geometry,./utils,dojo/cssScale,dojox/customfig/themes/Theme".split(","),function(v,u,h,f,b,d,g,a,e){f.getObject("customfig",
!0,v);return u("dojox.customfig.Plot",[h],{kwArgs:{margins:{l:2,t:2,r:2,b:2},offsets:{l:70,t:10,r:70,b:10},noscale:!0},constructor:function(a){this.kwArgs=f.mixin({},this.kwArgs,a||{});this.mainIndicators={};this.mainIndicatorsNum=0;this.indicators={};this.indicatorsNum=0;this.data={}},postCreate:function(){this.initCanvas(d.getMarginBox(this.domNode));if(!this.theme)this.theme=new e},initCanvas:function(e){var c=this.kwArgs;if(!this.canvas)this.canvas=g.createCanvas(this.domNode),this.ctx=this.canvas.getContext("2d");
this.noscale?(this.canvas.height=a.scaleMul(e.h,"y"),this.canvas.width=a.scaleMul(e.w,"x"),this.canvas.style["-webkit-transform-origin"]="left top",this.canvas.style["-webkit-transform"]="scale("+1/a.getScaleX()+","+1/a.getScaleY()+")"):(this.canvas.height=e.h,this.canvas.width=e.w,this.canvas.style["-webkit-transform-origin"]="",this.canvas.style["-webkit-transform"]="");this.plotHeight=this.canvas.height-c.margins.t-c.margins.b;this.plotWidth=this.canvas.width-c.margins.l-c.margins.r},setTheme:function(a){this.theme=
a},addMain:function(a){this.main&&this.main.destroy();this.main=a;return this},addMainIndicator:function(a){var c=a.type;c in this.mainIndicators&&(this.mainIndicatorsNum-=1,this.mainIndicators[c].destroy());this.mainIndicators[c]=a;this.mainIndicatorsNum+=1;return this},delMainIndicator:function(a){a in this.mainIndicators&&(this.mainIndicatorsNum-=1,this.mainIndicators[a].destroy(),delete this.mainIndicators[a],this.render())},addIndicator:function(a){var c=a.type;c in this.indicators&&(this.indicatorsNum-=
1,this.indicators[c].destroy());this.indicators[c]=a;this.indicatorsNum+=1;return this},setData:function(a){f.mixin(this.data,a)},getData:function(){return this.data},delIndicator:function(a){a in this.indicators&&(this.indicatorsNum-=1,this.indicators[a].destroy(),delete this.indicators[a],this.render())},divideRegion:function(){var a=this.main,c=this.indicators,e=this.mainIndicators,b=this.kwArgs,d=this.mainIndicatorsNum,g=b.margins,b=b.offsets,f,h=this.indicatorsNum;if(a||d){d=(this.plotHeight-
b.t-b.b)/(h+2);f={ctx:this.ctx,offsets:b,height:2*d,width:this.plotWidth-b.l-b.r,yStart:g.t+b.t,xStart:g.l+b.l,theme:this.theme,margins:this.kwArgs.margins};a&&a.setGeometry(f);for(var p in e)e[p].setGeometry(f)}else d=(this.plotHeight-b.t-b.b)/h;var a=0,t;for(t in c)c[t].setGeometry({ctx:this.ctx,offsets:b,height:d,width:this.plotWidth-b.l-b.r,yStart:g.t+b.t+(f?(a+2)*d:a*d),xStart:g.l+b.l,theme:this.theme,margins:this.kwArgs.margins}),a++},render:function(){var a=this.main,c=this.indicators,e=this.mainIndicators;
this.divideRegion();a&&a.render();for(var b in e)e[b].render();for(var d in c)c[d].render()},resize:function(a){a&&(d.setMarginBox(this.domNode,{w:a.w,h:a.h}),this.initCanvas(d.getMarginBox(this.domNode)),this.render())},clear:function(){var a=this.main,c=this.indicators,e=this.mainIndicators;a&&a.clear();for(var b in e)e[b].clear();for(var d in c)c[d].clear()},saveAsExcel:function(){var a=0,c=this.main,e=c.getMainLabels()[0],b=c.getMainCode()[0].split(".")[0],d=this.data,g=[],f=d.time.length;c.baseValue?
g=["time","price","volume"]:(a=c.getStart(),f=c.getEnd(),g="time,open,high,low,close,volume".split(","));c=["<html xmlns:x='urn:schemas-microsoft-com:office:excel'><head><\!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>"];c.push("\u5927\u667a\u6167\u6570\u636e\u5bfc\u51fa");c.push("</x:Name><x:WorksheetOptions><x:Panes></x:Panes></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\><meta http-equiv='content-type' content='text/html; charset=gbk'><style>.text { font-family:Arial;font-size:10pt;mso-number-format:'@';}</style></head>");
c.push("<body>");c.push("<table width='100%' border='1' cellpadding='0' bordercolorlight='#999999' bordercolordark='#FFFFFF' cellspacing='0' align='center'>");c.push("");c.push("<tr>");c.push("<th><div>");c.push("\u4ee3\u7801");c.push("</div></th>");c.push("<th><div>");c.push(b);c.push("</div></th>");c.push("<th><div>");c.push("\u540d\u79f0");c.push("</div></th>");c.push("<th><div>");c.push(e);c.push("</div></th>");c.push("</tr>");c.push("<tr>");for(var h in g)c.push("<th><div>"),c.push(g[h]),c.push("</div></th>");
c.push("</tr>");for(h=a;h<f;h++){c.push("<tr>");for(var p in g)c.push("<td>"),c.push(d[g[p]][h]),c.push("</td>");c.push("</tr>")}c.push("</table>");c.push("</body>");window.external.saveas?window.external.saveas(c.join(""),"\u5927\u667a\u6167\u6570\u636e\u5bfc\u51fa","xls"):alert("\u8bf7\u5728\u5927\u667a\u6167\u5ba2\u6237\u7aef\u4f7f\u7528")}})})},"dojox/customfig/utils":function(){define("dojox/customfig/utils",["..","dojo/_base/lang","dojo/dom-construct","../canvasDashedLine"],function(v,u,h,f){function b(a){return d.test(a)?
a+0.5:a}var d=/^-?[1-9]\d*$/,g={"%Y-%m-%d %H:%M":function(a){a=new Date(a);return a.getFullYear()+"-"+(100+a.getMonth()+1).toString().substring(1)+"-"+(100+a.getDate()).toString().substring(1)+" "+(100+a.getHours()).toString().substring(1)+":"+(100+a.getMinutes()).toString().substring(1)},"%H:%M":function(a){a=new Date(a);return(100+a.getHours()).toString().substring(1)+":"+(100+a.getMinutes()).toString().substring(1)},"%m/%d %H:%M":function(a){a=new Date(a);return(100+a.getMonth()+1).toString().substring(1)+
"/"+(100+a.getDate()).toString().substring(1)+" "+(100+a.getHours()).toString().substring(1)+":"+(100+a.getMinutes()).toString().substring(1)},"%Y/%m/%d":function(a){a=new Date(a);return a.getFullYear()+"/"+(100+a.getMonth()+1).toString().substring(1)+"/"+(100+a.getDate()).toString().substring(1)}},v=u.getObject("customfig.utils",!0,v);u.mixin(v,{organizeXLabels:function(a,e){for(var b,c,d=[],g=0;g<2*a;g+=2){var f=[];b=1*e[g];c=1*e[g+1];if(0!==b&&c)for(b=g?b+60:b;b<=c;b+=60)f.push(this.from5StrToHM("%h:%m",
b));d.push(f)}return d},checkSameValueInMainarr:function(a,e){2===this.array2ORarray1(a)&&(a=this.array2toarray1(a));2===this.array2ORarray1(e)&&(e=this.array2toarray1(e));var b=[],c={},d,g,f;d=0;for(var o=a.length;d<o;d++)c[a[d]]=d,b.push({mainIndex:d,value:a[d]});for(var o=0,k=e.length;o<k;o++)if(d=c[e[o]],void 0!=d)b[d].overlapsIndex=o,g||(g={mainIndex:d,overlapsIndex:o,value:a[d]}),!f&&d==a.length-1&&(f={mainIndex:d,overlapsIndex:o,value:a[d]});g&&(b.shift(),b.unshift(g));f&&(b.pop(),b.push(f));
return b},array2ORarray1:function(a){return"[object Array]"===Object.prototype.toString.call(a)?"[object Array]"===Object.prototype.toString.call(a[0])?2:1:0},array2toarray1:function(a){for(var e=[],b=0;b<a.length;b++)e=e.concat(a[b]);return e},ygrid:function(a,e,b){2>b&&(b=2);var c=b-1,d=[];0==c&&(c=1);e=(e-a)/c;for(c=0;c<b;c++)d[c]=a+e*c;return d},isEmptyObject:function(a){for(var e in a)return!1;return!0},createCanvas:function(a){return h.create("canvas",null,a)},clearCanvas:function(a,e,b,c,d,
g){e=Math.round(e);b=Math.round(b);a.clearRect(e,b,c,d);a.fillStyle=g;a.fillRect(e,b,c,d)},drawline:function(a,e,d,c,g,f,i){var o=a.lineWidth;a.lineWidth=i||1;a.strokeStyle=f||"#111111";a.beginPath();e=b(e);c=b(c);d=b(d);g=b(g);a.moveTo(e,d);a.lineTo(c,g);a.stroke();a.closePath();a.lineWidth=o},drawText:function(a,e,b,c,d){var g=d.padding||2;a.font=d.font||"10pt Arial bold";a.textAlign=d.align||"start";a.textBaseline=d.textBaseline||"bottom";a.fillStyle=d.color||"red";a.fillText(e,b+g,c);return a.measureText(e).width},
drawDashes:function(a,e,d,c,g,n){e=b(e);c=b(c);d=b(d);g=b(g);f.drawDashedPolyLine(a,[[e,d],[c,g]],{color:n})},drawRect:function(a,e,d,c,g,f){f?(e=b(e),d=b(d),a.strokeRect(e,d,c,g)):a.fillRect(e,d,c,g)},minmax2d:function(a,e,b){var c=-Infinity,d=Infinity,e=e||0,b=b||a[0].length,g;for(g in a){var f=a[g].slice(e,b);for(j in f)+f[j]>=c&&(c=1*f[j]),+f[j]<d&&(d=1*f[j])}return[+d,+c]},minmax1d:function(a){var e=-Infinity,b=Infinity,c;for(c in a)+a[c]>=e&&(e=a[c]),+a[c]<b&&(b=a[c]);return[+b,+e]},from5StrToHM:function(a,
b){var d=Math.floor(b/3600),d=(100+d).toString().substring(1);24<=d&&(d=(100+(d-24)).toString().substring(1));var c=(100+Math.floor(b%3600/60)).toString().substring(1);if("%h:%m"==a)return d+":"+c;if("%h%m"==a)return d+""+c},fromHMTo5Str:function(a){a=a.split(":");if(1<a.length)return 3600*a[0]+60*a[1]},date2Millisecond:function(a){var b;b=(new Date(a)).getTime();if(!isNaN(b))return b;a=a.replace(/-/g," ");b=(new Date(a)).getTime();if(!isNaN(b)||1E5<(b=parseInt(a)))return b},millisecondChange:function(a,
b){var a=a+"",d=(new Date).getTimezoneOffset()/60;b&&(d=0);5==a.length||6==a.length?(a=1E3*a+(new Date).setHours(0,0,0,0),d=0):9<=a.length&&(a*=1E3);return 1*a+36E5*d},millisecond2Date:function(a,b,d,c,f){function n(a,b){if(2==b)return(100+a).toString().substring(1);if(3==b)return(1E3+a).toString().substring(1);a=a.toString().replace(/^([0-9])$/,"0$1");3===b&&(a=a.toString().replace(/^([0-9]{2})$/,"0$1"));return a}b=this.millisecondChange(b,f);if(g[a])return g[a](b);if(!(void 0!==b&&null!==b)||isNaN(b))return"Invalid date";
var a=function(){var a=arguments,b,c,d=a.length;for(b=0;b<d;b++)if(c=a[b],"undefined"!==typeof c&&null!==c)return c}(a,"%Y-%m-%d %H:%M:%S"),f=new Date(b),i,o=f.getHours(),k=f.getDay(),h=f.getDate(),p=f.getMonth(),t=f.getFullYear(),q=d&&d.months?d.months:"\u4e00\u6708,\u4e8c\u6708,\u4e09\u6708,\u56db\u6708,\u4e94\u6708,\u516d\u6708,\u4e03\u6708,\u516b\u6708,\u4e5d\u6708,\u5341\u6708,\u5341\u4e00\u6708,\u5341\u4e8c\u6708".split(","),b={a:(d&&d.weekdays?d.weekdays:"\u65e5,\u4e00,\u4e8c,\u4e09,\u56db,\u4e94,\u516d".split(","))[k],
d:n(h),e:h,b:q[p].substr(0,3),B:q[p],m:n(p+1),y:t.toString().substr(2,2),Y:t,H:n(o),I:n(o%12||12),l:o%12||12,M:n(f.getMinutes()),P:12>o?"AM":"PM",p:12>o?"am":"pm",S:n(f.getSeconds()),L:n(b%1E3,3)};for(i in b)a=a.replace("%"+i,b[i]);return c?a.substr(0,1).toUpperCase()+a.substr(1):a},str2millisecond:function(a){var b,d,c,g,f;b=a.substr(0,4);d=a.substr(4,2);c=a.substr(6,2);g=a.substr(8,2);f=a.substr(10,2);a=a.substr(12,2);return(new Date(b+"-"+d+"-"+c+"T"+g+":"+f+":"+a)).getTime()/1E3}});return v})},
"dojox/customfig/themes/Theme":function(){define("dojox/customfig/themes/Theme",["dojo/_base/declare"],function(v){return v("dojox.customfig.themes.Theme",null,{com_de_opt:{label:"#5F5E5E",font:"9pt Arial bold",stroke:"#686868",background:"#FFFFFF",backgroundGrid:{type:"dashed",color:"#CFCFCF",height:25},xAxisLabel:{color:"#606060",background:"#FFFFFF"},yAxisLabel:{color:"#606060",background:"#FFFFFF"},xLabelsInterval:30,fixedNum:0,prepareDistance:0},sharingPlans:{timetrendFilledColors:["#131313",
"#0073ff"],timetrendFillAlpha:0.7,timetrend:["#F59F56","red","yellow"],baseValueStyle:{color:"#FF0000",background:"#FFFFFF"},yUpLabel:{color:"#E60000",background:"#FFFFFF"},yDownLabel:{color:"#1FA42C",background:"#FFFFFF"}},kline:{candleStyle:[{upStyle:{candle:{type:"stroke",color:"#CC4642"}},downStyle:{candle:{type:"fill",color:"#55710B"}}},{upStyle:{candle:{type:"stroke",color:"#5F9EA0"}},downStyle:{candle:{type:"fill",color:"#5F9EA0"}}},{upStyle:{candle:{type:"stroke",color:"#C67413"}},downStyle:{candle:{type:"fill",
color:"#C67413"}}},{upStyle:{candle:{type:"stroke",color:"#C67488"}},downStyle:{candle:{type:"fill",color:"#C67488"}}},{upStyle:{candle:{type:"stroke",color:"#C93413"}},downStyle:{candle:{type:"fill",color:"#C93413"}}}],maximumArrow:{color:"red"},minimumArrow:{color:"blue"},yAxisUpLabel:{color:"#CC4642"},yAxisLowLabel:{color:"#55710B"}},ma:{ma:["green","red","blue"]},kdj:{kdj:["green","red","blue"]},vol:{volumnStyle:{upColor:"#ff0000",downColor:"#55710B",color:"yellow"}},macd:{macdStyle:{diff:{color:"#9B9B9B"},
dea:{color:"#BC6111"},macd:{upcolor:"#ff0000",downcolor:"#00ff00"}}},crosshair:{tooltip:{content:{background:"#3d70ae",width:"auto",height:"auto",border:"#3C72AE solid 1px","text-shadow":"1px 1px #244f84","text-align":"center",position:"absolute",opacity:0.85,"z-index":2,"line-height":1.6,padding:"4px","border-radius":"9px","font-size":"12px",color:"#FFFFFF"},time:{"font-weight":"normal",color:"#ffc13b"}},vLine:{width:"1px",background:"#3C72AE",position:"absolute","z-index":2},hLine:{height:"1px",
background:"#3C72AE",position:"absolute","z-index":2},vLabel:{border:"1px solid #3C72AE",color:"#3C72AE","text-align":"center","z-index":2,position:"absolute",background:"white"},hLabel:{border:"1px solid #3C72AE",color:"#3C72AE","text-align":"center","z-index":2,position:"absolute",width:"auto",background:"white"}}})})},"dojox/customfig/mains/SharingPlans":function(){define("dojox/customfig/mains/SharingPlans",["dojo/_base/declare","dojo/_base/lang","../Element","../utils"],function(v,u,h,f){return v("dojox.customfig.mains.SharingPlans",
[h],{type:"sharingPlans",txt:"\u5206\u65f6\u8d70\u52bf",defaultOptions:{timetrendType:1,overlapType:0,timetrendFilled:!1,fixedNum:2,rateNum:0.01,rateNumOffset:0.1,newTxt:!1},constructor:function(b,d){this._options=u.mixin({},this.defaultOptions,d.options);this.mainLabels=d.mainLabels?d.mainLabels:[];this.baseValue=d.baseValue?d.baseValue:[];this.yLabels=d.yLabels?d.yLabels:[];this.xLabels=d.xLabels?d.xLabels:[];this.data=d.data?d.data:[];this.timeKey=d.timeKey?d.timeKey:[]},setGeometry:function(b){this.ctx=
b.ctx;this.offsets=b.offsets;this.height=b.height;this.width=b.width;this.yStart=b.yStart;this.xStart=b.xStart;this.margins=b.margins;this.options=u.mixin({},b.theme.com_de_opt,b.theme[this.type],this._options)},coreRange:function(){var b=0,d,g,a,e=this.data,m=this.options;this.baseValue&&this.baseValue.length?a=this.baseValue:a=this.baseValue[0]=this.yStart+this.height/2;this.xLabels&&this.xLabels.length?d=this._getLabelsLength():d=this.width;this.cwidth=(this.width-m.prepareDistance)/(d-1);this.csize=
0;if(e&&a)for(var c=0,l=e.length;c<l;c++)e[c]&&a[c]&&(g=f.minmax1d(e[c]),d=Math.abs(g[1]-a[c])/a[c],g=Math.abs(g[0]-a[c])/a[c],b=Math.max(b,d*(1+m.rateNumOffset),g*(1+m.rateNumOffset)));if(0===b)b=m.rateNum;else if(b<m.rateNum)b=m.rateNum;this.ymin=1-b;this.ymax=1+b;this.yAxisRange=this.ymax-this.ymin;this.yAxisScale=this.height/this.yAxisRange},drawMain:function(){this.options.timetrendFilled?this.fillPlot():this.strokePlot()},fillPlot:function(){var b=this.ctx,d=this.options,g=this.baseValue,a=
this.data,e=this.xStart,m=this.yStart,c=m+this.height/2,l=m+this.height,n=this.yAxisScale,i=this.cwidth,o=this.timeKey,k,h,p,t,q;if(a&&g)for(var s=0,w=a.length;s<w;s++)if(a[s]&&g[s])if(p=[],0===s){b.save();b.beginPath();b.globalAlpha=d.timetrendFillAlpha;b.strokeStyle=d.timetrend[s];b.lineWidth=1;for(var x=0,z=a[s].length;x<z;x++){var y=x*i+e;k=Math.round((a[s][x]-g[s])/g[s]*n);x?b.lineTo(d.prepareDistance+y,c-k):b.moveTo(d.prepareDistance+y,c-k)}b.stroke();if(1==d.timetrendFilledColors.length)b.fillStyle=
d.timetrendFilledColors[0];else if(2==d.timetrendFilledColors.length)x=b.createLinearGradient(d.prepareDistance,m,d.prepareDistance,l),x.addColorStop(0,d.timetrendFilledColors[0]),x.addColorStop(1,d.timetrendFilledColors[1]),b.fillStyle=x;b.lineTo(d.prepareDistance+y,l);b.lineTo(e+d.prepareDistance,l);b.lineTo(d.prepareDistance+e,l);b.closePath();b.fill();b.restore()}else{t=o[s-1];q=a[s][0];for(x=0;x<z;x++)t&&t[x].overlapsIndex?(k=x*i+e,q=t[x].overlapsIndex,h=Math.round((a[s][q]-g[s])/g[s]*n),f.drawline(b,
d.prepareDistance+p[0],p[1],d.prepareDistance+k,c-h,d.timetrend[s],1),p=[k,c-h],q=a[s][q]):(k=x*i+e,h=Math.round((q-g[s])/g[s]*n),f.drawline(b,d.prepareDistance+p[0],p[1],d.prepareDistance+k,c-h,d.timetrend[s],1),p=[k,c-h])}},strokePlot:function(){var b=this.ctx,d=this.options,g=this.baseValue,a=this.data,e=this.xStart,m=this.yStart+this.height/2,c=this.yAxisScale,l=this.cwidth,n=this.csize,i=this.timeKey,o,k,h,p,t;if(a&&g)for(var q=0,s=a.length;q<s;q++)if(a[q]&&g[q])if(h=[],0===q)for(var w=0,x=a[q].length;w<
x;w++)o=w*l+e+n/2,k=Math.round((a[q][w]-g[q])/g[q]*c),f.drawline(b,d.prepareDistance+h[0],h[1],d.prepareDistance+o,m-k,d.timetrend[q],1),h=[o,m-k];else if(i[q-1]){p=i[q-1];t=a[q][0];for(w=0;w<x;w++)p&&void 0!=p[w].overlapsIndex?(o=w*l+e+n/2,t=p[w].overlapsIndex,k=Math.round((a[q][t]-g[q])/g[q]*c),f.drawline(b,d.prepareDistance+h[0],h[1],d.prepareDistance+o,m-k,d.timetrend[q],1),h=[o,m-k],t=a[q][t]):(o=w*l+e+n/2,k=Math.round((t-g[q])/g[q]*c),f.drawline(b,d.prepareDistance+h[0],h[1],d.prepareDistance+
o,m-k,d.timetrend[q],1),h=[o,m-k])}},yAxis:function(){var b=this.ctx,d=this.xStart,g=d+this.width,a=this.height,e=this.yStart+a/2,m=this.yAxisScale,c,l=this.ymin,n=this.ymax,i=this.options;c=this.yLabels;var o=[],k=[],h=i.fixedNum;if((!c||!c.length)&&this.baseValue&&this.baseValue.length){c=this.baseValue[0];o=f.ygrid(c,c*n,Math.floor(a/2/i.backgroundGrid.height));k=f.ygrid(l*c,c,Math.floor(a/2/i.backgroundGrid.height));f.drawline(b,d,e,g,e,i.baseValueStyle.color);f.drawText(b,(0).toFixed(h)+"%",
g,e,{align:"left",textBaseline:"middle",padding:5,color:i.label,background:i.background});f.drawText(b,c.toFixed(h),d,e,{align:"right",padding:-5,textBaseline:"middle",color:i.label,background:i.background});for(var p=1,t=o.length;p<t;p++)a=o[p],l=(100*((a-c)/c)).toFixed(h)+"%",n=e-(o[p]-c)/c*m,f.drawText(b,l,g,n,{align:"left",textBaseline:"middle",padding:5,color:i.yUpLabel.color,background:i.yUpLabel.background}),f.drawText(b,a.toFixed(h),d,n,{align:"right",padding:-5,textBaseline:"middle",color:i.yUpLabel.color,
background:i.yUpLabel.background}),p!=t-1&&("dashed"==i.backgroundGrid.type?f.drawDashes(b,d,n,g,n,i.backgroundGrid.color,1):f.drawline(b,d,n,g,n,i.backgroundGrid.color));p=0;for(t=k.length;p<t-1;p++)a=k[p],l=(100*((c-a)/c)).toFixed(h)+"%",n=e+(c-k[p])/c*m,0==p?(f.drawText(b,l,g,n,{align:"left",textBaseline:"bottom",padding:5,color:i.yDownLabel.color,background:i.yDownLabel.background}),f.drawText(b,a.toFixed(h),d,n,{align:"right",padding:-5,textBaseline:"bottom",color:i.yDownLabel.color,background:i.yDownLabel.background})):
(f.drawText(b,l,g,n,{align:"left",textBaseline:"middle",padding:5,color:i.yDownLabel.color,background:i.yDownLabel.background}),f.drawText(b,a.toFixed(h),d,n,{align:"right",padding:-5,textBaseline:"middle",color:i.yDownLabel.color,background:i.yDownLabel.background}),"dashed"==i.backgroundGrid.type?f.drawDashes(b,d,n,g,n,i.backgroundGrid.color,1):f.drawline(b,d,n,g,n,i.backgroundGrid.color))}},xAxis:function(){var b=this.ctx,d=this.xStart,g=d+this.width,a=this.yStart,e=a+this.height,m=this.xLabels,
c=this.options,l=c.prepareDistance,n=this.cwidth,i=this.csize,h,k=0,r=0;if(m&&m.length)for(var p=0,t=m.length;p<t;p++){for(var q=m[p].length,s=p?c.xLabelsInterval-1:0;s<q;s+=c.xLabelsInterval)0==s&&0==p?h=d+l+s*n+i/2:h=k+c.xLabelsInterval*n,h-r>b.measureText(m[p][s]).width&&(f.drawText(b,m[p][s],h,e,{align:"center",textBaseline:"top",color:c.xAxisLabel.color,background:c.xAxisLabel.background}),r=h),k=h,h<=d||h>=g||("dashed"==c.backgroundGrid.type?f.drawDashes(b,h,e,h,a,c.backgroundGrid.color,1):
"solid"==c.backgroundGrid.type&&f.drawline(b,h,e,h,a,c.backgroundGrid.color));s-c.xLabelsInterval!=q-1&&(h=k+Math.round(Math.abs(q-1-(s-c.xLabelsInterval))*n),h-r>b.measureText(m[p][q-1]).width&&(f.drawText(b,m[p][q-1],h,e,{align:"center",textBaseline:"top",color:c.xAxisLabel.color,background:c.xAxisLabel.background}),r=h),k=h,h<=d||h>=g||("dashed"==c.backgroundGrid.type?f.drawDashes(b,h,e,h,a,c.backgroundGrid.color,1):"solid"==c.backgroundGrid.type&&f.drawline(b,h,e,h,a,c.backgroundGrid.color)))}},
render:function(){var b=this.options,d=this.offsets,g=this.xStart,a=this.yStart,e=this.ctx,m=this.plot,c=this.margins,l="";f.clearCanvas(e,g-d.l-this.margins.l,a-d.t+1,this.width+d.l+d.r+c.l+c.r+1,this.height+d.t+d.b-1,b.background);e.strokeStyle=b.stroke;f.drawRect(e,g,a,this.width,this.height,!0);if(b.newTxt)this.renderTxt();else{if(this.mainLabels){d=0;for(c=this.mainLabels.length;d<c;d++)f.drawText(e,this.mainLabels[d],g+e.measureText(l).width,a-1,{align:"start",textBaseline:"bottom",color:b.timetrend[d],
background:b.background}),l+=this.mainLabels[d]+" "}f.drawText(e,this.txt,g+e.measureText(l).width,a-1,{align:"start",textBaseline:"bottom",color:b.label,background:b.background});l+=this.txt+" ";m.mainLabels=l}this.coreRange();this.xAxis();this.yAxis();this.drawMain()},renderTxt:function(){var b=this.options,d=this.ctx,g=this.xStart,a=this.yStart,e=this.offsets,m=this.plot,c=m.canvas,l=this.data[0],h=b.fixedNum,i=this.baseValue,o,k=0,r;r=function(a,b,d,e,g,f){a.lineWidth=2;a.fillStyle=+f;a.beginPath();
a.moveTo(b+e/2,d);a.lineTo(b+e,d-g/2);a.lineTo(b+3*e/4,d-g/2);a.lineTo(b+3*e/4,d-g);a.lineTo(b+e/4,d-g);a.lineTo(b+e/4,d-g/2);a.lineTo(b,d-g/2);a.lineTo(b+e/2,d);a.closePath();a.fill();a.save();f.up&&(a.setTransform(1,0,0,1,0,0),a.translate(b+e/2,d-g/2),a.rotate(180*Math.PI/180),a.drawImage(c,b,d-g,e,g,-e/2,-g/2,e,g),a.restore())};l=l&&Number(l.slice(-1)).toFixed(h);if("undefined"!=typeof l){o=(l-i).toFixed(h);i=(100*o/i).toFixed(h)+"%";h=(m.data.amount.slice(-1)/Math.pow(10,8)).toFixed(h)+"\u4ebf";
m=0<=o?{value:"#E60000",up:!0}:{value:"#1FA42C",up:!1};m.toString=function(){return this.value};f.clearCanvas(d,g+1,a-e.t+1,this.width-2,e.t-2,b.background);txts=[{value:l,style:{color:""+m,font:"20px Arial bold"}},{value:o,style:{color:""+m}},{value:i,style:{color:""+m}},{value:h,style:{color:"#8f2211"}}];for(var p in txts)e=txts[p],l=e.style.font||"10px Arial bold",f.drawText(d,e.value,g+k,a-1,{align:"start",textBaseline:"bottom",color:e.style.color,font:l,background:b.background}),k=d.measureText(e.value).width+
k+15,0==Number(p)&&(r(d,g+k-7.5,a-4,20,20,m),k+=20)}},destroy:function(){},setMainLabels:function(b){this.mainLabels=b},getMainLabels:function(){return this.mainLabels},setMainCode:function(b){this.mainCode=b},getMainCode:function(){return this.mainCode},setTimeKey:function(b,d){this.getTimeKey()[d]=b},getTimeKey:function(){return this.timeKey},setData:function(b,d){this.getData()[d]=b},getData:function(){return this.data},setBaseValue:function(b){this.baseValue=b},getBaseValue:function(){return this.baseValue},
setXLabels:function(b){this.xLabels=b},getXLabels:function(){return this.xLabels},setYLabels:function(b){this.yLabels=b},getYLabels:function(){return this.yLabels},setOptions:function(b){this.options=u.mixin(this.options,b)},getOptions:function(){return this.options},_getLabelsLength:function(){for(var b=0,d=0;d<this.xLabels.length;d++)b+=this.xLabels[d].length;return b},clear:function(){this.data=[];this.timeKey=[]}})})},"dojox/customfig/Element":function(){define("dojox/customfig/Element",["dojo/_base/declare",
"dojo/_base/lang"],function(v){return v("dojox.customfig.Element",null,{constructor:function(u){this.plot=u;this.options={}}})})},"dojox/store/SharingPlansWSStore":function(){define("dojox/store/SharingPlansWSStore","dojo/_base/declare,dojo/_base/lang,dojo/json,dojo/Deferred,dojo/store/util/QueryResults,dojo/store/Observable,dojo/_base/array,dojo/io-query,dojo/topic,dojox/store/WebSocket".split(","),function(v,u,h,f,b,d,g,a,e,m){return v("dojox.store.SharingPlansWSStore",m,{convert:function(a){var b=
a.result,d,e,f={},m;if(0!=a.length){if(a.req_seq)m=a.req_seq;if(b&&2==b.head.length&&"obj"==b.head[0]&&"data"==b.head[1])a=b.datas,a instanceof Array&&(g.forEach(a,function(a){d=a[0];e=a[1];f[d]=e}),f[this.idProperty]=m);else if(b&&b.head&&b.datas)return b[this.idProperty]=m,b;return f}}})})},"dojox/customfig/datas/SharingPlansData":function(){define("dojox/customfig/datas/SharingPlansData",["dojo/_base/array","dojo/_base/declare","dojo/_base/Deferred","dojo/aspect","dojo/_base/lang"],function(v,
u,h,f,b){function d(b,a){var d=b.time,f;if(d&&a.time)for(var c=0,l=a.time.length;c<l;c++)if(f=d[d.length-1],f===a.time[c])for(var h in b)f=b[h],a[h]&&(f[f.length-1]=a[h][c]);else if(f<a.time[c])for(h in b)f=b[h],a[h]&&f.push(a[h][c]);return b}return u("dojox.customfig.datas.SharingPlansData",null,{constructor:function(b,a,d){this.store=b;this.kwArgs=a;this.value=d?"function"==typeof d?d:"object"==typeof d?function(a,b){for(var g={},f,h,o={},k=0,r=a.length;k<r;k++)g[a[k]]=k;k=0;for(r=b.length;k<r;k++){h=
b[k];for(var p in d)f=d[p],o[p]||(o[p]=[]),"function"==typeof f?o[p].push(f(o,h,g,p,this.data)):"string"==typeof f&&(void 0!==g[f]?o[p].push(h[g[f]]):delete o[p])}return o}:function(a){return a[d]}:function(a){return a.value};this.data={};this._initialRendering=!1;this.fetch()},destroy:function(){this.observeHandle&&this.observeHandle.remove();this.data={}},setCallback:function(b){this.callback=b},fetch:function(){var g=this;if(this.observeHandle)this.observeHandle.remove(),this.data={};this.store.query(this.kwArgs.query,
this.kwArgs);this.observeHandle=f.after(this.store,"put",b.hitch(this,function(a,b){var f=b[0],c,h;if(f.head&&f.datas)h=g.value(f.head,f.datas),(c=h.obj)?c instanceof String?g.data[c]?(c=g.data[c],d(c,h)):g.data[c]=h:g.data[c[0]]?(c=g.data[c[0]],d(c,h)):g.data[c[0]]=h:g.data=h;else for(var n in f)c=f[n],c.head&&c.datas&&(h=g.value(c.head,c.datas),g.data[n]?(c=g.data[n],d(c,h)):g.data[n]=h);g._pushDataChanges()}))},_pushDataChanges:function(){this.callback&&this.callback(this.data)}})})},"dojox/customfig/indicators/Indicators":function(){define("dojox/customfig/indicators/Indicators",
["./Vol","./Macd","./Ma","./Kdj"],function(){})},"dojox/customfig/indicators/Vol":function(){define("dojox/customfig/indicators/Vol",["dojo/_base/declare","./Default","../utils","dojo/_base/lang"],function(v,u,h){return v("dojox.customfig.indicators.Vol",u,{type:"vol",txt:"\u6210\u4ea4\u91cf",fn:function(f){var b=[],d,g=!0;3==f.length&&(g=!1);g?d=f:d=f[0];for(var a=0,e=d.length;a<e;a++)0===a?b.push(1*d[a]):g?b.push(1*d[a]-1*d[a-1]):b.push(1*d[a]);if(!g)b.open=f[1],b.close=f[2];return b},defaultOptions:{precision:{num:2,
txt:"x100"}},constructor:function(){},coreRange:function(){var f,b=this.options,d=b.topSpacing;this.xLabels&&this.xLabels.length?f=this.getLabelsLength():f=this.width;this.plot.csizeRate?(this.cwidth=(this.width-b.prepareDistance)/f,this.csize=Math.round(this.cwidth/this.plot.csizeRate)):(this.cwidth=(this.width-b.prepareDistance)/(f-1),this.csize=0);this.data&&this.data.length?(/kline/.test(this.plot.main.type)?(this.start=this.start?this.start:0,this.end=this.end?this.end:this.data.length):(this.start=
0,this.end=this.data.length),f=h.minmax1d(this.data.slice(this.start,this.end))[1]):f=this.height-d;this.ymin=0;this.ymax=0==f?this.height-d:1*f;this.yAxisRange=this.ymax-this.ymin;this.yAxisScale=(this.height-d)/this.yAxisRange},drawMain:function(){this.linePlot()},linePlot:function(){var f=this.ctx,b=this.plot,d=this.options,g=this.ymin,a=this.data,e=this.yStart+this.height,m=d.prepareDistance,c=this.yAxisScale,l=this.cwidth,n=this.csize,i,o,k,r,p;if(a)for(var t=0,q=this.end;t+this.start<q;t++)o=
Math.round((a[t+this.start]-g)*c),a.open&&a.close&&/kline/.test(b.main.type)?(a.open[t+this.start]<a.close[t+this.start]?(k=d.volumnStyle.upColor,p=!0,f.strokeStyle=k):(k=d.volumnStyle.downColor,p=!1,f.fillStyle=k),r=o,1<this.csize?(i=m+t*l+this.xStart,h.drawRect(f,i,e-o,n,r,p)):(i=m+t*l+this.xStart+this.csize/2,h.drawline(f,i,e,i,e-o,k,1))):(i=m+t*l+this.xStart+this.csize/2,k=d.volumnStyle.color,h.drawline(f,i,e,i,e-o,k,1))},yAxis:function(){var f=this.ctx,b=this.options,d=this.xStart,g=d+this.width,
a=this.yStart,e=this.height,m=a+e,c=this.yAxisScale,l=this.ymin,n=this.yLabels,i,o=b.fixedNum;if(!n||!n.length)for(var e=h.ygrid(l,this.ymax,Math.floor((e-b.topSpacing)/b.backgroundGrid.height)),k=0,r=e.length;k<r;k++)n=e[k]/Math.pow(10,b.precision.num),i=m-(e[k]-l)*c,k?h.drawText(f,n.toFixed(o),d,i,{align:"right",textBaseline:"middle",padding:-5,color:b.yAxisLabel.color,background:b.yAxisLabel.background,font:b.font}):h.drawText(f,b.precision.txt,d,i,{align:"right",textBaseline:"bottom",padding:-5,
color:b.yAxisLabel.color,background:b.yAxisLabel.background,font:b.font}),i===a||i===m||("dashed"==b.backgroundGrid.type?h.drawDashes(f,d,i,g,i,b.backgroundGrid.color,1):h.drawline(f,d,i,g,i,b.backgroundGrid.color))},xAxis:function(){var f=this.ctx,b=this.xStart,d=b+this.width,g=this.yStart,a=g+this.height,e=this.options,m=e.prepareDistance,c=!0,l=this.plot,n=this.xLabels,i=this.cwidth,o=e.topSpacing,k,r=0,p=0;/kline/.test(l.main.type)&&(c=!1);l.main&&(e.xLabelsInterval=l.main.options.xLabelsInterval);
if(n&&n.length)for(var l=0,t=n.length;l<t;l++){for(var q=n[l].length,s=l?e.xLabelsInterval-1:0;s<q;s+=e.xLabelsInterval)0==s&&0==l?k=b+m+s*i+this.csize/2:k=r+e.xLabelsInterval*i,k-p>f.measureText(n[l][s]).width&&(h.drawText(f,n[l][s],k,a,{align:"center",textBaseline:"top",color:e.xAxisLabel.color,background:e.xAxisLabel.background,font:e.font}),p=k),r=k,k<=b||k>=d||!c||("dashed"==e.backgroundGrid.type?h.drawDashes(f,k,a,k,g+o,e.backgroundGrid.color,1):"solid"==e.backgroundGrid.type&&h.drawline(f,
k,a,k,g+o,e.backgroundGrid.color));s-e.xLabelsInterval!=q-1&&(k=r+Math.round(Math.abs(q-1-(s-e.xLabelsInterval))*i),k-p>f.measureText(n[l][q-1]).width&&(h.drawText(f,n[l][q-1],k,a,{align:"center",textBaseline:"top",color:e.xAxisLabel.color,background:e.xAxisLabel.background,font:e.font}),p=k),r=k,k<=b||k>=d||!c||("dashed"==e.backgroundGrid.type?h.drawDashes(f,k,a,k,g+o,e.backgroundGrid.color,1):"solid"==e.backgroundGrid.type&&h.drawline(f,k,a,k,g+o,e.backgroundGrid.color)))}},render:function(){var f=
this.options,b=this.ctx,d=this.xStart,g=this.yStart;this.inherited(arguments);h.drawText(b,this.mainLabels+" "+this.txt,d,g+f.topSpacing-1,{align:"start",textBaseline:"bottom",color:f.label,background:f.background,font:f.font})}})})},"dojox/customfig/indicators/Default":function(){define("dojox/customfig/indicators/Default",["dojo/_base/declare","../utils","../Element","dojo/_base/lang","dojo/_base/connect"],function(v,u,h,f,b){return v("dojox.customfig.indicators.Default",[h],{type:"default",txt:"",
fn:function(b){return b},com_def_Opt:{topSpacing:0,mainIndicatorType:0,closed:!1,closedStyle:{w:7,h:7,color:"red"}},constructor:function(d,g){this._options=f.mixin({},this.defaultOptions,this.com_def_Opt,g.options);this.args=g.args?g.args:this.args||[];this.mainLabels=g.mainLabels?g.mainLabels:"";this.xLabels=g.xLabels?g.xLabels:[];this.yLabels=g.yLabels?g.yLabels:[];this.fn=g.fn?g.fn:this.fn;g.data?this.setData(g.data):this.data=[];g.txt&&(this.txt=g.txt);this.invokeHandles=[];this.invokeHandles.push(b.connect(d.canvas,
"click",this,this._onClick))},setGeometry:function(b){this.ctx=b.ctx;this.offsets=b.offsets;this.height=b.height;this.width=b.width;this.yStart=b.yStart;this.xStart=b.xStart;this.margins=b.margins;this.options=f.mixin({},b.theme.com_de_opt,b.theme[this.type],this._options)},coreRange:function(){},drawMain:function(){},yAxis:function(){},xAxis:function(){},render:function(){var b=this.options,f=this.ctx,a=this.xStart,e=this.yStart,h=this.offsets,c=this.plot,l=this.margins,n=b.mainIndicatorType,i;if(!c.main||
!n){n=a-h.l-l.l;i=this.width+h.l+h.r+l.l+l.r;c.main||!u.isEmptyObject(c.mainIndicators)?(c=e,l=this.height+h.b):(c=e-h.t-l.t,l=this.height+h.t+l.t+h.b);u.clearCanvas(f,n,c,i,l,b.background);this.ctx.fillStyle=b.background;this.ctx.strokeStyle=b.stroke;u.drawRect(f,a,e,this.width,this.height,!0);if(b.closed)b.closeXPos={x1:a+this.width+h.r-b.closedStyle.w,y1:e+1,x2:a+this.width+h.r-1,y2:e+b.closedStyle.h},u.drawline(f,b.closeXPos.x1,b.closeXPos.y1,b.closeXPos.x2,b.closeXPos.y2,b.closedStyle.color),
u.drawline(f,b.closeXPos.x1,b.closeXPos.y2,b.closeXPos.x2,b.closeXPos.y1,b.closedStyle.color);this.coreRange();this.yAxis();this.xAxis();this.drawMain()}},_onClick:function(b){var f,a,e,h,c,l;l=this.options.closeXPos;var n=this.plot;f=b.offsetX;a=b.offsetY;if(l)e=l.x1,h=l.x2,c=l.y1,l=l.y2,f>=e&&f<=h&&a>=c&&a<=l&&(n.delIndicator(this.type),b.stopPropagation())},destroy:function(){for(var d=0,f=this.invokeHandles.length;d<f;d++)b.disconnect(this.invokeHandles[d]);this.invokeHandles=[]},setMainLabels:function(b){this.mainLabels=
b},getMainLabels:function(){return this.mainLabels},setData:function(b){this.data=this.fn(b)},getData:function(){return this.data},setXLabels:function(b){this.xLabels=b},getXLabels:function(){return this.xLabels},setYLabels:function(b){this.yLabels=b},getYLabels:function(){return this.yLabels},setStart:function(b){this.start=b},getStart:function(){return this.start},setEnd:function(b){this.end=b},getEnd:function(){return this.end},setOptions:function(b){this.options=f.mixin(this.options,b)},getOptions:function(){return this.options},
getLabelsLength:function(){for(var b=0,f=0;f<this.xLabels.length;f++)b+=this.xLabels[f].length;return b},clear:function(){this.data=[];this.olddatalength=this.end=this.start=null}})})},"dojox/customfig/indicators/Macd":function(){define("dojox/customfig/indicators/Macd",["dojo/_base/declare","./Default","../utils","dojo/_base/lang"],function(v,u,h){return v("dojox.customfig.indicators.Macd",[u],{type:"macd",txt:"MACD",fn:function(f,b){var d=b[1],g=b[2],a=[];if(f&&f.length){for(var e=function(a,b){var c=
[],e=2/(b+1);c[0]=a[0];for(var d=1;d<a.length;d++)c[d]=void 0===a[d]||null===a[d]?c[d-1]:c[d-1]?e*a[d]+(b-1)/(b+1)*c[d-1]:a[d];return c},h=e(f,b[0]),d=e(f,d),c=0;c<h.length;c++)h[c]=d[c]-h[c];d=e(h,g);for(c=0;c<h.length;c++)a[c]=[h[c],d[c],2*(h[c]-d[c])];return a}},ymin:0,ymax:0,yAxisRange:0,yAxisScale:0,args:[12,26,9],defaultOptions:{fixedNum:2,precision:{num:2,txt:"x100"}},constructor:function(){},coreRange:function(){var f,b;f=this.options;var d=f.topSpacing,g=this.plot;this.xLabels&&this.xLabels.length?
b=this.getLabelsLength():b=this.width;g.csizeRate?(this.cwidth=(this.width-f.prepareDistance)/b,this.csize=Math.round(this.cwidth/g.csizeRate)):(this.cwidth=(this.width-f.prepareDistance)/(b-1),this.csize=0);this.data&&this.data.length?(this.plot.main&&/kline/.test(this.plot.main.type)?(this.start=this.start?this.start:0,this.end=this.end?this.end:this.data.length):(this.start=0,this.end=this.data.length),f=h.minmax2d(this.data.slice(this.start,this.end)),b=f[0],f=f[1]):(f=1,b=0);this.ymax=Math.max(Math.abs(b),
Math.abs(f));this.ymin=-1*this.ymax;this.yAxisScale=(this.yAxisRange=this.ymax-this.ymin)?(this.height-d)/this.yAxisRange:(this.height-d)/2},drawMain:function(){this.linePlot()},linePlot:function(){var f=this.ctx,b=this.options,d=this.data,g=this.xStart,a=b.topSpacing,e=b.prepareDistance,m=this.yAxisScale,a=this.yStart+a+(this.height-a)/2,c=this.cwidth,l=this.csize,b=b.macdStyle,n={diff:0,dea:1,macd:2},i,o,k,r,p;if(d&&d.length)for(var t in n)if(i=n[t],2==i)for(var q=0,s=this.end;q+this.start<s;q++)k=
e+q*c+g+l/2,r=a-d[q+this.start][i]*m,o=0<d[q+this.start][i]?b[t].upcolor:b[t].downcolor,h.drawline(f,k,a,k,r,o,1);else{p=[];q=0;for(s=this.end;q+this.start<s;q++)k=Math.round(e+q*c+g+l/2),r=a-d[q+this.start][i]*m,o=b[t].color,h.drawline(f,p[0],p[1],k,r,o,1),p=[k,r]}},yAxis:function(){var f=this.ctx,b=this.options,d=this.xStart,g=d+this.width,a=this.yStart,e=this.height,m=b.topSpacing,c=this.yAxisScale,l=a+m+(e-m)/2,n=this.ymin?this.ymin:-1,i=this.yLabels,o=b.fixedNum,k=[],r=[];if(!i||!i.length){k=
h.ygrid(0,this.ymax?this.ymax:1,Math.floor((e-m)/2/b.backgroundGrid.height));r=h.ygrid(n,0,Math.floor((e-m)/2/b.backgroundGrid.height));"dashed"==b.backgroundGrid.type?h.drawDashes(f,d,l,g,l,b.backgroundGrid.color,1):h.drawline(f,d,l,g,l,b.backgroundGrid.color);h.drawText(f,(0).toFixed(o),d,l,{align:"right",padding:-5,textBaseline:"middle",color:b.yAxisLabel.color,background:b.yAxisLabel.background});n=0;for(i=k.length;n<i;n++)e=k[n],m=l-k[n]*c,h.drawText(f,e.toFixed(o),d,m,{align:"right",padding:-5,
textBaseline:"middle",color:b.yAxisLabel.color,background:b.yAxisLabel.background}),m!=a&&("dashed"==b.backgroundGrid.type?h.drawDashes(f,d,m,g,m,b.backgroundGrid.color,1):h.drawline(f,d,m,g,m,b.backgroundGrid.color));n=0;for(i=r.length-1;n<i;n++)e=r[n],m=l-r[n]*c,0==n?h.drawText(f,e.toFixed(o),d,m,{align:"right",padding:-5,textBaseline:"bottom",color:b.yAxisLabel.color,background:b.yAxisLabel.background}):("dashed"==b.backgroundGrid.type?h.drawDashes(f,d,m,g,m,b.backgroundGrid.color,1):h.drawline(f,
d,m,g,m,b.backgroundGrid.color),h.drawText(f,e.toFixed(o),d,m,{align:"right",padding:-5,textBaseline:"middle",color:b.yAxisLabel.color,background:b.yAxisLabel.background}))}},xAxis:function(){var f=this.ctx,b=this.xStart,d=b+this.width,g=this.yStart,a=g+this.height,e=this.options,m=e.prepareDistance,c=this.xLabels,l=this.plot,n=this.cwidth,i=this.csize,o=e.topSpacing,k,r=0,p=0,t=!0;l.main&&/kline/.test(l.main.type)&&(t=!1);l.main&&(e.xLabelsInterval=l.main.options.xLabelsInterval);if(c&&c.length)for(var l=
0,q=c.length;l<q;l++){for(var s=c[l].length,w=l?e.xLabelsInterval-1:0;w<s;w+=e.xLabelsInterval)0==w&&0==l?k=b+m+w*n+i/2:k=r+e.xLabelsInterval*n,k-p>f.measureText(c[l][w]).width&&(h.drawText(f,c[l][w],k,a,{align:"center",textBaseline:"top",color:e.xAxisLabel.color,background:e.xAxisLabel.background}),p=k),r=k,k<=b||k>=d||!t||("dashed"==e.backgroundGrid.type?h.drawDashes(f,k,a,k,g+o,e.backgroundGrid.color,1):"solid"==e.backgroundGrid.type&&h.drawline(f,k,a,k,g+o,e.backgroundGrid.color));w-e.xLabelsInterval!=
s-1&&(k=r+Math.round(Math.abs(s-1-(w-e.xLabelsInterval))*n),k-p>f.measureText(c[l][s-1]).width&&(h.drawText(f,c[l][s-1],k,a,{align:"center",textBaseline:"top",color:e.xAxisLabel.color,background:e.xAxisLabel.background}),p=k),r=k,k<=b||k>=d||!t||("dashed"==e.backgroundGrid.type?h.drawDashes(f,k,a,k,g+o,e.backgroundGrid.color,1):"solid"==e.backgroundGrid.type&&h.drawline(f,k,a,k,g+o,e.backgroundGrid.color)))}},setData:function(f){this.data=this.fn(f,this.args)},render:function(){this.inherited(arguments);
this.renderTxt(this.end-1)},renderTxt:function(f){var b=this.options,d=this.ctx,g=this.xStart,a=this.yStart,e=this.txt,m=this.args,c=this.data,l=b.fixedNum,n=b.macdStyle,i={diff:0,dea:1},o;if(c&&c.length>f&&0<=f){h.clearCanvas(d,g+1,a+1,this.width-2,b.topSpacing-2,b.background);e=this.mainLabels+" "+e+"("+m[0]+","+m[1]+","+m[2]+")";h.drawText(d,e,g,a+b.topSpacing-1,{align:"start",textBaseline:"bottom",color:b.label,background:b.background});for(var k in i)o=i[k],m=d.measureText(e).width,o=" "+k+":"+
c[f][o].toFixed(l),o=o.toUpperCase(),e+=o,h.drawText(d,o,g+m,a+b.topSpacing-1,{align:"start",textBaseline:"bottom",color:n[k].color,background:b.background})}}})})},"dojox/customfig/indicators/Ma":function(){define("dojox/customfig/indicators/Ma",["dojo/_base/declare","./Default","../utils","dojo/_base/lang"],function(v,u,h){return v("dojox.customfig.indicators.Ma",[u],{type:"ma",txt:"\u5747\u7ebf",args:[],fn:function(f,b,d,g){var a=[],e=0,h=0,c=[],l=[];if(g&&g.length)for(h=0;h<g.length;h++){l=[];
period=parseInt(g[h]);for(var n=b+1<period?0:b-period+1,i=f.slice(n,d),o=0;o<i.length;o++)if(o<period-1)0===n&&(l[o]=void 0);else{var c=i.slice(o+1-period,o+1),e=0,k;for(k in c)e+=1*c[k];l[0===n?o-b:o+1-period]=e/period}a.push(l)}else{i=f.slice(b,d);o=0;for(f=i.length;o<f;o++)e+=1*i[o],h++,l.push(e/h);a=[l]}return a},defaultOptions:{fixedNum:2},constructor:function(){},coreRange:function(){var f=this.plot.main,b=this.options,d=b.mainIndicatorType;if(f&&d)this.cwidth=f.cwidth,this.csize=f.csize,this.begin=
f.begin,this.candles=f.candles,this.ymin=f.ymin,this.ymax=f.ymax,this.yAxisRange=f.yAxisRange,this.yAxisScale=f.yAxisScale,this.baseValue=f.baseValue?f.baseValue:[];else{var g,a,e;this.baseValue=[];this.xLabels&&this.xLabels.length?e=this.getLabelsLength():e=this.width;this.plot.csizeRate?(this.cwidth=(this.width-b.prepareDistance)/e,this.csize=Math.round(this.cwidth/this.plot.csizeRate)):(this.cwidth=(this.width-b.prepareDistance)/(e-1),this.csize=0);this.data&&(a=this.d_[0],g=this.d_[1]);this.ymin=
a;this.ymax=g;this.yAxisRange=this.ymax-this.ymin;this.yAxisScale=this.height/this.yAxisRange}},drawMain:function(){var f=this.ctx,b=this.plot,d=this.options,g=this.ymin,a=this.data,e=this.xStart,m=this.yStart+this.height/2,c=this.yStart+this.height,l=this.yAxisScale,n=this.baseValue[0],i=this.cwidth,o=this.csize,k,r=[];b.main&&(c-=b.main.options.bottomSpacing);if(a)for(var p=0,t=a.length;p<t;p++)for(var r=[],q=0,s=a[p].length;q<s;q++)b=e+Math.round(d.prepareDistance+q*i+o/2),n?(k=Math.round((a[p][q]-
n)/n*l),h.drawline(f,r[0],r[1],b,m-k,d.ma[p],1),r=[b,m-k]):(k=Math.round((a[p][q]-g)*l),h.drawline(f,r[0],r[1],b,c-k,d.ma[p],1),r=[b,c-k])},yAxis:function(){var f=this.ctx,b=this.xStart,d=b+this.width,g=this.yStart,a=this.height,e=g+a,m=this.options,c=this.yAxisScale,l=this.ymin,n=this.yLabels,i,o=m.fixedNum;if(!n||!n.length)for(var a=h.ygrid(l,this.ymax,Math.floor(a/m.backgroundGrid.height)),k=0,r=a.length;k<r;k++)n=a[k],i=e-(a[k]-l)*c,h.drawText(f,n.toFixed(o),b,i,{align:"right",textBaseline:"middle",
padding:-5,color:m.yAxisLabel.color,background:m.yAxisLabel.background,font:m.font}),i===g||i===e||("dashed"==m.backgroundGrid.type?h.drawDashes(f,b,i,d,i,m.backgroundGrid.color,1):h.drawline(f,b,i,d,i,m.backgroundGrid.color))},xAxis:function(){var f=this.ctx,b=this.xStart,d=b+this.width,g=this.yStart,a=g+this.height,e=this.options,m=e.prepareDistance,c=this.xLabels,l=this.cwidth,n=this.csize,i,o=0,k=0;if(c&&c.length)for(var r=0,p=c.length;r<p;r++){for(var t=c[r].length,q=r?e.xLabelsInterval-1:0;q<
t;q+=e.xLabelsInterval)0==q&&0==r?i=b+m+q*l+n/2:i=o+e.xLabelsInterval*l,i-k>f.measureText(c[r][q]).width&&(h.drawText(f,c[r][q],i,a,{align:"center",textBaseline:"top",color:e.xAxisLabel.color,background:e.xAxisLabel.background,font:e.font}),k=i),o=i,i<=b||i>=d||("dashed"==e.backgroundGrid.type?h.drawDashes(f,i,a,i,g,e.backgroundGrid.color,1):"solid"==e.backgroundGrid.type&&h.drawline(f,i,a,i,g,e.backgroundGrid.color));q-e.xLabelsInterval!=t-1&&(i=o+Math.round(Math.abs(t-1-(q-e.xLabelsInterval))*l),
i-k>f.measureText(c[r][t-1]).width&&(h.drawText(f,c[r][t-1],i,a,{align:"center",textBaseline:"top",color:e.xAxisLabel.color,background:e.xAxisLabel.background,font:e.font}),k=i),o=i,i<=b||i>=d||("dashed"==e.backgroundGrid.type?h.drawDashes(f,i,a,i,g,e.backgroundGrid.color,1):"solid"==e.backgroundGrid.type&&h.drawline(f,i,a,i,g,e.backgroundGrid.color)))}},render:function(){var f=this.options.mainIndicatorType;this.plot.main&&f?(this.coreRange(),this.drawMain()):this.inherited(arguments);this.renderTxt()},
setData:function(f){var b=this.fn,d=this.args,g=this.start?this.start:0,a=this.end?this.end:f.length;if((this.allDataItem=f)&&f.length)this.data=b(f,g,a,d);this.begin=0;this.candles=this.data.length;this.d_=h.minmax2d(this.data.slice(this.begin,this.candles));this.options.mainIndicatorType&&(this.plot.main.maMaxAndMin=this.d_)},renderTxt:function(f){var b=this.options,d=this.ctx,g=this.xStart,a=this.yStart,e=this.plot,m=e.main,c=this.txt,l=this.args,n=this.data,i=b.fixedNum;f||(f=0);f&&(f-=this.start);
if(n&&n.length){0==f&&(f=n[0].length-1);e=d.measureText(e.mainLabels).width;h.clearCanvas(d,g+e,a-m.offsets.t+1,this.width-2,m.offsets.t-2,b.background);c=c+"MA("+l.join(",")+")";h.drawText(d,c,g+e,a+b.topSpacing-1,{align:"start",textBaseline:"bottom",color:b.label,background:b.background});for(var o in l)offsetMLabel=e+d.measureText(c).width,m=" MA"+o+":"+(n[o][f]?n[o][f].toFixed(i):" "),c+=m,h.drawText(d,m,g+offsetMLabel,a+b.topSpacing-1,{align:"start",textBaseline:"bottom",color:b.ma[o],background:b.background})}}})})},
"dojox/customfig/indicators/Kdj":function(){define("dojox/customfig/indicators/Kdj",["dojo/_base/declare","./Default","../utils","dojo/_base/lang"],function(v,u,h){return v("dojox.customfig.indicators.Kdj",[u],{type:"kdj",txt:"KDJ",args:[9,3,3],fn:function(f,b){var d=[];if(f&&f.length){for(var d=b[0],g,a,e,h=[],c=[],l=[],n=f[0],i=f[1],o=f[2],k=0;k<n.length;k++)a=k-d+1,0>a&&(a=0),g=Math.min.apply(null,n.slice(a,k+1)),a=Math.max.apply(null,i.slice(a,k+1)),e=o[k],e=100*((e-g)/(a-g)),a="undefined"==typeof h[k-
1]?50:h[k-1],g="undefined"==typeof c[k-1]?50:c[k-1],a=2/3*a+1/3*e,g=2/3*g+1/3*a,e=3*a-2*g,h[k]=a,c[k]=g,l[k]=[a,g,e];return l}},defaultOptions:{fixedNum:2},constructor:function(){},coreRange:function(){var f=this.options,b=f.topSpacing,d;this.baseValue=[];this.xLabels&&this.xLabels.length?d=this.getLabelsLength():d=this.width;this.plot.csizeRate?(this.cwidth=(this.width-f.prepareDistance)/d,this.csize=Math.round(this.cwidth/this.plot.csizeRate)):(this.cwidth=(this.width-f.prepareDistance)/(d-1),this.csize=
0);this.data&&this.data.length?(this.plot.main&&/kline/.test(this.plot.main.type)?(this.start=this.start?this.start:0,this.end=this.end?this.end:this.data.length):(this.start=0,this.end=this.data.length),d=h.minmax2d(this.data.slice(this.start,this.end)),f=d[0],d=d[1]):(d=1,f=0);this.ymax=d;this.ymin=f;this.yAxisRange=this.ymax-this.ymin;this.yAxisScale=(this.height-b)/this.yAxisRange},drawMain:function(){var f=this.ctx,b=this.options,d=this.ymin,g=this.data,a=this.xStart,e=this.yStart+this.height/
2,m=this.yStart+this.height,c=this.yAxisScale,l=this.baseValue[0],n=this.cwidth,i=this.csize,o={k:0,d:1,j:2},k=this.start,r=this.end,p,t,q,s;if(g)for(var w in o){q=o[w];s=[];for(var x=0;x+k<r;x++)p=a+Math.round(b.prepareDistance+x*n+i/2),t=x+k,l?(t=Math.round((g[t][q]-l)/l*c),h.drawline(f,s[0],s[1],p,e-t,b.kdj[q],1),s=[p,e-t]):(t=Math.round((g[t][q]-d)*c),h.drawline(f,s[0],s[1],p,m-t,b.kdj[q],1),s=[p,m-t])}},yAxis:function(){var f=this.ctx,b=this.xStart,d=b+this.width,g=this.yStart,a=this.height,
e=g+a,m=this.options,c=this.yAxisScale,l=this.ymin,n=this.yLabels,i,o=m.fixedNum;if(!n||!n.length)for(var a=h.ygrid(l,this.ymax,Math.floor(a/m.backgroundGrid.height)),k=0,r=a.length;k<r;k++)n=a[k],i=e-(a[k]-l)*c,h.drawText(f,n.toFixed(o),b,i,{align:"right",textBaseline:"middle",padding:-5,color:m.yAxisLabel.color,background:m.yAxisLabel.background,font:m.font}),i===g||i===e||("dashed"==m.backgroundGrid.type?h.drawDashes(f,b,i,d,i,m.backgroundGrid.color,1):h.drawline(f,b,i,d,i,m.backgroundGrid.color))},
xAxis:function(){var f=this.ctx,b=this.xStart,d=b+this.width,g=this.yStart,a=g+this.height,e=this.options,m=e.prepareDistance,c=this.xLabels,l=this.plot,n=this.cwidth,i=this.csize,o=e.topSpacing,k,r=0,p=0,t=!0;l.main&&/kline/.test(l.main.type)&&(t=!1);l.main&&(e.xLabelsInterval=l.main.options.xLabelsInterval);if(c&&c.length)for(var l=0,q=c.length;l<q;l++){for(var s=c[l].length,w=l?e.xLabelsInterval-1:0;w<s;w+=e.xLabelsInterval)0==w&&0==l?k=b+m+w*n+i/2:k=r+e.xLabelsInterval*n,k-p>f.measureText(c[l][w]).width&&
(h.drawText(f,c[l][w],k,a,{align:"center",textBaseline:"top",color:e.xAxisLabel.color,background:e.xAxisLabel.background}),p=k),r=k,k<=b||k>=d||!t||("dashed"==e.backgroundGrid.type?h.drawDashes(f,k,a,k,g+o,e.backgroundGrid.color,1):"solid"==e.backgroundGrid.type&&h.drawline(f,k,a,k,g+o,e.backgroundGrid.color));w-e.xLabelsInterval!=s-1&&(k=r+Math.round(Math.abs(s-1-(w-e.xLabelsInterval))*n),k-p>f.measureText(c[l][s-1]).width&&(h.drawText(f,c[l][s-1],k,a,{align:"center",textBaseline:"top",color:e.xAxisLabel.color,
background:e.xAxisLabel.background}),p=k),r=k,k<=b||k>=d||!t||("dashed"==e.backgroundGrid.type?h.drawDashes(f,k,a,k,g+o,e.backgroundGrid.color,1):"solid"==e.backgroundGrid.type&&h.drawline(f,k,a,k,g+o,e.backgroundGrid.color)))}},render:function(){this.inherited(arguments);this.renderTxt(this.end-1)},setData:function(f){var b=this.fn,d=this.args;if(f&&f.length)this.data=b(f,d)},renderTxt:function(f){var b=this.options,d=this.ctx,g=this.xStart,a=this.yStart,e=this.txt,m=this.args,c=this.data,l=b.fixedNum,
n={K:0,D:1,J:2},i,o;if(c&&c.length>f&&0<=f){h.clearCanvas(d,g+1,a+1,this.width-2,b.topSpacing-2,b.background);e=this.mainLabels+" "+e+"("+m[0]+","+m[1]+","+m[2]+")";h.drawText(d,e,g,a+b.topSpacing-1,{align:"start",textBaseline:"bottom",color:b.label,background:b.background});for(var k in n)o=n[k],m=d.measureText(e).width,i=" "+k+":"+c[f][o].toFixed(l),e+=i,h.drawText(d,i,g+m,a+b.topSpacing-1,{align:"start",textBaseline:"bottom",color:b.kdj[o],background:b.background})}}})})},"dojox/customfig/actions/Crosshair":function(){define("dojox/customfig/actions/Crosshair",
"dojo/_base/declare,dijit/_WidgetBase,dijit/_TemplatedMixin,dojo/_base/lang,dojo/_base/connect,dojox/customfig/utils,dojo/dom-style,dojo/dom-construct,dojo/dom-geometry,dojo/dom,dojo/cssScale".split(","),function(v,u,h,f,b,d,g,a,e,m,c){var l=function(a,b,c,e){var d;if(a[c])return(d=a[c][b])?d=e?a[c][b-1]?a[c][b-1]:0:d:(b=e?a[c].length-2:a[c].length-1,d=a[c][b]),d},n=function(a){for(var b=0,c=0,d=a.length;c<d;c++)b+=+a[c];return b},i=function(a,b,c,d){var e=0,d=d||0;b++;a[c]&&(e=b>a[c].length?n(a[c].slice(d))/
a[c].slice(d).length:n(a[c].slice(d,b))/(b-d));return e},o=function(a){return{"\u65f6\u95f4":{field:"time",fn:function(a,b,c){return(a=l(a,b,c))?d.millisecond2Date("%Y-%m-%d %H:%M %a",a):"--"}},"\u4ef7\u683c":{field:"price",fn:function(b,c,d){return(b=l(b,c,d))?(+b).toFixed(a):"--"}},"\u5747\u4ef7":{field:"price",fn:function(b,c,d,e){return i(b,c,d,e).toFixed(a)}},"\u6da8\u8dcc":{field:"price",fn:function(b,c,d){c=l(b,c,d);b=l(b,0,"lastclose");return c&&b?(c-b).toFixed(a):0}},"\u6210\u4ea4\u91cf":{field:"volume",
fn:function(a,b,c){var d=l(a,b,c),a=l(a,b,c,!0);return d&&a?d-a:0}}}},k=function(a){return{"\u65f6\u95f4":{field:"time",fn:function(a,b,c){return(a=l(a,b,c))?a:"--"}},"\u5f00\u76d8\u4ef7":{field:"open",fn:function(b,c,d){return(b=l(b,c,d))?(+b).toFixed(a):"--"}},"\u6700\u9ad8\u4ef7":{field:"high",fn:function(b,c,d){return(b=l(b,c,d))?(+b).toFixed(a):"--"}},"\u6700\u4f4e\u4ef7":{field:"low",fn:function(b,c,d){return(b=l(b,c,d))?(+b).toFixed(a):"--"}},"\u6536\u76d8\u4ef7":{field:"close",fn:function(b,
c,d){return(b=l(b,c,d))?(+b).toFixed(a):"--"}},"\u5747\u4ef7":{field:"close",fn:function(b,c,d,e){return i(b,c,d,e).toFixed(a)}},"\u6da8\u8dcc":{field:"close",fn:function(b,c,d){d=l(b,c,d);b=l(b,c,"open");return d&&b?(d-b).toFixed(a):0}},"\u6210\u4ea4\u91cf":{field:"volume",fn:function(a,b,c){return(a=l(a,b,c))?(+a).toFixed(0):"--"}},"\u6210\u4ea4\u989d":{field:"amount",fn:function(a,b,c){return(a=l(a,b,c))?(+a).toFixed(0):"--"}}}},r={time:"\u65f6\u95f4",open:"\u5f00\u76d8\u4ef7",high:"\u6700\u9ad8\u4ef7",
low:"\u6700\u4f4e\u4ef7",close:"\u6536\u76d8\u4ef7",average:"\u5747\u4ef7",updown:"\u6da8\u8dcc",volume:"\u6210\u4ea4\u91cf",amount:"\u6210\u4ea4\u989d",price:"\u4ef7\u683c"},p=v(null,{tipKeyValue:null,tooltipTemplateString:"<span>{1}</span>:<span>{2}</span><br>",defaultOptions:{fixNum:3},constructor:function(a,b,c){this.mLabel=a;this.plot=b;a=f.mixin(this.defaultOptions,c?c.options:{});this.tipKeyValue=this.plot.csizeRate?k(a.fixNum):o(a.fixNum);if(c.keys){for(var a=this.tipKeyValue,c=c.keys,d=0,
e=c.length,g={};d<e;d++)b=c[d],(b=r[b])&&(g[b]=a[b]);this.tipKeyValue=g}},isShow:!1,behave:function(a){var b=this.plot,d=b.kwArgs.margins,f=b.offsets,h=d.t+f.t,d=d.l+f.l,k=b.plotHeight-f.t-f.b,f=b.plotWidth-f.l-f.r,l=b.main,i=b.mainIndicators,n=b.indicators,o,p,r,t;o=e.position(m.byId(b.domNode),!1);b=Math.round(a.pageX-o.x);a=Math.round(a.pageY-o.y);if(a>=h&&a<=h+k&&b>=d&&b<=d+f){if(this.toggle()){g.set(this.mLabel,{top:c.scale(h,"y")+"px"});if(l&&(h=l.yStart,k=h+l.height,a>=h&&a<=k&&(this.setToolTip(l,
b),h=e.getMarginBox(this.mLabel,!1),this.setTooltipPos(b,d,f,h.w),i)))for(var u in i)if(o=i[u],h=o.yStart,xStart=o.xStart,k=h+o.height,r=o.options.prepareDistance,p=o.csize,t=o.cwidth,p=Math.ceil((b-xStart-r-p)/t),a>=h&&a<=k){this.setToolTip(o,b);h=e.getMarginBox(this.mLabel,!1);this.setTooltipPos(b,d,f,h.w);p=o.getStart()?o.getStart()+p:p;o.renderTxt&&o.renderTxt(p);return}if(!l&&i)for(u in i)if(l=i[u],h=l.yStart,k=h+l.height,a>=h&&a<=k){this.setToolTip(l,b);h=e.getMarginBox(this.mLabel,!1);this.setTooltipPos(b,
d,f,h.w);return}if(n)for(u in n)if(l=n[u],h=l.yStart,xStart=l.xStart,k=h+l.height,r=l.options.prepareDistance,p=l.csize,t=l.cwidth,p=Math.ceil((b-xStart-r-p)/t),a>=h&&a<=k){this.setToolTip(l,b);h=e.getMarginBox(this.mLabel,!1);this.setTooltipPos(b,d,f,h.w);p=l.getStart()?l.getStart()+p:p;l.renderTxt&&l.renderTxt(p);break}}}else g.set(this.mLabel,{display:"none"})},setToolTip:function(a,b){var c=a.xStart,e=a.cwidth,f=a.csize;d.array2toarray1(a.xLabels);var g=this.plot,h=g.getData(),k=a.options.prepareDistance,
l=this.tooltipTemplateString,c=g.main.csizeRate?Math.ceil((b-c-k-f)/e)+g.main.getStart():Math.ceil((b-c-k-f)/e),e=[],k=this.plot.theme.crosshair.tooltip,i;for(i in this.tipKeyValue){a=this.tipKeyValue[i];f=l.replace(/\{1\}/g,i);if(/\u5747\u4ef7/g.test(i))var m=g.main.getStart?g.main.getStart():0,f=f.replace(/\{2\}/g,a.fn(h,c,a.field,m));else f=f.replace(/\{2\}/g,a.fn(h,c,a.field)),/\u65f6\u95f4/g.test(i)&&(f='<span style="color:'+k.time.color+";font-weight:"+k.time["font-weight"]+'">'+f+"</span>");
e.push(f)}this.mLabel.innerHTML=e.join("")},setTooltipPos:function(a,b,d,e){a<=b+d/2?g.set(this.mLabel,{left:c.scale(b+d-e,"x")+"px"}):g.set(this.mLabel,{left:c.scale(b,"x")+"px"});g.set(this.mLabel,{right:"auto"})},toggle:function(){g.set(this.mLabel,{"-webkit-transform-origin":"left top","-webkit-transform":"scale("+1/c.getScaleX()+","+1/c.getScaleY()+")"});if(this.isShow)return g.set(this.mLabel,{display:""}),!0;g.set(this.mLabel,{display:"none"});return!1}}),t=v(null,{constructor:function(a,b,
c,d,e){this.vLine=a;this.hLine=b;this.vLabel=c;this.hLabel=d;this.plot=e},isShow:!1,toggle:function(){g.set(this.hLabel,{display:""});g.set(this.vLabel,{display:""});g.set(this.hLabel,{"-webkit-transform-origin":"left top","-webkit-transform":"scale("+1/c.getScaleX()+","+1/c.getScaleY()+")"});g.set(this.vLabel,{"-webkit-transform-origin":"left top","-webkit-transform":"scale("+1/c.getScaleX()+","+1/c.getScaleY()+")"});g.set(this.hLine,{"-webkit-transform-origin":"left top","-webkit-transform":"scale("+
1/c.getScaleX()+","+1/c.getScaleY()+")"});g.set(this.vLine,{"-webkit-transform-origin":"left top","-webkit-transform":"scale("+1/c.getScaleX()+","+1/c.getScaleY()+")"});if(this.isShow)return g.set(this.hLine,{display:""}),g.set(this.vLine,{display:""}),!0;g.set(this.hLine,{display:"none"});g.set(this.vLine,{display:"none"});return!1},behave:function(a){var b=this.plot,d=b.kwArgs.margins,f=b.offsets,h=d.t+f.t,d=d.l+f.l,k=b.plotHeight-f.t-f.b,l=b.plotWidth-f.l-f.r,i=b.main,f=b.mainIndicators,o=b.indicators,
n,p;n=e.position(m.byId(b.domNode),!0);b=Math.round(a.pageX-n.x);a=Math.round(a.pageY-n.y);if(a>=h&&a<=h+k&&b>=d&&b<=d+l){this.toggle()&&(g.set(this.hLine,{width:l+"px",left:c.scale(d,"x")+"px",top:c.scale(a,"y")+"px"}),g.set(this.vLine,{height:k+"px",top:c.scale(h,"y")+"px",left:c.scale(b,"x")+"px"}));if(i&&(n=i.yStart,l=n+i.height,p=i.yAxisScale,a>=n&&a<=l))i.baseValue?(p=i.baseValue[0],n=p*i.ymin,p*=i.ymax,p=i.height/(p-n)):n=i.ymin,this.setXLabel(i,b),this.setYLabel(n,l,p,a,i.options.bottomSpacing||
0,i.options.fixedNum);if(!i&&f)for(var r in f)i=f[r],n=i.yStart,l=n+i.height,a>=n&&a<=l&&(this.setXLabel(i,b),this.setYLabel(i.ymin,l,i.yAxisScale,a,i.options.bottomSpacing||0,i.options.fixedNum));if(o)for(r in o)i=o[r],n=i.yStart,l=n+i.height,a>=n&&a<=l&&(this.setXLabel(i,b),this.setYLabel(i.ymin,l,i.yAxisScale,a,i.options.bottomSpacing||0,i.options.fixedNum));r=e.position(this.hLabel);f=e.position(this.vLabel);g.set(this.hLabel,{top:c.scale(h+k+2,"y")+"px",left:c.scale(b-r.w/2,"x")+"px"});g.set(this.vLabel,
{left:"-3px",top:c.scale(a-f.h/2,"y")+"px",width:d+"px"})}else g.set(this.hLine,{display:"none"}),g.set(this.vLine,{display:"none"}),g.set(this.hLabel,{display:"none"}),g.set(this.vLabel,{display:"none"})},setXLabel:function(a,b){var c=a.xStart,e=a.cwidth,f=a.csize,g=d.array2toarray1(a.xLabels);prepareDistance=a.options.prepareDistance;xline=Math.ceil((b-c-prepareDistance-f)/e);c=g[xline]||g[xline-1];"undefined"==typeof c&&(c="--/--");this.hLabel.children[0].innerHTML=c},setYLabel:function(a,b,c,
d,e,f){this.vLabel.children[0].innerHTML=((b-d-e)/c+a).toFixed(f)}});return v("dojox.customfig.actions.Crosshair",[u,h],{templateString:"<div><div data-dojo-attach-point='mLabel' style='display:none;'></div><div data-dojo-attach-point='vLabel' style='display:none;'><strong data-dojo-attach-point='vLabelVal'></strong><div style ='width: 5px; height: 5px; border-top: #587eb5 2px solid; border-left: #587eb5 2px solid; position: absolute;  top: 5px; right: -4px; -webkit-transform: rotate(145deg) skew(1deg, 1deg);border-radius: 2px;'></div></div><div data-dojo-attach-point='hLabel' style='display:none;'><strong data-dojo-attach-point='hLabelVal'></strong><div style ='width: 5px; height: 5px; border-top: #587eb5 2px solid; border-left: #587eb5 2px solid; position: absolute; top: -5px; left: 45%; -webkit-transform: rotate(45deg) skew(0deg, 0deg);border-radius: 2px;'></div></div><div data-dojo-attach-point='vLine' style='display:none;'></div><div data-dojo-attach-point='hLine' style='display:none;'></div>",
plot:null,lineLabel:null,toolTip:null,constructor:function(a){this.kwArgs=a;this.plot=a.plot;this.tipKey=a.tipKey||{}},postCreate:function(){var c=this.kwArgs,d=this.plot.theme,c=this.style={tooltip:c.style?f.mixin({},d.crosshair.tooltip,c.style.tooltip):d.crosshair.tooltip,hLine:c.style?f.mixin({},d.crosshair.hLine,c.style.hLine):d.crosshair.hLine,vLine:c.style?f.mixin({},d.crosshair.vLine,c.style.vLine):d.crosshair.vLine,hLabel:c.style?f.mixin({},d.crosshair.hLabel,c.style.hLabel):d.crosshair.hLabel,
vLabel:c.style?f.mixin({},d.crosshair.vLabel,c.style.vLabel):d.crosshair.vLabel};g.set(this.mLabel,c.tooltip.content);g.set(this.hLabel,c.hLabel);g.set(this.vLabel,c.vLabel);g.set(this.hLine,c.hLine);g.set(this.vLine,c.vLine);this.lineLabel=new t(this.vLine,this.hLine,this.vLabel,this.hLabel,this.plot);this.toolTip=new p(this.mLabel,this.plot,this.tipKey);a.place(this.domNode,this.plot.domNode,"first");b.connect(this.plot.domNode,"click",this,this.click);b.connect(this.plot.domNode,"mousemove",this,
this.mouseMove)},click:function(a){var b=this.plot,c=b.kwArgs.margins,d=b.offsets,f=c.t+d.t,c=c.l+d.l,g=b.plotHeight-d.t-d.b,d=b.plotWidth-d.l-d.r,h;h=e.position(m.byId(b.domNode),!1);b=Math.round(a.pageX-h.x);a=Math.round(a.pageY-h.y);if(a>=f&&a<=f+g&&b>=c&&b<=c+d)this.toolTip.isShow=!this.toolTip.isShow,this.lineLabel.isShow=!this.lineLabel.isShow},mouseMove:function(a){this.toolTip.behave(a);this.lineLabel.behave(a)}})})},"dojox/customfig/themes/blackTheme":function(){define("dojox/customfig/themes/blackTheme",
["dojo/_base/declare"],function(v){return v("dojox.customfig.themes.Theme",null,{com_de_opt:{label:"#5F5E5E",font:"9pt Arial bold",stroke:"#686868",background:"#000000",backgroundGrid:{type:"dashed",color:"#CFCFCF",height:25},xAxisLabel:{color:"#606060",background:"#FFFFFF"},yAxisLabel:{color:"#606060",background:"#FFFFFF"},xLabelsInterval:30,fixedNum:0,prepareDistance:0},sharingPlans:{timetrendFilledColors:["#131313","#0073ff"],timetrendFillAlpha:0.7,timetrend:["#F59F56","red","yellow"],baseValueStyle:{color:"#FF0000",
background:"#FFFFFF"},yUpLabel:{color:"#E60000",background:"#FFFFFF"},yDownLabel:{color:"#1FA42C",background:"#FFFFFF"}},kline:{candleStyle:[{upStyle:{candle:{type:"stroke",color:"#CC4642"}},downStyle:{candle:{type:"fill",color:"#55710B"}}},{upStyle:{candle:{type:"stroke",color:"#5F9EA0"}},downStyle:{candle:{type:"fill",color:"#5F9EA0"}}},{upStyle:{candle:{type:"stroke",color:"#C67413"}},downStyle:{candle:{type:"fill",color:"#C67413"}}},{upStyle:{candle:{type:"stroke",color:"#C67488"}},downStyle:{candle:{type:"fill",
color:"#C67488"}}},{upStyle:{candle:{type:"stroke",color:"#C93413"}},downStyle:{candle:{type:"fill",color:"#C93413"}}}],maximumArrow:{color:"red"},minimumArrow:{color:"blue"},yAxisUpLabel:{color:"#6f6060"},yAxisLowLabel:{color:"#30f060"}},ma:{ma:["green","red","blue"]},kdj:{kdj:["green","red","blue"]},vol:{volumnStyle:{upColor:"#ff0000",downColor:"#55710B",color:"yellow"}},macd:{macdStyle:{diff:{color:"#9B9B9B"},dea:{color:"#BC6111"},macd:{upcolor:"#ff0000",downcolor:"#00ff00"}}},crosshair:{tooltip:{content:{background:"#3d70ae",
width:"auto",height:"auto",border:"#3C72AE solid 1px","text-shadow":"1px 1px #244f84","text-align":"center",position:"absolute",opacity:0.85,"z-index":2,"line-height":1.6,padding:"4px","border-radius":"9px","font-size":"12px",color:"#FFFFFF"},time:{"font-weight":"normal",color:"#ffc13b"}},vLine:{width:"1px",background:"#3C72AE",position:"absolute","z-index":2},hLine:{height:"1px",background:"#3C72AE",position:"absolute","z-index":2},vLabel:{border:"1px solid #3C72AE",color:"#3C72AE","text-align":"center",
"z-index":2,position:"absolute"},hLabel:{border:"1px solid #3C72AE",color:"#3C72AE","text-align":"center","z-index":2,position:"absolute",width:"auto"}}})})}}});
define("indexPage/newPage365/src","dojo/parser,dijit/registry,dojo/on,dojo/dom-class,indexPage/newPage365/view/util/help,dojo/dom-geometry,dojox/slickgrid/quoteblock,dojox/slickgrid/quoteblock,dojox/slickgrid/formatters,dojox/store/GridWSStore,dojo/_base/lang,dojox/customfig/widget/MinSharingPlans,dojox/customfig/actions/Crosshair,dojox/customfig/themes/blackTheme,dojo/dom,dojo/aspect,dojo/dom-style,dijit/form/ComboBox".split(","),function(v,u,h,f,b,d,g,a,e,m,c,l,n,i,o,k,r,p){function t(){u.byId("priStockManager").on("change",
function(a){if("\u81ea\u9009\u80a1\u7ba1\u7406"==a)window.location="DZH://CMD?\u81ea\u9009\u80a1\u8bbe\u7f6e";else{var b=u.byId("Tzxg_grid");b.queryLimit.block=a;b.renderQuery()}});h(document.body,"click",function(a){var b=dojo.query(a.target).closest(".slick-row")[0];if(b){var a=dojo.query(a.target).closest(".slickgrid")[0].id,c=b.getAttribute("row");f.contains(a,"rmztController")?(b=dijit.byId(a).getDataItem(c).object,a=u.byId("topicContainer"),a.store.setData(b),a.refresh(b)):(c=u.byId(a).getDataItem(c),
b=c.obj,a=c.name||c.stockName||c.stockname,c=u.byId("Cszzs"),c.changeCodes([{name:b,type:"lastclose"}]),c.render(),o.byId("minSharingPlans-title").innerHTML=a)}});h(document.body,"dblclick",function(a){var b=dojo.query(a.target).closest(".slick-row")[0];if(b)a=dojo.query(a.target).closest(".slickgrid")[0].id,b=b.getAttribute("row"),b=u.byId(a).getDataItem(b).obj,window.location="DZH://VIEWSTOCK?DATATYPE=DAY&LAYOUT=Level2\u9ed8\u8ba4&PAGE=\u5206\u65f6\u8d70\u52bf&LABEL="+b});h(window,"resize",function(){var a=
u.byId("Cszzs"),b=d.getMarginBox(a.domNode.parentNode);delete b.l;delete b.t;a.resize(b);u.byId("Cszzs").resize();u.byId("Tzxg_grid").resize();u.byId("Tzgz").resize();u.byId("topicContainer").resize();a=d.getMarginBox("part2");r.set("maskDiv","left",a.l+"px");r.set("maskDiv","top",a.t+"px");r.set("maskDiv","width",a.w+"px");r.set("maskDiv","height",a.h+"px")})}return function(){(new a({columns:[{id:"stockName",name:"\u540d\u79f0",field:"stockName",cssClass:"orangeFontColor font-left"},{id:"stk",name:"\u6700\u65b0",
field:"new",formatter:b.arrowQuoteFormatter},{id:"updnratio",name:"\u6da8\u5e45",field:"updnratio",cssClass:"font-right",formatter:b.arrowPercentFormatter}],store:new m({idProperty:"stockCode",formatter:b.formatter}),options:{forceFitColumns:!0,hideBorder:"all"},columnDefaults:{width:50,cssClass:"font-right",headerCssClass:"font-center"},whereField:"stockCode",pushQueryLimit:{service:"objinfo",type:"getinfo",field:"obj,new,amount,updnratio,lastclose",response_times:-1,response_mode:0}},"topicContainer")).startup();
var d=new m({formatter:function(a){a=a[0];a.object=JSON.parse(a.object);return a}}),e=d.on("afterprogress",c.hitch(this,function(a){e.remove();var a=a.data[0].object,b=u.byId("topicContainer");b.store.setData(a);b.refresh(a)}));(new g({"class":"rmztController",store:d,columns:[{id:"topicName",name:"\u4e3b\u9898",field:"topicName",width:120,headerCssClass:"font-center"}],options:{forceFitColumns:!0},style:"border-right:none",queryLimit:{service:"rpc",so:"javadataproxy.jar","function":"gw/UIMain",paraencode:"base64",
parameter:"Z2V0,"+btoa("http://10.15.107.177:9289/stock/Stock/ui_stockLEDIndex/topicCare/getTopicCareHtml"),response_times:1,response_mode:0}},"topicController")).startup();(new a({columns:[{id:"stockname",name:"\u540d\u79f0",field:"name",cssClass:"padLeft8 orangeFontColor"},{id:"stk",name:"\u6700\u65b0",field:"new",formatter:b.arrowQuoteFormatter},{id:"updnratio",name:"\u6da8\u5e45",field:"updnratio",formatter:b.arrowPercentFormatter},{id:"amount",name:"\u5173\u6ce8\u6765\u6e90",field:"bkName",width:70,
cssClass:"orangeFontColor"}],store:new m({idProperty:"code",formatter:b.formatter}),options:{forceFitColumns:!0,autoExpandCol:"stockname",hideBorder:"all",hasCanvasVirtualLine:!1},columnDefaults:{width:60,headerCssClass:"font-center",cssClass:"font-right"},whereField:"code",queryLimit:{service:"rpc",so:"javadataproxy.jar","function":"gw/UIMain",paraencode:"base64",parameter:"Z2V0,"+btoa("http://10.15.107.177:9289/stock/Stock/ui_stockLEDIndex/mostCare/mostCare"),response_times:1,response_mode:0},pushQueryLimit:{service:"objinfo",
type:"getinfo",field:"obj,new,amount,updnratio,lastclose",response_times:-1,response_mode:0}},"Tzgz")).startup();(new a({columns:[{id:"stockname",name:"\u540d\u79f0",field:"stockname",cssClass:"padLeft8 orangeFontColor"},{id:"stk",name:"\u6700\u65b0",field:"new",formatter:b.arrowQuoteFormatter},{id:"updnratio",name:"\u6da8\u5e45",field:"updnratio",formatter:b.arrowPercentFormatter},{id:"amount",name:"\u603b\u989d",field:"amount",width:80,cssClass:"orangeFontColor font-right",formatter:b.yiUnitFmt}],
store:new m({idProperty:"stockid",formatter:b.formatter}),options:{forceFitColumns:!0,autoExpandCol:"stockname",hideBorder:"all",hasCanvasVirtualLine:!1},columnDefaults:{width:80,cssClass:"font-right",headerCssClass:"font-center"},whereField:"stockid",queryLimit:{service:"blockinfo",type:"leaf",source:"local",field:"stockid,stockname",block:"\u81ea\u9009\u80a1",depth:"-1",response_times:1,response_mode:0,cache_timeout:0},pushQueryLimit:{service:"objinfo",type:"getinfo",field:"obj,new,amount,updnratio,lastclose",
response_times:-1,response_mode:0}},"Tzxg_grid")).startup();(new a({columns:[{id:"stockname",name:"\u540d\u79f0",field:"name",cssClass:"padLeft8 orangeFontColor font-left"},{id:"stk",name:"\u6700\u65b0",field:"new",formatter:b.arrowQuoteFormatter},{id:"updnratio",name:"\u6da8\u5e45",field:"updnratio",formatter:b.arrowPercentFormatter},{id:"amount",name:"\u603b\u989d",field:"amount",width:80,cssClass:"orangeFontColor font-right",formatter:b.yiUnitFmt}],store:new m({idProperty:"obj",data:[{obj:"SH000001.index",
name:"\u4e0a\u8bc1\u6307\u6570"},{obj:"SZ399001.index",name:"\u6df1\u8bc1\u6210\u6307"},{obj:"SZ399005.index",name:"\u4e2d\u5c0f\u677f\u6307"},{obj:"SZ399006.index",name:"\u521b\u4e1a\u677f\u6307"},{obj:"SFIF0001.cmdty",name:"\u80a1\u6307\u671f\u8d27"}],formatter:b.formatter}),options:{forceFitColumns:!0,autoExpandCol:"stockname",showHeader:!1,hideBorder:"all"},columnDefaults:{width:80,cssClass:"font-right"},whereField:"obj",pushQueryLimit:{service:"objinfo",type:"getinfo",field:"obj,new,amount,updnratio,lastclose",
response_times:-1,response_mode:0}},"Tzxgc")).startup();d=new l({codes:[{name:"SH000001.index",type:"lastclose"}],plot:{margins:{l:2,t:2,r:4,b:2},offsets:{l:50,t:30,r:60,b:20},noscale:!1,theme:new i},sharingPlans:{options:{timetrendFilled:!0,fixedNum:2,rateNum:0.01,rateNumOffset:0.1,baseValueStyle:{color:"red"},newTxt:!0}},indicators:[{type:"Vol",params:{args:[],options:{topSpacing:20,closed:!0,closedStyle:{w:7,h:7,color:"red"}}}}]},"Cszzs");d.startup();new n({plot:d.plot,style:{}});o.byId("part3").innerHTML=
'<iframe style="width:100%;border:none;" class="spacer1" src="http://talpha.gw.com.cn/newsagency?client=6&amp;dataType=html&amp;NAVBARID=301110103"></iframe>';(new m).query({service:"blockinfo",type:"sub",source:"local",block:"\u81ea\u9009\u80a1",depth:"-1",response_times:1,response_mode:0,cache_timeout:0}).then(function(a){var b=[];if(1<a.length){for(var c=1;c<a.length;c++)b.push({id:a[c].blockname,name:a[c].blockname});dijit.byId("priStockManager").store.setData(b)}});(function(){function a(b){var c=
[];c.push("<div>"+b.bkName+"</div>");c.push("<div>"+b.code+"</div>");c.push("<div>"+b.name+"</div>");return c.join("")}if(b.isLogin()){var c=[],d=function(b){var c=1;b[0]&&(b[0].forEach(function(b,c){o.byId("title"+(c+1)).innerHTML=b.bkName;o.byId("content"+(c+1)).innerHTML=a(b)}),setInterval(function(){b[c++%2].forEach(function(b,c){o.byId("title"+(c+1)).innerHTML=b.name;o.byId("content"+(c+1)).innerHTML=a(b)})},2E3))};(new m).query({service:"rpc",so:"javadataproxy.jar","function":"gw/UIMain",paraencode:"base64",
parameter:"Z2V0,"+btoa("http://10.15.107.177:9289/stock/Stock/ui_stockLEDIndex/mostCare/guessYLike"),response_times:1,response_mode:0}).then(function(a){for(;0<a.length;)c.push(a.splice(0,3));d(c)})}})();new p({readonly:"readonly",value:"\u81ea\u9009\u80a1",style:"width:100px;font-size: 14px;line-height: 14px;"},"priStockManager");t()}});