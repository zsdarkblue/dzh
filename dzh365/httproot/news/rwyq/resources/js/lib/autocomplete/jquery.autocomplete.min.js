! function ( a ) {
	a.fn.extend( {
		autocomplete: function ( b, c ) {
			var d = "string" == typeof b;
			return c = a.extend( {}, a.Autocompleter.defaults, {
				url: d ? b : null,
				data: d ? null : b,
				delay: d ? a.Autocompleter.defaults.delay : 10,
				max: c && !c.scroll ? 10 : 150
			}, c ), c.highlight = c.highlight || function ( a ) {
				return a
			}, c.formatMatch = c.formatMatch || c.formatItem, this.each( function ( ) {
				new a.Autocompleter( this, c )
			} )
		},
		result: function ( a ) {
			return this.bind( "result", a )
		},
		search: function ( a ) {
			return this.trigger( "search", [ a ] )
		},
		flushCache: function ( ) {
			return this.trigger( "flushCache" )
		},
		setOptions: function ( a ) {
			return this.trigger( "setOptions", [ a ] )
		},
		unautocomplete: function ( ) {
			return this.trigger( "unautocomplete" )
		}
	} ), a.Autocompleter = function ( b, c ) {
		function n( ) {
			var f, h, i, j, k, m, d = l.selected( );
			return d ? ( f = d.result, g = f, c.multiple && ( h = p( e.val( ) ), h.length > 1 && ( i = c.multipleSeparator.length, j = a( b )
				.selection( )
				.start, m = 0, a.each( h, function ( a, b ) {
				return m += b.length, m >= j ? ( k = a, !1 ) : ( m += i, void 0 )
			} ), h[ k ] = f, f = h.join( c.multipleSeparator ) ), f += c.multipleSeparator ), e.val( f ), t( ), e.trigger( "result", [ d.data, d.value ] ), !0 ) : !1
		}
		function o( a, b ) {
			if ( j == d.DEL ) return l.hide( ), void 0;
			var f = e.val( );
			( b || f != g ) && ( g = f, f = q( f ), f.length >= c.minChars ? ( e.addClass( c.loadingClass ), c.matchCase || ( f = f.toLowerCase( ) ), v( f, u, t ) ) : ( x( ), l.hide( ) ) )
		}
		function p( b ) {
			return b ? c.multiple ? a.map( b.split( c.multipleSeparator ), function ( c ) {
				return a.trim( b )
					.length ? a.trim( c ) : null
			} ) : [ a.trim( b ) ] : [ "" ]
		}
		function q( d ) {
			var e, f;
			return c.multiple ? ( e = p( d ), 1 == e.length ? e[ 0 ] : ( f = a( b )
				.selection( )
				.start, e = f == d.length ? p( d ) : p( d.replace( d.substring( f ), "" ) ), e[ e.length - 1 ] ) ) : d
		}
		function r( f, h ) {
			c.autoFill && q( e.val( ) )
				.toLowerCase( ) == f.toLowerCase( ) && j != d.BACKSPACE && ( e.val( e.val( ) + h.substring( q( g )
				.length ) ), a( b )
				.selection( g.length, g.length + h.length ) )
		}
		function s( ) {
			clearTimeout( f ), f = setTimeout( t, 200 )
		}
		function t( ) {
			l.visible( ), l.hide( ), clearTimeout( f ), x( ), c.mustMatch && e.search( function ( a ) {
				if ( !a ) if ( c.multiple ) {
						var b = p( e.val( ) )
							.slice( 0, -1 );
						e.val( b.join( c.multipleSeparator ) + ( b.length ? c.multipleSeparator : "" ) )
					} else e.val( "" ), e.trigger( "result", null )
			} )
		}
		function u( a, b ) {
			b && b.length && i ? ( x( ), l.display( b, a ), r( a, b[ 0 ].value ), l.show( ) ) : t( )
		}
		function v( d, e, f ) {
			var g, i, j, k, m;
			c.matchCase || ( d = d.toLowerCase( ) ), g = h.load( d ), g && g.length ? e( d, g ) : "string" == typeof c.url && c.url.length > 0 ? ( i = {
				timestamp: +new Date
			}, a.each( c.extraParams, function ( a, b ) {
				i[ a ] = "function" == typeof b ? b( ) : b
			} ), j = q( d ), c.websocket ? ( a( "#histroy" )
				.remove( ), k = "", k = c.url + j.toUpperCase( ), Socket.send( k, function ( a ) {
				var b, c, i;
				if ( g = a.results, "null" == g ) return !1;
				if ( 0 != g.length ) {
					b = g, c = [ ];
					for ( i in b ) c.push( {
							data: b[ i ][ 1 ],
							value: b[ i ][ 0 ]
						} );
					h.add( d, c ), e( d, c )
				} else l.emptyList( ), f( d )
			} ) ) : ( "function" == typeof c.formatRequesturl && ( j = c.formatRequesturl( j ) ), "getjsonstock" == c.ajaxfun ? a.getJSON( c.url + "?q=" + j, i, function ( b ) {
				if ( 0 == b.responseHeader.status ) {
					var c = b.response.docs,
						g = c.length,
						i = [ ];
					g > 0 ? ( a.each( c, function ( a, b ) {
						var c = -1; - 1 != ( c = b.id.indexOf( "." ) ) && ( b.id = b.id.substring( 0, c ) ), i.push( {
							data: b,
							value: b.id
						} )
					} ), h.add( d, i ), e( d, i ) ) : ( l.emptyList( ), f( d ) )
				}
			} ) : ( m = {
				jsonp: a.ajaxSetup( )
					.jsonp
			}, a.ajaxSetup( {
				jsonp: "json.wrf"
			} ), a.ajax( {
				mode: "abort",
				port: "autocomplete" + b.name,
				dataType: c.dataType,
				url: c.url + "?q=" + j,
				data: a.extend( {
					limit: c.max
				}, i ),
				success: function ( b ) {
					var g, i, j, k;
					"string" != typeof b ? "jsonp" == c.dataType ? ( g = b.response.docs, i = g.length, j = [ ], i > 0 ? ( a.each( g, function ( a, b ) {
						b.id && ( b.id = b.id, j.push( {
							data: b,
							value: b.id
						} ) )
					} ), h.add( d, j ), e( d, j ) ) : ( l.emptyList( ), f( d ) ) ) : ( h.add( d, b ), e( d, b ) ) : ( k = c.parse && c.parse( dataHandle ) || w( dataHandle ), h.add( d, k ), e( d, k ) )
				}
			} ), a.ajaxSetup( m ) ) ) ) : ( l.emptyList( ), f( d ) )
		}
		function w( b ) {
			var f, g, d = [ ],
				e = b.split( "\n" );
			for ( f = 0; f < e.length; f++ ) g = a.trim( e[ f ] ), g && ( g = g.split( "|" ), d[ d.length ] = {
					data: g,
					value: g[ 0 ],
					result: c.formatResult && c.formatResult( g, g[ 0 ] ) || g[ 0 ]
				} );
			return d
		}
		function x( ) {
			e.removeClass( c.loadingClass )
		}
		var f, j, m, d = {
				UP: 38,
				DOWN: 40,
				DEL: 46,
				TAB: 9,
				RETURN: 13,
				ESC: 27,
				COMMA: 188,
				PAGEUP: 33,
				PAGEDOWN: 34,
				BACKSPACE: 8
			}, e = a( b )
				.attr( "autocomplete", "off" )
				.addClass( c.inputClass ),
			g = "",
			h = a.Autocompleter.Cache( c ),
			i = 0,
			k = {
				mouseDownOnSelect: !1
			}, l = a.Autocompleter.Select( c, b, n, k );
		e.bind( "keypress.autocomplete", function ( b ) {
			switch ( i = 1, j = b.keyCode, b.keyCode ) {
			case d.UP:
				b.preventDefault( ), l.visible( ) ? l.prev( ) : o( 0, !0 );
				break;
			case d.DOWN:
				b.preventDefault( ), l.visible( ) ? l.next( ) : o( 0, !0 );
				break;
			case d.PAGEUP:
				b.preventDefault( ), l.visible( ) ? l.pageUp( ) : o( 0, !0 );
				break;
			case d.PAGEDOWN:
				b.preventDefault( ), l.visible( ) ? l.pageDown( ) : o( 0, !0 );
				break;
			case c.multiple && "," == a.trim( c.multipleSeparator ) && d.COMMA:
			case d.TAB:
			case d.RETURN:
				if ( n( ) ) return b.preventDefault( ), m = !0, c.selecttrigger ? l.getselectedli( )
						.find( "div.ac_div" )
						.trigger( "click" ) : null, !1;
				break;
			case d.ESC:
				l.hide( );
				break;
			default:
				clearTimeout( f ), f = setTimeout( o, c.delay )
			}
		} )
			.focus( function ( ) {
			i++
		} )
			.blur( function ( ) {
			i = 0, k.mouseDownOnSelect || s( )
		} )
			.click( function ( ) {
			i++ > 1 && !l.visible( ) && o( 0, !0 )
		} )
			.bind( "search", function ( ) {
			function c( a, c ) {
				var d, f;
				if ( c && c.length ) for ( f = 0; f < c.length; f++ ) if ( c[ f ].result.toLowerCase( ) == a.toLowerCase( ) ) {
							d = c[ f ];
							break
						}
						"function" == typeof b ? b( d ) : e.trigger( "result", d && [ d.data, d.value ] )
			}
			var b = arguments.length > 1 ? arguments[ 1 ] : null;
			a.each( p( e.val( ) ), function ( a, b ) {
				v( b, c, c )
			} )
		} )
			.bind( "flushCache", function ( ) {
			h.flush( )
		} )
			.bind( "setOptions", function ( ) {
			a.extend( c, arguments[ 1 ] ), "data" in arguments[ 1 ] && h.populate( )
		} )
			.bind( "unautocomplete", function ( ) {
			l.unbind( ), e.unbind( ), a( b.form )
				.unbind( ".autocomplete" )
		} )
			.bind( "input", function ( ) {
			o( 0, !0 )
		} )
	}, a.Autocompleter.defaults = {
		inputClass: "ac_input",
		resultsClass: "ac_results",
		loadingClass: "ac_loading",
		minChars: 1,
		delay: 400,
		callformatdelay: null,
		formatRequesturl: null,
		formatRequestype: null,
		formatRequestCode: null,
		ajaxfun: "ajax",
		matchCase: !1,
		matchSubset: !1,
		matchContains: !1,
		cacheLength: 10,
		max: 100,
		mustMatch: !1,
		extraParams: {},
		selectFirst: !0,
		selecttrigger: !0,
		formatItem: function ( a ) {
			return a[ 0 ]
		},
		formatMatch: null,
		autoFill: !1,
		width: 0,
		multiple: !1,
		multipleSeparator: ", ",
		highlight: function ( a, b ) {
			return a.replace( new RegExp( "(?![^&;]+;)(?!<[^<>]*)(" + b.replace( /([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi, "\\$1" ) + ")(?![^<>]*>)(?![^&;]+;)", "gi" ), "<strong>$1</strong>" )
		},
		scroll: !0,
		scrollHeight: 180,
		websocket: !0,
		websocketType: "jg"
	}, a.Autocompleter.Cache = function ( b ) {
		function e( a, c ) {
			b.matchCase || ( a = a.toLowerCase( ) );
			var d = a.indexOf( c );
			return "word" == b.matchContains && ( d = a.toLowerCase( )
				.search( c.toLowerCase( ) ) ), -1 == d ? !1 : 0 == d || b.matchContains
		}
		function f( a, e ) {
			d > b.cacheLength && h( ), c[ a ] || d++, c[ a ] = e
		}
		function g( ) {
			var c, d, e, g, h, i, j, k;
			if ( !b.data ) return !1;
			for ( c = {}, d = 0, b.url || ( b.cacheLength = 1 ), c[ "" ] = [ ], e = 0, g = b.data.length; g > e; e++ ) h = b.data[ e ], h = "string" == typeof h ? [ h ] : h, i = b.formatMatch( h, e + 1, b.data.length ), i !== !1 && ( j = i.charAt( 0 )
					.toLowerCase( ), c[ j ] || ( c[ j ] = [ ] ), k = {
					value: i,
					data: h,
					result: b.formatResult && b.formatResult( h ) || i
				}, c[ j ].push( k ), d++ < b.max && c[ "" ].push( k ) );
			a.each( c, function ( a, c ) {
				b.cacheLength++, f( a, c )
			} )
		}
		function h( ) {
			c = {}, d = 0
		}
		var c = {}, d = 0;
		return setTimeout( g, 25 ), {
			flush: h,
			add: f,
			populate: g,
			load: function ( f ) {
				var g, h, i, j;
				if ( !b.cacheLength || !d ) return null;
				if ( !b.url && b.matchContains ) {
					g = [ ];
					for ( h in c ) h.length > 0 && ( i = c[ h ], a.each( i, function ( a, b ) {
							e( b.value, f ) && g.push( b )
						} ) );
					return g
				}
				if ( c[ f ] ) return c[ f ];
				if ( b.matchSubset ) for ( j = f.length - 1; j >= b.minChars; j-- ) if ( i = c[ f.substr( 0, j ) ] ) return g = [ ], a.each( i, function ( a, b ) {
								e( b.value, f ) && ( g[ g.length ] = b )
							} ), g;
				return null
			}
		}
	}, a.Autocompleter.Select = function ( b, c, d, e ) {
		function o( ) {
			k && ( l = a( "<div/>" )
				.hide( )
				.addClass( b.resultsClass )
				.css( "position", "absolute" )
				.appendTo( document.body ), m = a( "<ul/>" )
				.appendTo( l )
				.mouseover( function ( b ) {
				p( b )
					.nodeName && "LI" == p( b )
					.nodeName.toUpperCase( ) && ( h = a( "li", m )
					.removeClass( f.ACTIVE )
					.index( p( b ) ), a( p( b ) )
					.addClass( f.ACTIVE ) )
			} )
				.click( function ( b ) {
				return a( p( b ) )
					.addClass( f.ACTIVE ), d( ), c.focus( ), !1
			} )
				.mousedown( function ( ) {
				e.mouseDownOnSelect = !0
			} )
				.mouseup( function ( ) {
				e.mouseDownOnSelect = !1
			} ), b.width > 0 && l.css( "width", b.width ), k = !1 )
		}
		function p( a ) {
			for ( var b = a.target; b && "LI" != b.tagName; ) b = b.parentNode;
			return b ? b : [ ]
		}
		function q( ) {}
		function r( a ) {
			var c, d;
			g.slice( h, h + 1 )
				.removeClass( f.ACTIVE ), s( a ), c = g.slice( h, h + 1 )
				.addClass( f.ACTIVE ), b.scroll && ( d = 0, g.slice( 0, h )
				.each( function ( ) {
				d += this.offsetHeight
			} ), d + c[ 0 ].offsetHeight - m.scrollTop( ) > m[ 0 ].clientHeight ? m.scrollTop( d + c[ 0 ].offsetHeight - m.innerHeight( ) ) : d < m.scrollTop( ) && m.scrollTop( d ) )
		}
		function s( a ) {
			h += a, 0 > h ? h = g.size( ) - 1 : h >= g.size( ) && ( h = 0 )
		}
		function t( a ) {
			return b.max && b.max < a ? b.max : a
		}
		function u( ) {
			var c, d, e, k;
			for ( m.empty( ), c = t( i.length ), d = 0; c > d; d++ ) i[ d ] && ( e = b.formatItem( i[ d ].data, d + 1, c, i[ d ].value, j ), e !== !1 && ( k = a( "<li/>" )
					.html( b.highlight( e, j ) )
					.addClass( 0 == d % 2 ? "ac_even" : "ac_odd" )
					.appendTo( m )[ 0 ], a.data( k, "ac_data", i[ d ] ) ) );
			g = m.find( "li" ), b.selectFirst && ( g.slice( 0, 1 )
				.addClass( f.ACTIVE ), h = 0 ), a.fn.bgiframe && m.bgiframe( )
		}
		var g, i, l, m, n, f = {
				ACTIVE: "ac_over"
			}, h = -1,
			j = "",
			k = !0;
		return {
			display: function ( a, c ) {
				o( ), i = a, j = c, b.callformatdelay === !0 ? q( ) : u( )
			},
			next: function ( ) {
				r( 1 )
			},
			prev: function ( ) {
				r( -1 )
			},
			pageUp: function ( ) {
				0 != h && 0 > h - 8 ? r( -h ) : r( -8 )
			},
			pageDown: function ( ) {
				h != g.size( ) - 1 && h + 8 > g.size( ) ? r( g.size( ) - 1 - h ) : r( 8 )
			},
			hide: function ( ) {
				l && l.hide( ), g && g.removeClass( f.ACTIVE ), h = -1
			},
			visible: function ( ) {
				return l && l.is( ":visible" )
			},
			current: function ( ) {
				return this.visible( ) && ( g.filter( "." + f.ACTIVE )[ 0 ] || b.selectFirst && g[ 0 ] )
			},
			show: function ( ) {
				var e, f, d = a( c )
						.offset( );
				l.css( {
					width: "string" == typeof b.width || b.width > 0 ? b.width : a( c )
						.width( ) + 24,
					top: d.top + c.offsetHeight,
					left: d.left - 24
				} )
					.show( ), b.scroll && ( m.scrollTop( 0 ), m.css( {
					maxHeight: b.scrollHeight,
					overflow: "auto"
				} ), "undefined" == typeof document.body.style.maxHeight && ( e = 0, g.each( function ( ) {
					e += this.offsetHeight
				} ), f = e > b.scrollHeight, m.css( "height", f ? b.scrollHeight : e ), f || g.width( m.width( ) - parseInt( g.css( "padding-left" ) ) - parseInt( g.css( "padding-right" ) ) ) ) )
			},
			selected: function ( ) {
				n = g.filter( "." + f.ACTIVE );
				var b = g && n.removeClass( f.ACTIVE );
				return b && b.length && a.data( b[ 0 ], "ac_data" )
			},
			emptyList: function ( ) {
				m && m.empty( )
			},
			unbind: function ( ) {
				l && l.remove( )
			},
			getselectedli: function ( ) {
				return n
			}
		}
	}, a.fn.selection = function ( a, b ) {
		var c, d, e, f, g, h;
		return void 0 !== a ? this.each( function ( ) {
			if ( this.createTextRange ) {
				var c = this.createTextRange( );
				void 0 === b || a == b ? ( c.move( "character", a ), c.select( ) ) : ( c.collapse( !0 ), c.moveStart( "character", a ), c.moveEnd( "character", b ), c.select( ) )
			} else this.setSelectionRange ? this.setSelectionRange( a, b ) : this.selectionStart && ( this.selectionStart = a, this.selectionEnd = b )
		} ) : ( c = this[ 0 ], c.createTextRange ? ( d = document.selection.createRange( ), e = c.value, f = "<->", g = d.text.length, d.text = f, h = c.value.indexOf( f ), c.value = e, this.selection( h, h + g ), {
			start: h,
			end: h + g
		} ) : void 0 !== c.selectionStart ? {
			start: c.selectionStart,
			end: c.selectionEnd
		} : void 0 )
	}
}( jQuery );