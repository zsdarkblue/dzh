var common=common||{};common={debug:false};var gWebSocket=function(b,a,c,d){this.host=b;this.port=a;this.send_queue=c;this.getSocket=function(){var g=this.send_queue,f="",h="";var e=new WebSocket("ws://"+this.host+":"+this.port);e.onmessage=function(i){var k=i.data.replace(/[\n]/g,"").replace(/[\r]/g,"").replace(/[\t]/g,"");var j;j=JSON.parse(k,true);if(j.req_seq!="0"||j.result){d(j)}if(common.debug){console.log("前端socket接口["+g+"]-请求到成功返回耗时:"+((new Date().getTime()-f)/1000)+"s")}};e.onclose=function(){window.unload=function(){e.close()}};e.onopen=function(){if(g.length>0){f=new Date().getTime();e.send(g)}};e.onerror=function(){if(common.debug){console.log("前端socket接口["+g+"]-请求到错误耗时:"+((new Date().getTime()-f)/1000)+"s")}};return e}};
