/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

/*
	This is an optimized version of Dojo, built for deployment and not for
	development. To get sources and documentation, please visit:

		http://dojotoolkit.org
*/

//>>built
require({cache:{"url:dojox/slickgrid/templates/slickgrid.html":"<div class=\"slickgrid ui-widget\" style=\"overflow:hidden;outline:0px;\" tabindex=\"0\" hidefocus=\"1\">\r\n\t<div tabIndex='0' hideFocus style='position:fixed;width:0;height:0;top:0;left:0;outline:0;' data-dojo-attach-point=\"$focusSink\"></div>\r\n\t\r\n\t<div class='slick-pane slick-pane-top slick-pane-left' tabIndex='0' data-dojo-attach-point=\"$paneTopL\">\r\n\t\t<div class='ui-state-default slick-header slick-header-left' data-dojo-attach-point=\"$headerScrollerL\">\r\n\t\t\t<div class='slick-header-columns slick-header-columns-left' style='width:10000px; left:-1000px' data-dojo-attach-point=\"$headerL\"></div>\r\n\t\t</div>\r\n\t\t<div style='display:none;' class='ui-state-default slick-headerrow' data-dojo-attach-point=\"$headerRowScrollerL\">\r\n\t\t\t<div class='slick-headerrow-columns slick-headerrow-columns-left' data-dojo-attach-point=\"$headerRowL\"></div>\r\n\t\t</div>\r\n\t\t<div style='display:none;' class='ui-state-default slick-top-panel-scroller' data-dojo-attach-point=\"$topPanelScrollerL\">\r\n\t\t\t<div class='slick-top-panel' style='width:10000px' data-dojo-attach-point=\"$topPanelL\"></div>\r\n\t\t</div>\r\n\t\t<div class='slick-viewport slick-viewport-top slick-viewport-left' tabIndex='0' hideFocus data-dojo-attach-point=\"$viewportTopL\">\r\n\t\t\t<div class='grid-canvas grid-canvas-top grid-canvas-left' tabIndex='0' hideFocus data-dojo-attach-point=\"$canvasTopL\"></div>\r\n\t\t</div>\r\n\t</div>\r\n\t\r\n    <div class='slick-pane slick-pane-top slick-pane-right' tabIndex='0' data-dojo-attach-point=\"$paneTopR\">\r\n\t\t<div class='ui-state-default slick-header slick-header-right' data-dojo-attach-point=\"$headerScrollerR\">\r\n\t\t\t<div class='slick-header-columns slick-header-columns-right' style='width:10000px; left:-1000px' data-dojo-attach-point=\"$headerR\"></div>\r\n\t\t</div>\r\n\t\t<div style='display:none;' class='ui-state-default slick-headerrow' data-dojo-attach-point=\"$headerRowScrollerR\">\r\n\t\t\t<div class='slick-headerrow-columns slick-headerrow-columns-right' data-dojo-attach-point=\"$headerRowR\"></div>\r\n\t\t</div>\r\n\t\t<div style='display:none;' class='ui-state-default slick-top-panel-scroller' data-dojo-attach-point=\"$topPanelScrollerR\">\r\n\t\t\t<div class='slick-top-panel' style='width:10000px' data-dojo-attach-point=\"$topPanelR\"></div>\r\n\t\t</div>\r\n\t\t<div class='slick-viewport slick-viewport-top slick-viewport-right' tabIndex='0' hideFocus data-dojo-attach-point=\"$viewportTopR\">\r\n\t\t\t<div class='grid-canvas grid-canvas-top grid-canvas-right' tabIndex='0' hideFocus data-dojo-attach-point=\"$canvasTopR\"></div>\r\n\t\t</div>\r\n\t</div>\r\n\t\r\n    <div class='slick-pane slick-pane-bottom slick-pane-left' tabIndex='0' data-dojo-attach-point=\"$paneBottomL\">\r\n\t\t<div class='slick-viewport slick-viewport-bottom slick-viewport-left' tabIndex='0' hideFocus data-dojo-attach-point=\"$viewportBottomL\">\r\n\t\t\t<div class='grid-canvas grid-canvas-bottom grid-canvas-left' tabIndex='0' hideFocus data-dojo-attach-point=\"$canvasBottomL\"></div>\r\n\t\t</div>\r\n\t</div>\r\n\t\r\n    <div class='slick-pane slick-pane-bottom slick-pane-right' tabIndex='0' data-dojo-attach-point=\"$paneBottomR\">\r\n\t\t<div class='slick-viewport slick-viewport-bottom slick-viewport-right' tabIndex='0' hideFocus data-dojo-attach-point=\"$viewportBottomR\">\r\n\t\t\t<div class='grid-canvas grid-canvas-bottom grid-canvas-right' tabIndex='0' hideFocus data-dojo-attach-point=\"$canvasBottomR\"></div>\r\n\t\t</div>\r\n\t</div>\r\n</div>",
"dojox/slickgrid/sogrid":function(){define(["dojo/_base/lang","dojo/_base/array","./slickgrid","dojo/_base/declare"],function(x,n,s,t){return t("dojox.grid.SOGrid",s,{refresh:function(q){if(!this.columnsDone&&!(q instanceof Array)){var i=!0,k=q.result?q.result.head:[];n.forEach(this.columns,function(f){0<k.length?f.field=n.indexOf(k,f.field):i=!1});this.columnsDone=i&&!0}this.inherited(arguments)},postMixInProperties:function(){this.defaults.dataItemColumnValueExtractor=function(n,i){return n[i.field]};
this.inherited(arguments)}})})},"dojox/slickgrid/quotegrid":function(){define("dojox/slickgrid/quotegrid","./slickgrid,dojo/_base/lang,dojo/_base/declare,dojo/_base/array,dojo/aspect,dojox/store/GridWSStore,./formatters".split(","),function(x,n,s,t,q,i,k){return s("dojox.grid.QuoteGrid",[x],{whereField:"stockid",sortQueryLimit:{},startup:function(){this.pushStore=this.pushStore||new i;this.pushStore.store=this.store;this.inherited(arguments);this._useSortService=!1;q.after(this.store,"put",n.hitch(this,
function(f,i){var o=this.store.index[f];this._useSortService?this.updateRow(this._sortObjRowMapping[i[0].obj],i[0]):this.updateRow(o);this.oldVRangeValues[f]=n.clone(i[0])}));if("sort"===this.queryLimit.service)this.store.on("afterprogress",n.hitch(this,function(f){"1"!==f.res_seq&&this._subscribe()}));this.on("viewportchanged",n.hitch(this,function(){!1===this._useSortService?this._subscribe():this.sortQuery(this._sortArgs)}))},refresh:function(f){this.inherited(arguments);this._subscribe()},sortQuery:function(f){if("undefined"===
typeof this._sortStore)this._sortStore=new i,this._sortObjRowMapping={},q.after(this._sortStore,"convert",n.hitch(this,function(f){this._sortObjRowMapping={};this._sortDatas=f;for(var i=f.length;i--;)this._sortObjRowMapping[f[i].obj]=i+this._sortVisibleRange.top;this._subscribe();return[]}));if(0<f.sortCols.length){this._sortArgs=f;this._useSortService=!0;var k=this.getVisibleRange();this.sortQueryLimit=n.mixin(this.sortQueryLimit,{sorttype:!0==f.sortCols[0].sortAsc?"asc":"desc",sortvalue:f.sortCols[0].sortCol.field,
start:k.top,count:k.bottom-k.top});this._sortStore.query(this.sortQueryLimit);this._sortVisibleRange=k}else this._sortArgs=[],this._useSortService=!1,this._sortStore.cancel(this._sortStore.req_seq),this._subscribe()},resize:function(){this.inherited(arguments);var f=this.getVisibleRange(),i=this._oldVRange;"undefined"==typeof i||i.top==f.top&&i.bottom==f.bottom||this._subscribe()},_subscribe:function(){var f=this.getVisibleRange(),i=this.whereField,k=f.top,p=f.bottom,k=!this._useSortService?this.data.slice(k,
p):this._sortDatas,k=t.map(k,n.hitch(this,function(f){return this._useSortService?f.obj:f[i]}));0<k.length&&(p={service:this.service||"objinfo",type:this.type||"getinfo",field:void 0==this.field?"obj,name,new,updn,updnratio,volume,exchange,nowvol,lastclose,open,high,low,updnspeed,pro_pri,pnratio,pri_rev,buyprice1,sellprice5,inner,outter,hilowratio,volratio,avgprice,wantratio,wantdiff,tickcount,allvalue,floatvalue,volume":this.field,response_times:-1,response_mode:0},p=n.mixin(this.pushQueryLimit||
p,{where:"obj="+k.join(",")}),this.pushStore.query(p));this._oldVRange=f;this.oldVRangeValues={}},columns:[{id:"index",name:"\u5e8f\u53f7",width:40,formatter:k.index},{id:"label",name:"\u4ee3\u7801",field:"stockid",width:60,formatter:k.stockCode},{id:"name",name:"\u540d\u79f0",field:"stockname",cssClass:"font-center"},{id:"new",name:"\u6700\u65b0 ",field:"new"},{id:"updn",name:"\u6da8\u8dcc",field:"updn"},{id:"updnratio",name:"\u6da8\u5e45%",field:"updnratio"},{id:"volume",name:"\u603b\u624b",field:"volume"},
{id:"exchange",name:"\u6362\u624b\u7387%",field:"exchange"},{id:"nowvol",name:"\u73b0\u624b",field:"nowvol"},{id:"lastclose",name:"\u6628\u6536",field:"lastclose"},{id:"open",name:"\u4eca\u5f00",field:"open"},{id:"high",name:"\u6700\u9ad8",field:"high"},{id:"low",name:"\u6700\u4f4e",field:"low"},{id:"updnspeed",name:"\u6da8\u901f%",field:"updnspeed"},{id:"industry",name:"\u884c\u4e1a",field:"industry"},{id:"pro_pri",name:"\u5e02\u76c8\u7387",field:"pro_pri"},{id:"pnratio",name:"\u5e02\u51c0\u7387",
field:"pnratio"},{id:"pri_rev",name:"\u5e02\u9500\u7387",field:"pri_rev"},{id:"buyprice1",name:"\u59d4\u4e70\u4ef7",field:"buyprice1"},{id:"sellprice1",name:"\u59d4\u5356\u4ef7",field:"sellprice5"},{id:"inner",name:"\u5185\u76d8",field:"inner"},{id:"outter",name:"\u5916\u76d8",field:"outter"},{id:"c13",name:"\u603b\u989d",field:"amount"},{id:"hilowratio",name:"\u632f\u5e45%",field:"hilowratio"},{id:"volratio",name:"\u91cf\u6bd4",field:"volratio"},{id:"avgprice",name:"\u5747\u4ef7",field:"avgprice"},
{id:"wantratio",name:"\u59d4\u6bd4%",field:"wantratio"},{id:"wantdiff",name:"\u59d4\u5dee",field:"wantdiff"},{id:"tickcount",name:"\u6210\u4ea4\u7b14\u6570",field:"tickcount"},{id:"c20",name:"\u6210\u4ea4\u65b9\u5411",field:"buysellsym"},{id:"allvalue",name:"\u603b\u5e02\u503c",field:"allvalue",width:120},{id:"floatvalue",name:"\u6d41\u901a\u5e02\u503c",field:"floatvalue",width:120}]})})},"dojox/slickgrid/formatters":function(){define("dojox/slickgrid/formatters",["dojo/date/locale"],function(x){function n(i,
k,f){return(i=(i.get("oldVRangeValues")||{})[f[i.store.idProperty||"obj"]])?i[k.field]:void 0}function s(i,k,f){return['<div class="',0==i["new"]?"":+i["new"]>+i[f]?"font-red":+i["new"]<+i[f]?"font-green":"",'">',k,"</div>"].join("")}function t(i,k,f,n){return['<div class="',0==i["new"]?"":+i["new"]>+i[n]?"font-red":+i["new"]<+i[n]?"font-green":"",'">',f,k>f?"\u2193":k<f?"\u2191":"&nbsp;&nbsp;","</div>"].join("")}function q(i){return null==i?"":i.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,
"&gt;")}return{percentFormatter:function(i,k,f,n,o){return null==f?"--":s(o,(new Number(100*f)).toFixed(2),"lastclose")},arrowPercentFormatter:function(i,k,f,q,o,p){if(null==f)return"--";i=n(p,q,o);return t(o,+i,(new Number(100*f)).toFixed(2),"lastclose")},quoteFormatter:function(i,k,f,n,o){return null==f?"--":s(o,f,"lastclose")},arrowQuoteFormatter:function(i,k,f,q,o,p){if(null==f)return"--";i=n(p,q,o);return t(o,i,f,"lastclose")},quoteFmtPresettle:function(i,k,f,n,o){return null==f?"--":s(o,f,"presettle")},
arrowQuoteFmtPresettle:function(i,k,f,q,o,p){if(null==f)return"--";i=n(p,q,o);return t(o,i,f,"presettle")},indexFormatter:function(i){return+i+1},timeFormatter:function(i,k,f){return null==f?"--":x.format(new Date(f+"000"-288E5),{selector:"date",datePattern:"HH:mm:ss"})},treeGridFormatter:function(i,k,f,n,o){return["<div style='padding-left:",15*o.indentation,"px'><span class='","leaf"==o._collapsed?"place-holder":"toggle "+("collapse"==o._collapsed?"collapse":"expand"),"'></span>",f,"</div>"].join("")},
stockCode:function(i,k,f){return f.replace(".stk","").replace("SH","").replace("SZ","")},index:function(i){return'<a><div class="font-gray">'+parseInt(i+1)+"</div></a>"},underlineDecimal:function(i,k,f){return f?(k=f.indexOf("."),i=f.substring(0,k),f=f.substring(k+1,f.length),i+"<span style='text-decoration:underline'>"+f+"</span>"):"--"},nullToGG:function(i,k,f){i="";return i=f?q(f):"--"},nullToBlank:function(i,k,f){i="";f&&(i=q(f));return i},addMinusSignAndColor:function(i,k,f){return 0>f?"<div class='font-green'>-"+
f+"</div>":0<f?"<div class='font-red'>"+f+"</div>":"<div class='font-gray'>"+f+"</div>"},unsignedPlusMinusColor:function(i,k,f){return null==f?"--":'<div class="'+(0==f?"":0<f?"font-red":"font-green")+'">'+Math.abs(f)+"</div>"},addBothSign:function(i,k,f){return 0<f?"+"+f:0>f?"-"+f:f},addBothSignAndColor:function(i,k,f){return 0>f?"<div class='font-green'>-"+f+"</div>":0<f?"<div class='font-red'>+"+f+"</div>":"<div class='font-gray'>"+f+"</div>"},firstItem:function(i,k,f){return f instanceof Array?
f.shift():""},lastItem:function(i,k,f){return f instanceof Array?f.pop():""}}})}}});
define("dojox/slickgrid/slickgrid","dojo/_base/declare,dijit/_WidgetBase,dijit/_TemplatedMixin,dojo/text!./templates/slickgrid.html,dojox/slickgrid/_StoreMixin,./plugins/rowselectionmodel,./plugins/checkboxselectcolumn,./plugins/autotooltips,./slickcore,dojo/dom-geometry,dojo/on,dojo/mouse,dojo/query,dojo/dom-construct,dojo/_base/array,dojo/_base/lang,dijit/registry,dojo/aspect,dojo/dom-attr,dojo/dom-class,dojo/dom-style,dojo/Evented,dojo/NodeList-traverse,dojo/NodeList-manipulate".split(","),function(x,
n,s,t,q,i,k,f,B,o,p,C,m,j,A,h,D,G,y,u,g,E){return x("dojox.grid.SlickGrid",[n,s,E,q],{templateString:t,scrollbarDimensions:function(){var a=j.place(j.toDom("<div style='position:absolute; top:-10000px; left:-10000px; width:100px; height:100px; overflow:scroll;'></div>"),document.body),b={width:a.offsetWidth-a.clientWidth,height:a.offsetHeight-a.clientHeight};j.destroy(a);return b}(),defaults:{rowHeight:25,enableAddRow:!1,leaveSpaceForNewRows:!1,editable:!1,autoEdit:!0,enableCellNavigation:!0,enableColumnReorder:!1,
asyncEditorLoading:!1,asyncEditorLoadDelay:100,forceFitColumns:!1,enableAsyncPostRender:!1,asyncPostRenderDelay:60,autoHeight:!1,editorLock:B.GlobalEditorLock,showHeaderRow:!1,headerRowHeight:25,showTopPanel:!1,topPanelHeight:25,formatterFactory:null,editorFactory:null,cellFlashingCssClass:"flashing",selectedCellCssClass:"selected",multiSelect:!0,enableTextSelectionOnCells:!1,dataItemColumnValueExtractor:null,frozenColumn:-1,frozenRow:-1,fullWidthRows:!1,multiColumnSort:!1,defaultFormatter:this.defaultFormatter,
showHeader:!0,enableColumnHigeLight:!1,hasCanvasVirtualLine:!1,hideBorder:"",colDragMode:"preColumn",clearHighLight:"column",sortMode:"local",autoExpandCol:"",hiddenScroller:"none"},_columnDefaults:{name:"",resizable:!0,sortable:!1,minWidth:30,width:80,rerenderOnResize:!1,headerCssClass:null,cssClass:""},maxSupportedCssHeight:1001E6,refresh:function(a){a&&(this.data=a);this.invalidateAllRows();this.updateRowCount();this.render();this.options.hasCanvasVirtualLine&&this.createVirtualLine()},renderQuery:function(a,
b){var a=a||this.queryLimit,b=b||this.queryOptions,c=this.store.query(a,b);c.then?c.then(h.hitch(this,this.refresh)):this.refresh(c);return c},_sorter:function(a,b,c){for(var d,e=0,l=c.sortCols,F=l.length;e<F;e++)if(c=a[l[e].sortCol.field],d=b[l[e].sortCol.field],c!=d)return!!l[e].sortAsc==(null==c||c>d)?1:-1;return 0},setSorter:function(a){this._sorter=a},constructor:function(){this.data=this.data||[];this.store=this.store||null;this.columns=this.columns||[];this.options=this.options||{};this.columnDefaults=
this.columnDefaults||{};this.queryLimit=this.queryLimit||{};this.queryOptions=this.queryOptions||{}},getCanvasHeight:function(){return this.h},postMixInProperties:function(){this.inherited(arguments);this.uid="slickgrid_"+Math.round(1E6*Math.random());this.groups={};this.panelTopLWidthOnFrozenColumn=0;this.cj=this.n=this.ph=this.h=this.th=void 0;this.offset=this.page=0;this.scrollDir=1;this.initialized=!1;this.viewportHasVScroll=this.viewportHasHScroll=this.canvasWidthR=this.canvasWidthL=this.canvasWidth=
this.viewportW=this.viewportH=this.columnCssRulesR=this.columnCssRulesL=this.stylesheet=this.$style=this.$canvas=this.$viewport=this.$topPanel=this.$topPanelScroller=this.$headerRowScroller=this.$headerRow=this.$headers=this.$headerScroller=this.$focusSink=void 0;this.cellHeightDiff=this.cellWidthDiff=this.headerColumnHeightDiff=this.headerColumnWidthDiff=0;this.absoluteColumnMinWidth=void 0;this.numberOfRows=0;this.activeCell=this.activeRow=this.activePosX=void 0;this.currentEditor=this.activeCellNode=
null;this.editController=this.serializedEditorValue=void 0;this.rowsCache={};this.renderedRows=0;this.numVisibleRows=void 0;this.prevScrollLeft=this.lastRenderedScrollTop=this.scrollTop=this.prevScrollTop=0;this.avgRowRenderTime=10;this.selectionModel=void 0;this.selectedRows=[];this.cellCssClasses={};this.columnsById={};this.sortColumns=[];this.h_postrender=this.h_render=this.h_editorLoader=null;this.postProcessedRows={};this.postProcessFromRow=this.postProcessToRow=null;this.counter_rows_removed=
this.counter_rows_rendered=0;this.$viewportScrollContainer=this.$canvasBottomR=this.$canvasBottomL=this.$canvasTopR=this.$canvasTopL=this.$viewportBottomR=this.$viewportBottomL=this.$viewportTopR=this.$viewportTopL=this.$topPanelR=this.$topPanelL=this.$topPanelScrollerR=this.$topPanelScrollerL=this.$headerRowR=this.$headerRowL=this.$headerRowScrollerR=this.$headerRowScrollerL=this.$headerR=this.$headerL=this.$headerScrollerR=this.$headerScrollerL=this.$paneBottomR=this.$paneBottomL=this.$paneTopR=
this.$paneTopL=void 0},postCreate:function(){if(void 0==this.getSelectionModel()){var a=new i({selectActiveRow:!0});this.own(a);this.setSelectionModel(a)}this.own(new f({},this))},startup:function(){this.init();this.renderQuery();this.inherited(arguments);"auto"==this.options.hiddenScroller&&this._hiddenScoller()},_hiddenScoller:function(){if("auto"===this.options.hiddenScroller)-1<this.options.frozenColumn?this.$viewportTopR.style.overflow="hidden":this.$viewportTopL.style.overflow="hidden"},resize:function(a){if(!this._currentSize||
!a||!(this._currentSize.w==a.w&&this._currentSize.h==a.h)){if(a)this._currentSize=a,o.setMarginBox(this.domNode,{w:a.w,h:a.h});this.resizeCanvas();this.options.hasCanvasVirtualLine&&this.createVirtualLine()}},createVirtualLine:function(){var a=m("."+this.uid+" .grid-canvas .virtual"),b=m("."+this.uid+" .slick-viewport .vir-viewport");a.forEach(function(a){j.destroy(a)});b.forEach(function(a){j.destroy(a)});var a=this.columns.length,b=g.get(this.$canvasTopL,"height"),c=this.viewportHasVScroll?this.viewportW-
this.scrollbarDimensions.width:this.viewportW,d=this.$viewportTopL,e=['<div class="virtual" style="height:'+b+'px;">'];if(-1<this.options.frozenColumn&&(c-=g.get(this.$canvasTopL,"width"),d=this.$viewportTopR,-1<this.options.frozenRow))d=this.$canvasBottomR;for(var l=0;l<a;l++)e.push('<div class="slick-cell l'+l+" r"+l+' gh"></div>');e.push("</div>");m(j.toDom(e.join(""))).prependTo(this.$canvas);m(j.toDom('<div class="vir-viewport" style="position:absolute;height:'+b+"px;width:"+c+'px"></div>')).prependTo(d)},
destroy:function(){this.getEditorLock().cancelCurrentEdit();this.emit("beforedestroy",{});this.removeCssRules();this.inherited(arguments)},init:function(){this.columnDefaults=h.mixin({},this._columnDefaults,this.columnDefaults);this.options=h.mixin({},this.defaults,this.options);this.options.defaultFormatter=this.options.defaultFormatter||this.defaultFormatter;var a=this,b=a.domNode,c=a.columns,d=a.options;a.options.frozenColumn=0<=d.frozenColumn&&d.frozenColumn<c.length?parseInt(d.frozenColumn):
-1;a.options.frozenRow=0<=d.frozenRow&&d.frozenRow<c.length?parseInt(d.frozenRow):-1;a.editController={commitCurrentEdit:a.commitCurrentEdit,cancelCurrentEdit:a.cancelCurrentEdit};c.forEach(function(b,d){if(!0==b.CheckBoxSelectColumn){var e=new i({selectActiveRow:!1}),f=new k(b,a);a.setSelectionModel(e);c.splice(d,1,f.getColumnDefinition());a.own(e,f)}});u.add(b,a.uid);/relative|absolute|fixed/.test(g.get(b,"position"))||g.set(b,"position","relative");if(0==parseFloat(g.get(this.domNode,"height"))&&
this.domNode.parentNode){var e=o.getMarginBox(this.domNode.parentNode);delete e.t;delete e.l;o.setMarginBox(b,e)}a.setPaneVisibility();a.$headerScroller=m.NodeList([a.$headerScrollerL,a.$headerScrollerR]);a.$headers=m.NodeList([a.$headerL,a.$headerR]);a.$headerRowScroller=m.NodeList([a.$headerRowScrollerL,a.$headerRowScrollerR]);a.$headerRow=m.NodeList([a.$headerRowL,a.$headerRowR]);a.$topPanelScroller=m.NodeList([a.$topPanelScrollerL,a.$topPanelScrollerR]);a.$topPanel=m.NodeList([a.$topPanelL,a.$topPanelR]);
d.showTopPanel&&(g.set(a.$topPanelScrollerL,"display","block"),g.set(a.$topPanelScrollerR,"display","block"));d.showHeaderRow&&(g.set(a.$headerRowScrollerL,"display","block"),g.set(a.$headerRowScrollerR,"display","block"));!1==d.showHeader&&(e={height:0,border:0},g.set(a.$headerScrollerR,e),-1!=d.frozenColumn&&h.mixin(e,{"border-right":0}),g.set(a.$headerScrollerL,e));a.$viewport=m.NodeList([a.$viewportTopL,a.$viewportTopR,a.$viewportBottomL,a.$viewportBottomR]);a.setOverflow();a.$canvas=m.NodeList([a.$canvasTopL,
a.$canvasTopR,a.$canvasBottomL,a.$canvasBottomR]);a.setScroller();if(!a.initialized)a.initialized=!0,a.viewportW=g.get(b,"width"),a.measureCellPaddingAndBorder(),a.disableSelection(a.$headerL),a.disableSelection(a.$headerRowScrollerL),a.createColumnHeaders(),a.setupColumnSort(),a.createCssRules(),a.updateCanvasWidth(),a.resizeCanvas(),a.bindAncestorScrollEvents(),-1<d.frozenColumn&&(-1<d.frozenRow?this.own(p(a.$viewportBottomL,"mousewheel",h.hitch(a,a.handleMouseWheel))):this.own(p(a.$viewportTopL,
"mousewheel",h.hitch(a,a.handleMouseWheel)))),this.own(p(b,"resize",a.resizeCanvas),p(a.$focusSink,"keydown",h.hitch(a,"handleKeyDown")),a.$viewport.on("scroll",h.hitch(a,a.handleScroll)),a.$headerScroller.on("contextmenu",h.hitch(a,"handleHeaderContextMenu")),a.$headerScroller.on("click",h.hitch(a,"handleHeaderClick")),a.$canvas.on("keydown",h.hitch(a,a.handleKeyDown)),a.$canvas.on("click",h.hitch(a,a.handleClick)),a.$canvas.on("dblclick",h.hitch(a,a.handleDblClick)),a.$canvas.on("contextmenu",h.hitch(a,
a.handleContextMenu)),a.$canvas.on("draginit",h.hitch(a,a.handleDragInit)),a.$canvas.on("dragstart",h.hitch(a,a.handleDragStart)),a.$canvas.on("drag",h.hitch(a,a.handleDrag)),a.$canvas.on("dragend",h.hitch(a,a.handleDragEnd)),a.$canvas.on(".slick-row:mouseover",h.hitch(a,a.handleMouseOver)),a.$canvas.on(".slick-row:mouseout",h.hitch(a,a.handleMouseOut)),p(document,"click",h.hitch(a,a.clearHighLight))),p(this.domNode,C.enter,h.hitch(this,function(){if("auto"===this.options.hiddenScroller)-1<this.options.frozenColumn?
this.$viewportTopR.style.overflow="auto":this.$viewportTopL.style.overflow="auto"})),p(this.domNode,C.leave,h.hitch(this,this._hiddenScoller))},setSelectionModel:function(a){this.selectionModel&&(this.selectionModel.selectedRangesChangedHandler.remove(),this.selectionModel.destroy&&this.selectionModel.destroy());if(this.selectionModel=a)this.selectionModel.init(this),this.selectionModel.selectedRangesChangedHandler=this.selectionModel.on("selectedrangeschanged",h.hitch(this,"handleSelectedRangesChanged"))},
getSelectionModel:function(){return this.selectionModel},getCanvasNode:function(){return this.$canvas[0]},getViewportNode:function(){return this.$viewport[0]},getCanvasWidth:function(){for(var a=this.columns,b=this.options,c=this.viewportHasVScroll?this.viewportW-this.scrollbarDimensions.width:this.viewportW,d=0,e=0,l=a.length,f;l--;)f=a[l],-1<b.frozenColumn&&l>b.frozenColumn?e+=f.width||this.columnDefaults.width:d+=f.width||this.columnDefaults.width;this.canvasWidthL=d;this.canvasWidthR=e;return b.fullWidthRows?
Math.max(rowWidth,c):d},updateCanvasWidth:function(a){var b=this.canvasWidth,c=this.canvasWidth=this.getCanvasWidth(),d=this.options,e=this.canvasWidthL,l=this.canvasWidthR;if(c!=b||-1!=d.frozenColumn)g.set(this.$canvasTopL,"width",e+"px"),g.set(this.$headerScrollerL,"width",e+"px"),g.set(this.$headerRowScrollerL,"width",e+"px"),g.set(this.$headerRowL,"width",e+"px"),-1<d.frozenColumn&&(g.set(this.$canvasTopR,"width",l+"px"),g.set(this.$headerScrollerR,"width",l+"px"),g.set(this.$headerRowScrollerR,
"width",l+"px"),g.set(this.$headerRowR,"width",l+"px")),-1<d.frozenRow&&g.set(this.$canvasBottomL,"width",e+"px"),-1<d.frozenColumn&&g.set(this.$canvasBottomR,"width",l+"px"),-1==d.frozenColumn?g.set(this.$headerScrollerL,"width","100%"):g.set(this.$headerScrollerR,"width","100%"),this.viewportHasHScroll=c>this.viewportW-this.scrollbarDimensions.width;(c!=b||a)&&this.applyColumnWidths()},disableSelection:function(a){a&&g.set(a,"-webkit-user-select","none")},bindAncestorScrollEvents:function(){for(var a=
-1<this.options.frozenRow?this.$canvasBottomL:this.$canvasTopL;(a=a.parentNode)!=document.body&&a;)(a==this.$viewportTopL||a.scrollWidth!=a.clientWidth||a.scrollHeight!=a.clientHeight)&&this.own(p(a,"scroll",this.handleActiveCellPositionChange))},unbindAncestorScrollEvents:function(){(-1<this.options.frozenRow?this.$canvasBottomL:this.$canvasTopL).parents().unbind("scroll.slickgrid")},updateColumnHeader:function(a,b,c){var d=this.columns;if(this.initialized){var a=this.getColumnIndex(a),e=this.$headers.children().at(a);
if(0<e.length)d[a].name=b,d[a].toolTip=c,e.attr("title",c||b||"").children().at(0).html(b)}},getHeaderRow:function(){return-1<this.options.frozenColumn?this.$headerRow:this.$headerRow[0]},getHeaderRowColumn:function(a){var b=this.options,a=this.getColumnIndex(a),c;-1<b.frozenColumn?a<=b.frozenColumn?c=this.$headerRowL:(c=this.$headerRowR,a-=b.frozenColumn+1):c=this.$headerRowL;b=c.children().at(a);return 0<b.length&&b[0]},createColumnHeaders:function(){var a=this.columns,b=this.options,c=this.groups=
[],d=!1;j.empty(this.$headerL);j.empty(this.$headerR);j.empty(this.$headerRowL);j.empty(this.$headerRowR);this.columnsById={};A.forEach(a,function(a){a.group&&(d=!0)});for(var e=0;e<a.length;e++){var l=a[e]=h.mixin({},this.columnDefaults,a[e],{cell:e});this.columnsById[l.id]=e;var f=-1<b.frozenColumn?e<=b.frozenColumn?this.$headerL:this.$headerR:this.$headerL,i=-1<b.frozenColumn?e<=b.frozenColumn?this.$headerRowL:this.$headerRowR:this.$headerRowL,w=j.toDom("<div "+(b.enableColumnReorder?'draggable="true"':
"")+" class='ui-state-default "+(d?"hbox ":"")+"slick-header-column' id='"+this.uid+l.id+"'><span class='slick-column-name '>"+l.name+"</span></div>");u.add(w,l.headerCssClass||"");g.set(w,{width:l.width-this.headerColumnWidthDiff+"px"});y.set(w,{title:l.toolTip||l.name||"",fieldid:l.id,cell:e});if(l.group){var k=null;c[l.group]?(k=c[l.group],g.set(k,"width",l.width+g.get(k,"width")+"px")):(k=j.toDom("<div class='ui-state-default vbox  slick-header-column-g' id='g_"+this.uid+l.id+"' ><div class='slick-column-name-g spacer' >"+
l.group+"</div><div class='grp spacer hbox '></div></div>"),g.set(k,"width",l.width+"px"),y.set(k,"title",l.toolTip||l.group||""),j.place(k,f),c[l.group]=k);g.set(w,"left","auto");j.place(w,m(".grp",k)[0])}else j.place(w,f);l.sortable&&j.place(j.toDom("<span class='slick-sort-indicator' />"),w);b.showHeaderRow&&j.place(j.toDom("<div class='ui-state-default slick-headerrow-column l"+e+" r"+e+"' ><div id="+(this.uid+l.field)+"_select ></div></div>"),i)}b.showHeaderRow&&j.place(j.toDom("<div style='display:block;height:1px;width:10000px;position:absolute;top:0;left:0;'></div>"),
this.$headerRowScrollerL);this.setSortColumns(this.sortColumns);this.setupColumnResize();b.enableColumnReorder&&this.setupColumnReorder();if(-1!=b.frozenColumn&&0==this.panelTopLWidthOnFrozenColumn){e=0;for(c=b.frozenColumn;e<=c;e++)this.panelTopLWidthOnFrozenColumn+=a[e].width;-1==b.frozenRow?g.set(this.$paneTopL,{width:this.panelTopLWidthOnFrozenColumn+"px","overflow-x":"hidden","overflow-y":"hidden"}):(g.set(this.$paneTopL,{width:this.panelTopLWidthOnFrozenColumn+"px"}),g.set(this.$paneBottomL,
{width:this.panelTopLWidthOnFrozenColumn+"px","overflow-x":"hidden","overflow-y":"hidden"}))}},setupColumnSort:function(){var a=this,b=a.columns,c=a.options;this.own(a.$headers.on("click",function(d){d.metaKey=d.metaKey||d.ctrlKey;if(!u.contains(d.target,"slick-resizable-handle")){var e=m.NodeList(d.target).closest(".slick-header-column");if(e.length&&(e=b[a.getColumnIndex(y.get(e[0],"fieldid"))],e.sortable&&a.getEditorLock().commitCurrentEdit())){for(var l=null,f=0,g={"true":!1,"false":"cancel",
cancel:!0};f<a.sortColumns.length;f++)if(a.sortColumns[f].columnId==e.id){l=a.sortColumns[f];l.sortAsc=g[""+l.sortAsc];break}if(d.metaKey&&c.multiColumnSort)l&&a.sortColumns.splice(f,1);else{if(!d.shiftKey&&!d.metaKey||!c.multiColumnSort)a.sortColumns=[];l?0==a.sortColumns.length&&a.sortColumns.push(l):(l={columnId:e.id,sortAsc:!0},a.sortColumns.push(l))}a.setSortColumns(a.sortColumns);var i=[];A.forEach(a.sortColumns,function(c){"cancel"!=c.sortAsc&&i.push({sortCol:b[a.getColumnIndex(c.columnId)],
sortAsc:c.sortAsc})});var k={multiColumnSort:a.options.multiColumnSort,sortCols:i};a.data.getItem&&a.data.getLength||"local"==a.options.sortMode?(l={sort:function(b,c){return a._sorter(b,c,k)}},0!=k.sortCols.length?h.mixin(a.queryOptions,l):delete a.queryOptions.sort,"dojo.store.Memory"===a.store.declaredClass?a.renderQuery(a.queryLimit,a.queryOptions):"dojox.store.GridSOStore"===a.store.declaredClass?a.renderQuery({},l):a.renderQuery({},a.queryOptions),a.emit("afterlocalsort",k)):"sort"===a.options.sortMode?
a.sortQuery(k):"server"===a.options.sortMode&&a.renderQuery(a.queryLimit,a.queryOptions)}}}))},setupColumnReorder:function(){var a=this,b=a.columns,c=m(m(a.$headers).children(".slick-header-column"));c.on("dragstart",function(a){a.dataTransfer.setData("id",a.target.id)});c.on("dragover",function(a){a.preventDefault()});c.on("drop",function(c){c.preventDefault();if(a.getEditorLock().commitCurrentEdit()){var e=c.dataTransfer.getData("id"),c=c.target;c.classList.contains("slick-resizable-handle")||(c=
c.id?c:m(c).closest(".slick-header-column")[0],!1==e||!1==c.id||e==c.id||(e=a.getColumnIndex(e.replace(a.uid,"")),c=a.getColumnIndex(c.id.replace(a.uid,"")),b.splice(c,0,b.splice(e,1)[0]),a.setColumns(b),a.emit("columnsreordered",{})))}})},setupColumnResize:function(){var a=this,b=a.columns,c=a.options,d,e,l,f,i,k,h,n;f=a.$headers.query(".slick-header-column");f.query(".slick-resizable-handle").remove();f.forEach(function(a,c){b[c].resizable&&(void 0===h&&(h=c),n=c)});void 0!==h&&(a.own(p(document,
"dragover",function(a){a=a||window.event;D.getEnclosingWidget(a.target).set("__pageX",a.pageX)})),f.forEach(function(q,v){if(!(v<h||c.forceFitColumns&&v>=n)&&b[v].resizable){var s=j.place(j.toDom("<div class='slick-resizable-handle' draggable='true'/>"),q);a.own(p(s,"dragstart",function(j){j.dataTransfer.setData("text/plain","node");if(!a.getEditorLock().commitCurrentEdit())return!1;l=j.pageX;m.NodeList(s).parent().addClass("slick-header-column-active");var h=j=null;f.forEach(function(a,c){b[c].previousWidth=
g.get(a,"width")+o.getPadBorderExtents(a).w});if(c.forceFitColumns){h=j=0;for(d=v+1;d<f.length;d++)e=b[d],e.resizable&&(null!==h&&(h=e.maxWidth?h+(e.maxWidth-e.previousWidth):null),j+=e.previousWidth-Math.max(e.minWidth||0,a.absoluteColumnMinWidth))}var r=0,z=0;for(d=0;d<=v;d++)e=b[d],e.resizable&&(null!==z&&(z=e.maxWidth?z+(e.maxWidth-e.previousWidth):null),r+=e.previousWidth-Math.max(e.minWidth||0,a.absoluteColumnMinWidth));null===j&&(j=1E5);null===r&&(r=1E5);null===h&&(h=1E5);null===z&&(z=1E5);
k=l+Math.min(j,z);i=l-Math.min(r,h);if(c.colDragMode){j=0;h=d-1;for(r=r=0;r<=h;r++)e=b[r],j=r<h?j+e.previousWidth:j+e.minWidth;r=o.position(a.domNode).x+j;r=0<c.frozenColumn&&d>c.frozenColumn?r-a.$viewportTopR.scrollLeft:r-a.$viewportTopL.scrollLeft;"preColumn"==c.colDragMode&&(i=r);"fixOtherColsBorder"==c.colDragMode&&(i=r,k=i+b[h].previousWidth-b[h].minWidth+b[h+1].previousWidth-b[h+1].minWidth)}}),p(s,"drag",function(e){e=e.pageX||a.get("__pageX");if(0!=e){var g,e=Math.min(k,Math.max(i,e))-l,j;
if("fixOtherColsBorder"==c.colDragMode){var h=b[d-1];g=b[d];j=h.previousWidth+g.previousWidth;h.width=h.previousWidth+e;g.width=j-h.width}else if(0>e){j=e;for(d=v;0<=d;d--)if(h=b[d],h.resizable)g=Math.max(h.minWidth||0,a.absoluteColumnMinWidth),j&&h.previousWidth+j<g?(j+=h.previousWidth-g,h.width=g):(h.width=h.previousWidth+j,j=0);if(c.forceFitColumns){j=-e;for(d=v+1;d<f.length;d++)if(h=b[d],h.resizable)j&&h.maxWidth&&h.maxWidth-h.previousWidth<j?(j-=h.maxWidth-h.previousWidth,h.width=h.maxWidth):
(h.width=h.previousWidth+j,j=0)}}else{j=e;for(d=v;0<=d;d--)if(h=b[d],h.resizable)j&&h.maxWidth&&h.maxWidth-h.previousWidth<j?(j-=h.maxWidth-h.previousWidth,h.width=h.maxWidth):(h.width=h.previousWidth+j,j=0);if(c.forceFitColumns){j=-e;for(d=v+1;d<f.length;d++)if(h=b[d],h.resizable)g=Math.max(h.minWidth||0,a.absoluteColumnMinWidth),j&&h.previousWidth+j<g?(j+=h.previousWidth-g,h.width=g):(h.width=h.previousWidth+j,j=0)}}a.applyColumnHeaderWidths();c.syncColumnCellResize&&applyColumnWidths()}}),p(s,
"dragend",function(){var c;m.NodeList(s).parent().removeClass("slick-header-column-active");for(d=0;d<f.length;d++)e=b[d],c=g.get(f[d],"width")+9,e.previousWidth!==c&&e.rerenderOnResize&&invalidateAllRows();a.applyColumnWidths();a.resizeCanvas();a.emit("columnsresized",{})}))}}))},getVBoxDelta:function(a){var b=0;["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"].forEach(function(c){b+=parseFloat(g.get(a,c))||0});return b},setPaneVisibility:function(){var a=this.options;-1<a.frozenColumn?
(g.set(this.$paneTopR,"display","block"),-1<a.frozenRow?(g.set(this.$paneBottomL,"display","block"),g.set(this.$paneBottomR,"display","block")):(g.set(this.$paneBottomL,"display","none"),g.set(this.$paneBottomR,"display","none"))):(g.set(this.$paneTopR,"display","none"),g.set(this.$paneBottomR,"display","none"),-1<a.frozenRow?g.set(this.$paneBottomL,"display","block"):(g.set(this.$paneBottomL,"display","none"),g.set(this.$paneBottomR,"display","none")))},setOverflow:function(){var a=this.options,
b=-1<a.frozenColumn?-1<a.frozenRow?"hidden":"scroll":-1<a.frozenRow?"hidden":"auto",c=-1<a.frozenColumn?-1<a.frozenRow?"hidden":"hidden":-1<a.frozenRow?"scroll":"auto",d=-1<a.frozenColumn?-1<a.frozenRow?"scroll":"auto":-1<a.frozenRow?"auto":"auto",e=-1<a.frozenColumn?-1<a.frozenRow?"scroll":"scroll":-1<a.frozenRow?"scroll":"auto",a=-1<a.frozenColumn?-1<a.frozenRow?"auto":"auto":-1<a.frozenRow?"auto":"auto";g.set(this.$viewportTopL,{"overflow-x":b,overflowX:b,"overflow-y":c,overflowY:c});g.set(this.$viewportTopR,
{"overflow-x":b,overflowX:b,"overflow-y":e,overflowY:e});g.set(this.$viewportBottomL,{"overflow-x":d,overflowX:d,"overflow-y":c,overflowY:c});g.set(this.$viewportBottomR,{"overflow-x":a,overflow:a,"overflow-y":a})},setScroller:function(){var a=this.options;this.$viewportScrollContainer=-1<a.frozenColumn?-1<a.frozenRow?this.$viewportBottomR:this.$viewportTopR:-1<a.frozenRow?this.$viewportBottomL:this.$viewportTopL},measureCellPaddingAndBorder:function(){var a,b=this,c=["borderLeftWidth","borderRightWidth",
"paddingLeft","paddingRight"],d=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"];a=j.place(j.toDom("<div class='ui-state-default slick-header-column' style='visibility:hidden'>-</div>"),b.$headerL);b.headerColumnWidthDiff=b.headerColumnHeightDiff=0;c.forEach(function(c){b.headerColumnWidthDiff+=parseFloat(g.get(a,c))||0});d.forEach(function(c){b.headerColumnHeightDiff+=parseFloat(g.get(a,c))||0});j.destroy(a);var e=j.place(j.toDom("<div class='slick-row' />"),b.$canvasTopL);a=j.place(j.toDom("<div class='slick-cell' id='' style='visibility:hidden'>-</div>"),
e);b.cellWidthDiff=b.cellHeightDiff=0;c.forEach(function(c){b.cellWidthDiff+=parseFloat(g.get(a,c))||0});d.forEach(function(c){b.cellHeightDiff+=parseFloat(g.get(a,c))||0});j.destroy(e);b.absoluteColumnMinWidth=Math.max(b.headerColumnWidthDiff,b.cellWidthDiff)},createCssRules:function(){var a=this.options,b=this.columns,c=this.uid;this.$style=j.place(j.toDom("<style type='text/css' rel='stylesheet' />"),document.head);for(var d=a.rowHeight-this.cellHeightDiff,e=["."+c+" .slick-header-column { left: 1000px; }",
"."+c+" .slick-top-panel { height:"+a.topPanelHeight+"px; }","."+c+" .slick-headerrow-columns { height:"+a.headerRowHeight+"px; }","."+c+" .slick-cell { height:"+d+"px;line-height:"+d+"px; }","."+c+" .slick-row { height:"+a.rowHeight+"px; }"],l={},f,g,h=0,i=b.length;h<i;h++)g=b[h].rowspan,e.push("."+c+" .l"+h+" { }"),e.push("."+c+" .r"+h+" { }"),1<g&&!l[g]&&(f=(g-1)*a.rowHeight+d,e.push("."+c+" .rowspan"+g+"{z-index:100;line-height:"+f+"px;height:"+f+"px !important}"),l[g]=!0);"all"==a.hideBorder&&
(e.push("."+c+" .slick-header-column.ui-state-default{border-right: 0px; padding-right:1px}"),e.push("."+c+" .slick-cell {border-right: 0px}"));"head"==a.hideBorder&&e.push("."+c+" .slick-header-column.ui-state-default{border-right: 0px; padding-right:1px}");"body"==a.hideBorder&&e.push("."+c+" .slick-cell {border-right: 0px}");this.$style.appendChild(document.createTextNode(e.join(" ")))},getColumnCssRules:function(a){var b=this.stylesheet;if(!b){for(var c=document.styleSheets,d=0;d<c.length;d++)if((c[d].ownerNode||
c[d].owningElement)==this.$style){b=this.stylesheet=c[d];break}b=this.stylesheet=b||this.$style.sheet;if(!b)throw Error("Cannot find stylesheet.");this.columnCssRulesL=[];this.columnCssRulesR=[];for(var b=b.cssRules||b.rules,e,l,d=0,c=b.length;d<c;d++)if(l=b[d].selectorText,e=/\.l\d+/.exec(l))e=parseInt(e[0].substr(2,e[0].length-2),10),this.columnCssRulesL[e]=b[d];else if(e=/\.r\d+/.exec(l))e=parseInt(e[0].substr(2,e[0].length-2),10),this.columnCssRulesR[e]=b[d]}return{left:this.columnCssRulesL[a],
right:this.columnCssRulesR[a]}},removeCssRules:function(){j.destroy(this.$style);this.stylesheet=null},getEditorLock:function(){return this.options.editorLock},getEditController:function(){return this.editController},getColumnIndex:function(a){return this.columnsById[a]},autosizeColumns:function(){var a=this.columns,b=this.options.autoExpandCol,c,d,e=[],l=0,f=0,g,h=this.viewportHasVScroll?this.viewportW-this.scrollbarDimensions.width:this.viewportW;for(c=0;c<a.length;c++)d=a[c],e.push(d.width),f+=
d.width,d.resizable&&(l+=d.width-Math.max(d.minWidth,this.absoluteColumnMinWidth));for(g=f;f>h&&l;){var i=(f-h)/l;for(c=0;c<a.length&&f>h;c++){d=a[c];var j=e[c];if(d.resizable&&!(j<=d.minWidth||j<=this.absoluteColumnMinWidth)){d=Math.max(d.minWidth,this.absoluteColumnMinWidth);var k=Math.floor(i*(j-d))||1,k=Math.min(k,j-d),f=f-k,l=l-k;e[c]-=k}}if(g==f)break;g=f}var m;if(b){for(c=g=0;c<a.length;c++)a[c].id==b?m=c:g+=a[c].width;void 0!==m?a[m].width=h-g:console.error(" \u8bbe\u7f6e\u7684autoExpandCol="+
b+"\u4e3a\u65e0\u6548\u5217ID\uff0c\u8bf7\u68c0\u67e5")}if(void 0===m){for(g=f;f<h;){b=h/f;for(c=0;c<a.length&&f<h;c++)d=a[c],d.resizable&&!(d.maxWidth<=d.width)&&(m=Math.min(Math.floor(b*d.width)-d.width,d.maxWidth-d.width||1E6)||1,f+=m,e[c]+=m);if(g==f)break;g=f}var n=!1;for(c=0;c<a.length;c++)a[c].rerenderOnResize&&a[c].width!=e[c]&&(n=!0),a[c].width=e[c]}this.applyColumnHeaderWidths();this.updateCanvasWidth(!0);n&&(this.invalidateAllRows(),this.render())},applyColumnHeaderWidths:function(){var a=
this.options,b=this.columns;if(this.initialized){if(-1!=a.frozenColumn){for(var c=0,d=0,a=a.frozenColumn;d<=a;d++)c+=b[d].width;c<this.panelTopLWidthOnFrozenColumn&&(b[d-1].width+=this.panelTopLWidthOnFrozenColumn-c)}for(var e,d=0,f=this.$headers.query(".slick-header-column"),h=f.length;d<h;d++)c=f[d],a=g.get(c,"width"),e=m.NodeList(c).parent().parent().pop(),a!==b[d].width-this.headerColumnWidthDiff&&g.set(c,"width",b[d].width-this.headerColumnWidthDiff+"px"),u.contains(e,"slick-header-column-g")&&
g.set(e,"width",g.get(e,"width")+(g.get(c,"width")-a)+"px")}},applyColumnWidths:function(){var a=this.options,b=this.columns;-1!=a.frozenColumn&&this.getCanvasWidth();for(var c=0,d,e,f=0,g=b.length;f<g;f++)d=b[f].width,e=this.getColumnCssRules(f),-1==a.frozenColumn?(e.left.style.left=c+"px",e.right.style.right=this.canvasWidthL-c-d+"px"):-1!=a.frozenColumn&&f<=a.frozenColumn?(e.left.style.left=c+"px",e.right.style.right=this.canvasWidthL-c-d+"px"):(e.left.style.left=c+"px",e.right.style.right=this.canvasWidthR-
c-d+"px"),c=a.frozenColumn==f?0:c+b[f].width},setSortColumn:function(a,b){this.setSortColumns([{columnId:a,sortAsc:b}])},setSortColumns:function(a){var b=this;b.sortColumns=a;var c=b.$headers.query(".slick-header-column");c.removeClass("slick-header-column-sorted").query(".slick-sort-indicator").removeClass("slick-sort-indicator-asc slick-sort-indicator-desc");A.forEach(b.sortColumns,function(a){null==a.sortAsc&&(a.sortAsc=!0);var e=b.getColumnIndex(a.columnId);null!=e&&c.at(e).addClass("cancel"==
a.sortAsc?"":"slick-header-column-sorted").query(".slick-sort-indicator").addClass("cancel"==a.sortAsc?"":a.sortAsc?"slick-sort-indicator-asc":"slick-sort-indicator-desc")})},getSortColumns:function(){return this.sortColumns},handleSelectedRangesChanged:function(a,b){var c=this.options,d=this.columns;this.selectedRows=[];for(var e={},f=0;f<b.length;f++)for(var g=b[f].fromRow;g<=b[f].toRow;g++){e[g]||this.selectedRows.push(g);e[g]={};for(var h=b[f].fromCell;h<=b[f].toCell;h++)if(this.canCellBeSelected(g,
h))e[g][d[h].id]=c.selectedCellCssClass}this.setCellCssStyles(c.selectedCellCssClass,e);this.emit("selectedrowschanged",a,{rows:this.getSelectedRows()})},getColumns:function(){return this.columns},setColumns:function(a){this.columns=a;this.initialized&&(this.setPaneVisibility(),this.setOverflow(),this.invalidateAllRows(),this.createColumnHeaders(),this.removeCssRules(),this.createCssRules(),this.updateCanvasWidth(),this.resizeCanvas(),this.applyColumnWidths(),this.handleScroll())},getOptions:function(){return this.options},
setOptions:function(a){if(this.getEditorLock().commitCurrentEdit())this.makeActiveCellNormal(),this.options.enableAddRow!==a.enableAddRow&&this.invalidateRow(this.getDataLength()),this.options=h.mixin({},this.defaults,a),this.setScroller(),this.setColumns(this.columns),this.render()},getDataLength:function(){var a=this.data;return a.getLength?a.getLength():a.length},getDataItem:function(a){var b=this.data;return b.getItem?b.getItem(a):b[a]},getTopPanel:function(){return this.$topPanel[0]},showTopPanel:function(){this.options.showTopPanel=
!0;this.$topPanelScrollerL.style.display="block";this.$topPanelScrollerR.style.display="block";this.resizeCanvas()},hideTopPanel:function(){this.options.showTopPanel=!1;this.$topPanelScrollerL.style.display="none";this.$topPanelScrollerR.style.display="none";this.resizeCanvas()},showHeaderRowColumns:function(){this.options.showHeaderRow=!0;this.$headerRowScrollerL.style.display="block";this.$headerRowScrollerR.style.display="block";this.resizeCanvas()},hideHeaderRowColumns:function(){this.options.showHeaderRow=
!1;this.$headerRowScrollerL.style.display="none";this.$headerRowScrollerR.style.display="none";this.resizeCanvas()},scrollTo:function(a){var b=this.options,c=this.offset;this.page=Math.min(this.n-1,Math.floor(a/this.ph));this.offset=Math.round(this.page*this.cj);var d=a-this.offset;if(this.offset!=c){var e=this.getVisibleRange(d);this.cleanupRows(e.top,e.bottom);this.updateRowPositions()}a=Math.ceil(Math.abs(a/b.rowHeight));if(this.prevScrollTop!=d){this.scrollDir=this.prevScrollTop+c<d+this.offset?
1:-1;this.lastRenderedScrollTop=this.scrollTop=this.prevScrollTop=d;c=b.rowHeight*a;if(-1<b.frozenColumn)this.$viewportTopR.scrollTop=c;if(-1<b.frozenRow)this.$viewportBottomL.scrollTop=$viewportBottomR.scrollTop=c;this.$viewportTopL.scrollTop=d;this.emit("viewportchanged",{})}},defaultFormatter:function(a,b,c){return null==c?"":c.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},getFormatter:function(a,b){var c=this.options,d=this.data,e=(d=d.getItemMetadata&&d.getItemMetadata(a))&&
d.columns&&(d.columns[b.id]||d.columns[this.getColumnIndex(b.id)]);return e&&e.formatter||d&&d.formatter||b.formatter||c.formatterFactory&&c.formatterFactory.getFormatter(b)||c.defaultFormatter},getEditor:function(a,b){var l;var c=this.data,d=this.options,e=this.columns[b];return(l=(c=c.getItemMetadata&&c.getItemMetadata(a))&&c.columns,c=l)&&c[e.id]&&void 0!==c[e.id].editor?c[e.id].editor:c&&c[b]&&void 0!==c[b].editor?c[b].editor:e.editor||d.editorFactory&&d.editorFactory.getEditor(e)},getDataItemValueForColumn:function(a,
b){var c=this.options;return c.dataItemColumnValueExtractor?c.dataItemColumnValueExtractor(a,b):a[b.field]},appendRowHtml:function(a,b,c){var d=this.columns,e=this.options,f=this.getDataItem(c),g;g="slick-row "+(c<this.getDataLength()&&!f?" loading":"")+(1==c%2?" odd":" even");var h=this.data.getItemMetadata&&this.data.getItemMetadata(c);h&&h.cssClasses&&(g+=" "+h.cssClasses);g="<div class='ui-widget-content "+g+"' row='"+c+"' style='top:"+(e.rowHeight*c-this.offset-(-1<e.frozenRow&&c>=e.frozenRow?
e.rowHeight*e.frozenRow:0))+"px'>";a.push(g);-1<e.frozenColumn&&b.push(g);for(var i,j=0,k=d.length;j<k;j++){i=d[j];h=this.getColspan(c,j);g="slick-cell l"+j+" r"+Math.min(d.length-1,j+h-1)+(i.cssClass?" "+i.cssClass:"");c===this.activeRow&&j===this.activeCell&&(g+=" active");i.rowspan&&0==c%i.rowspan&&(g+=" rowspan"+i.rowspan);for(var m in this.cellCssClasses)this.cellCssClasses[m][c]&&this.cellCssClasses[m][c][i.id]&&(g+=" "+this.cellCssClasses[m][c][i.id]);-1<e.frozenColumn&&j>e.frozenColumn?b.push("<div class='"+
g+"'>"):a.push("<div class='"+g+"'>");f&&(-1<e.frozenColumn&&j>e.frozenColumn?b.push(this.getFormatter(c,i)(c,j,this.getDataItemValueForColumn(f,i),i,f,this)):a.push(this.getFormatter(c,i)(c,j,this.getDataItemValueForColumn(f,i),i,f,this,a)));-1<e.frozenColumn&&j>e.frozenColumn?b.push("</div>"):a.push("</div>");h&&(j+=h-1)}a.push("</div>");-1<e.frozenColumn&&b.push("</div>")},cleanupRows:function(a){var b=this.options,c=this.rowsCache,d=this.activeRow,e;for(e in c)(e=parseInt(e,10))!==d&&(e<a.top||
e>a.bottom)&&(-1<b.frozenRow?e>=b.frozenRow:1)&&this.removeRowFromCache(e)},invalidate:function(){this.updateRowCount();this.invalidateAllRows();this.render()},invalidateAllRows:function(){var a=this.rowsCache;this.currentEditor&&this.makeActiveCellNormal();for(var b in a)this.removeRowFromCache(b)},removeRowFromCache:function(a){this.rowsCache[a]&&(A.forEach(this.$canvas,function(b){m('.slick-row[row="'+a+'"]',b).forEach(j.destroy)}),delete this.rowsCache[a],delete this.postProcessedRows[a],this.renderedRows--,
this.counter_rows_removed++)},invalidateRows:function(a){var b=this.rowsCache,c,d;if(a&&a.length){this.scrollDir=0;for(c=0,d=a.length;c<d;c++)this.currentEditor&&this.activeRow===a[c]&&this.makeActiveCellNormal(),b[a[c]]&&this.removeRowFromCache(a[c])}},invalidateRow:function(a){this.invalidateRows([a])},updateCell:function(a,b){var c=this.columns,d=this.getCellNode(a,b);if(d){var c=c[b],e=this.getDataItem(a);this.currentEditor&&this.activeRow===a&&this.activeCell===b?this.currentEditor.loadValue(e):
(d.innerHTML=e?this.getFormatter(a,c)(a,b,this.getDataItemValueForColumn(e,c),c,e):"",this.invalidatePostProcessingResults(a))}},updateRow:function(a,b){var c=this,d=c.rowsCache,e=c.columns;if(d[a]){var f=0;m.NodeList(d[a]).children().forEach(function(d,g){var h=e[f],i=b||c.getDataItem(a);a===c.activeRow&&g===c.activeCell&&c.currentEditor?c.currentEditor.loadValue(c.getDataItem(c.activeRow)):d.innerHTML=i?c.getFormatter(a,h)(a,f,c.getDataItemValueForColumn(i,h),h,i,c):"";f+=c.getColspan(a,g)});c.invalidatePostProcessingResults(a)}},
getViewportHeight:function(){var a=this.options;return parseFloat(g.get(this.domNode,"height"))-parseFloat(this.$headerScroller.style("height"))-this.getVBoxDelta(this.$headerScroller)-(a.showTopPanel?a.topPanelHeight+this.getVBoxDelta(this.$topPanelScroller):0)-(a.showHeaderRow?a.headerRowHeight+this.getVBoxDelta(this.$headerRowScroller):0)},resizeCanvas:function(){var a=this.options,b=this.viewportH,c=this.viewportW,d=this.domNode;if(this.initialized){b=a.autoHeight?this.viewportH=a.rowHeight*(this.getDataLength()+
(a.enableAddRow?1:0)+(a.leaveSpaceForNewRows?this.numVisibleRows-1:0)):this.viewportH=this.getViewportHeight();this.numVisibleRows=Math.ceil(b/a.rowHeight);c=this.viewportW=g.get(d,"width");g.set(this.$viewportTopL,"width",c?c+"px":"auto");d=-1<a.frozenRow?a.rowHeight*a.frozenRow+parseFloat(g.get(this.$headerScrollerL,"height"))+this.getVBoxDelta(this.$headerScrollerL)+(a.showTopPanel?a.topPanelHeight+this.getVBoxDelta(this.$topPanelScroller):0)+(a.showHeaderRow?a.headerRowHeight+this.getVBoxDelta(this.$headerRowScroller):
0):parseFloat(g.get(d,"height"));g.set(this.$paneTopL,"height",d+"px");var e=-1<a.frozenRow?a.rowHeight*a.frozenRow:b;g.set(this.$viewportTopL,"height",e+"px");parseFloat(g.get(this.$headerScrollerL,"height"));this.getVBoxDelta(this.$headerScrollerL);a.showTopPanel&&this.getVBoxDelta(this.$topPanelScrollerL);a.showHeaderRow&&this.getVBoxDelta(this.$headerRowScrollerL);b-=e;-1<a.frozenColumn?(g.set(this.$paneTopR,"left",this.panelTopLWidthOnFrozenColumn+"px"),g.set(this.$viewportTopL,"width",this.canvasWidthL+
"px"),g.set(this.$paneTopR,"height",d+"px"),g.set(this.$viewportTopR,"height",e+"px"),g.set(this.$viewportTopR,"width",c-this.panelTopLWidthOnFrozenColumn+"px"),-1<a.frozenRow&&(g.set(this.$paneBottomL,"top",d+"px"),g.set(this.$paneTopR,"height",d+"px"),g.set(this.$paneBottomR,{top:d+"px",left:this.panelTopLWidthOnFrozenColumn+"px"}),g.set(this.$viewportBottomR,"width",c-this.canvasWidthL+"px"),g.set(this.$viewportBottomR,"height",b+"px"))):(g.set(this.$paneTopL,{width:"100%"}),g.set(this.$headerScrollerL,
{width:"100%"}),g.set(this.$headerRowScrollerL,{width:"100%"}),-1<a.frozenRow&&g.set(this.$paneBottomL,{top:d+"px",width:"100%"}));-1<a.frozenRow?(g.set(this.$paneTopR,"height",d+"px"),g.set(this.$viewportBottomL,"height",b+"px"),g.set(this.$canvasTopL,"height",a.frozenRow*a.rowHeight+"px"),g.set(this.$canvasTopR,"height",a.frozenRow*a.rowHeight+"px")):(g.set(this.$paneTopR,"height",d+"px"),g.set(this.$viewportTopR,"height",e+"px"));a.forceFitColumns&&this.autosizeColumns();this.updateRowCount();
this.render()}},updateRowCount:function(){var a=this.options;if(this.initialized){var b=-1<a.frozenRow?g.get(this.$canvasBottomL,"height"):g.get(this.$canvasTopL,"height");this.numberOfRows=this.getDataLength()+(a.enableAddRow?1:0)+(a.leaveSpaceForNewRows?this.numVisibleRows-1:0);var c=this.viewportHasVScroll;this.viewportHasVScroll=!a.autoHeight&&this.numberOfRows*a.rowHeight>this.viewportH;var d=a.enableAddRow?this.getDataLength():this.getDataLength()-1,e;for(e in this.rowsCache)e>d&&this.removeRowFromCache(e);
this.th=Math.max(a.rowHeight*this.numberOfRows,this.viewportH-this.scrollbarDimensions.height);this.th<this.maxSupportedCssHeight?(this.h=this.ph=this.th,this.n=1,this.cj=0):(this.h=this.maxSupportedCssHeight,this.ph=this.h/100,this.n=Math.floor(this.th/this.ph),this.cj=(this.th-this.h)/(this.n-1));if(this.h!==b)-1<a.frozenRow?(g.set(this.$canvasBottomL,"height",this.h-a.frozenRow*a.rowHeight+"px"),g.set(this.$canvasBottomR,"height",this.h-a.frozenRow*a.rowHeight+"px")):(g.set(this.$canvasTopL,"height",
this.h+"px"),g.set(this.$canvasTopR,"height",this.h+"px")),this.scrollTop=this.$viewportScrollContainer.scrollTop;d=this.scrollTop+this.offset<=this.th-this.viewportH;0==this.th||0==this.scrollTop?this.page=this.offset=0:d?this.scrollTo(this.scrollTop+this.offset):this.scrollTo(this.th-this.viewportH);this.h!=b&&a.autoHeight&&this.resizeCanvas();a.forceFitColumns&&c!=this.viewportHasVScroll&&this.autosizeColumns();this.updateCanvasWidth(!1)}},getVisibleRange:function(a){var b=this.options;if(null==
a)a=this.scrollTop;return{top:Math.floor((a+this.offset)/b.rowHeight),bottom:Math.ceil((a+this.offset+this.viewportH)/b.rowHeight)}},getRenderedRange:function(a){var b=this.options,a=this.getVisibleRange(a),c=Math.round(this.viewportH/b.rowHeight);-1==this.scrollDir?(a.top-=c,a.bottom+=3):1==this.scrollDir?(a.top-=3,a.bottom+=c):(a.top-=3,a.bottom+=3);a.top=Math.max(0,a.top);a.bottom=Math.min(b.enableAddRow?this.getDataLength():this.getDataLength()-1,a.bottom);return a},renderRows:function(a){var b=
this.options,c=this.rowsCache,d,e,f=this.renderedRows;e=[];var g=[],h=[],i=new Date,k=!1;for(d=a.top;d<=a.bottom;d++)c[d]||(this.renderedRows++,h.push(d),this.appendRowHtml(e,g,d),this.activeCellNode&&this.activeRow===d&&(k=!0),this.counter_rows_rendered++);if(h.length){var a=document.createElement("div"),n=document.createElement("div");a.innerHTML=e.join("");n.innerHTML=g.join("");for(d=0,e=a.childNodes.length;d<e;d++)c[h[d]]=-1<b.frozenRow&&h[d]>=b.frozenRow?-1<b.frozenColumn?m.NodeList([j.place(a.firstChild,
this.$canvasBottomL),j.place(n.firstChild,this.$canvasBottomR)]):m.NodeList(a.firstChild).appendTo(this.$canvasBottomL):-1<b.frozenColumn?m.NodeList(a.firstChild).appendTo(this.$canvasTopL).concat(m.NodeList(n.firstChild).appendTo(this.$canvasTopR)):m.NodeList(a.firstChild).appendTo(this.$canvasTopL);if(k)this.activeCellNode=this.getCellNode(this.activeRow,this.activeCell);if(5<this.renderedRows-f)this.avgRowRenderTime=(new Date-i)/(this.renderedRows-f)}},startPostProcessing:function(){var a=this.options;
if(a.enableAsyncPostRender)clearTimeout(this.h_postrender),this.h_postrender=setTimeout(this.asyncPostProcessRows,a.asyncPostRenderDelay)},invalidatePostProcessingResults:function(a){delete this.postProcessedRows[a];this.postProcessFromRow=Math.min(this.postProcessFromRow,a);this.postProcessToRow=Math.max(this.postProcessToRow,a);this.startPostProcessing()},updateRowPositions:function(){var a=this.rowsCache,b=this.options,c;for(c in a)a[c].style.top=c*b.rowHeight-this.offset+"px"},render:function(){var a=
this.options;if(this.initialized){var b=this.getVisibleRange(),c=this.getRenderedRange();this.cleanupRows(c);this.renderRows(c);this.postProcessFromRow=b.top;this.postProcessToRow=Math.min(a.enableAddRow?this.getDataLength():this.getDataLength()-1,b.bottom);this.startPostProcessing();this.lastRenderedScrollTop=this.scrollTop;this.h_render=null}},handleScroll:function(a,b){var b=b||this,c=b.options,d=-1<c.frozenColumn?b.$headerScrollerR:b.$headerScrollerL,e=-1<c.frozenColumn?b.$headerRowScrollerR:
b.$headerRowScrollerL;b.scrollTop=b.$viewportScrollContainer.scrollTop;var f=b.$viewportScrollContainer.scrollLeft,g=Math.abs(b.scrollTop-b.prevScrollTop);if(f!==b.prevScrollLeft)if(b.prevScrollLeft=f,d.scrollLeft=f,b.$topPanelScrollerL.scrollLeft=f,e.scrollLeft=f,-1<c.frozenColumn){if(-1<c.frozenRow)b.$viewportTopR.scrollLeft=f}else if(-1<c.frozenRow)b.$viewportTopL.scrollLeft=f;if(g){b.scrollDir=b.prevScrollTop<b.scrollTop?1:-1;b.prevScrollTop=b.scrollTop;g<b.viewportH?b.scrollTo(b.scrollTop+b.offset):
(d=b.offset,b.page=Math.min(b.n-1,Math.floor(b.scrollTop*((b.th-b.viewportH)/(b.h-b.viewportH))*(1/b.ph))),b.offset=Math.round(b.page*b.cj),d!=b.offset&&b.invalidateAllRows());if(-1<c.frozenColumn&&-1==c.frozenRow)b.$viewportTopL.scrollTop=b.scrollTop;else if(-1<c.frozenRow)b.$viewportBottomL.scrollTop=b.scrollTop;b.h_render&&clearTimeout(b.h_render);Math.abs(b.lastRenderedScrollTop-b.scrollTop)<b.viewportH?(b.render(),b.emit("viewportchanged",{})):b.h_render=setTimeout(function(){b.render();b.emit("viewportchanged",
{})},32)}b.emit("scroll",a,{scrollLeft:f,scrollTop:b.scrollTop})},handleMouseWheel:function(a,b){var b=b||0<a.wheelDelta?1:-1,c=this.getVisibleRange();if(0<b){if(0==c.top)return;this.scrollRowIntoView(c.top-b,!1)}else this.scrollRowIntoView(c.bottom-2+Math.abs(b),!1);a.preventDefault()},asyncPostProcessRows:function(){for(;this.postProcessFromRow<=this.postProcessToRow;){var a=0<=this.scrollDir?this.postProcessFromRow++:this.postProcessToRow--,b=this.rowsCache[a];if(b&&!(this.postProcessedRows[a]||
a>=this.getDataLength())){for(var c=this.getDataItem(a),b=b.childNodes,d=0,e=0,f=this.columns.length;d<f;++d){var g=this.columns[d];g.asyncPostRender&&g.asyncPostRender(b[e],this.postProcessFromRow,c,g);++e}this.postProcessedRows[a]=!0;this.h_postrender=setTimeout(this.asyncPostProcessRows,this.options.asyncPostRenderDelay);break}}},updateCellCssStylesOnRenderedRows:function(a,b){var c=this.rowsCache,d,e,f,g,h;for(h in c){g=b&&b[h];f=a&&a[h];if(g)for(e in g)if(!f||g[e]!=f[e])(d=this.getCellNode(h,
this.getColumnIndex(e)))&&u.remove(d,g[e]);if(f)for(e in f)if(!g||g[e]!=f[e])(d=this.getCellNode(h,this.getColumnIndex(e)))&&u.add(d,f[e])}},addCellCssStyles:function(a,b){if(this.cellCssClasses[a])throw"addCellCssStyles: cell CSS hash with key '"+a+"' already exists.";this.cellCssClasses[a]=b;this.updateCellCssStylesOnRenderedRows(b,null);this.emit("cellcssstyleschanged",{},{key:a,hash:b})},removeCellCssStyles:function(a){this.cellCssClasses[a]&&(this.updateCellCssStylesOnRenderedRows(null,this.cellCssClasses[a]),
delete this.cellCssClasses[a],this.emit("cellcssstyleschanged",{},{key:a,hash:null}))},setCellCssStyles:function(a,b){var c=this.cellCssClasses[a];this.cellCssClasses[a]=b;this.updateCellCssStylesOnRenderedRows(b,c);this.emit("cellcssstyleschanged",{},{key:a,hash:b})},getCellCssStyles:function(a){return this.cellCssClasses[a]},flashCell:function(a,b,c){var d=this.options,e=this.rowsCache,c=c||100;if(e[a]){var f=this.getCellNode(a,b),g=function(a){a&&setTimeout(function(){u.toggle(f,d.cellFlashingCssClass);
g(a-1)},c)};g(4)}},handleDragInit:function(a,b){var c=this.getCellFromEvent(a);if(!c||!this.cellExists(c.row,c.cell))return!1;c=this.emit("draginit",a,b);return a.isImmediatePropagationStopped&&a.isImmediatePropagationStopped()?c:!1},handleDragStart:function(a,b){var c=this.getCellFromEvent(a);if(!c||!this.cellExists(c.row,c.cell))return!1;c=this.emit("draginit",a,b);return a.isImmediatePropagationStopped&&a.isImmediatePropagationStopped()?c:!1},handleDrag:function(a,b){return this.emit("draginit",
{data:b})},handleDragEnd:function(a,b){this.emit("dragend",{data:b})},handleKeyDown:function(a,b){var b=b||this,c=b.options;b.emit("keydown",a,{row:b.activeRow,cell:b.activeCell});if(!a.isImmediatePropagationStopped||!a.isImmediatePropagationStopped())if(!a.shiftKey&&!a.altKey&&!a.ctrlKey)if(27==a.which){if(!b.getEditorLock().isActive())return;b.cancelEditAndSetFocus()}else if(37==a.which)b.navigateLeft();else if(39==a.which)b.navigateRight();else if(38==a.which)b.navigateUp();else if(40==a.which)b.navigateDown();
else if(9==a.which)b.navigateNext();else if(13==a.which)c.editable&&(b.currentEditor?b.activeRow===b.getDataLength()?b.navigateDown():b.commitEditAndSetFocus():b.getEditorLock().commitCurrentEdit()&&b.makeActiveCellEditable());else return;else if(9==a.which&&a.shiftKey&&!a.ctrlKey&&!a.altKey)b.navigatePrev();else return;a.stopPropagation();a.preventDefault();try{a.originalEvent.keyCode=0}catch(d){}},handleClick:function(a,b){var b=b||this,c=b.options;b.currentEditor||b.setFocus();var d=b.getCellFromEvent(a);
if(d&&!(null!==b.currentEditor&&b.activeRow==d.row&&b.activeCell==d.cell)&&(c.enableColumnHigeLight&&b.setColHighLight(d.cell),b.emit("click",a,{row:d.row,cell:d.cell}),!a.isImmediatePropagationStopped||!a.isImmediatePropagationStopped()))if(b.canCellBeActive(d.row,d.cell)&&(!b.getEditorLock().isActive()||b.getEditorLock().commitCurrentEdit()))-1<c.frozenRow&&d.row>=c.frozenRow&&b.scrollRowIntoView(d.row,!1),b.setActiveCellInternal(b.getCellNode(d.row,d.cell),d.row===b.getDataLength()||c.autoEdit)},
handleContextMenu:function(a){var b=m.NodeList(a.target).closest(".slick-cell");0===b.length||this.activeCellNode===b[0]&&null!==this.currentEditor||this.emit("contextmenu",a,{})},handleDblClick:function(a){var b=this.options,c=this.getCellFromEvent(a);c&&!(null!==this.currentEditor&&this.activeRow==c.row&&this.activeCell==c.cell)&&(this.emit("dblclick",a,{row:c.row,cell:c.cell}),(!a.isImmediatePropagationStopped||!a.isImmediatePropagationStopped())&&b.editable&&this.gotoCell(c.row,c.cell,!0))},handleHeaderContextMenu:function(a){var b=
this.columns,c=m.NodeList(a.target).closest(".slick-header-columns > .slick-header-column").pop(),b=c&&b[this.getColumnIndex(y.get(c,"fieldid"))];this.emit("headercontextmenu",a,{column:b})},handleHeaderClick:function(a,b){var b=b||this,c=b.columns,d=b.options,e=m.NodeList(a.target).closest(".slick-header-columns > .slick-header-column").pop();if(c=e&&c[b.getColumnIndex(y.get(e,"fieldid"))])d.enableColumnHigeLight&&b.setColHighLight(c.cell),b.emit("headerclick",a,{column:c})},handleMouseOver:function(a){var b=
m(a.target).closest(".slick-row").attr("row")[0];this.rowsCache[b].addClass("row-hover");this.emit("mouseover",a,{row:b})},handleMouseOut:function(a){var b=m(a.target).closest(".slick-row").attr("row")[0];this.rowsCache[b].removeClass("row-hover");this.emit("mouseout",a,{row:b})},cellExists:function(a,b){var c=this.columns;return!(0>a||a>=this.getDataLength()||0>b||b>=c.length)},getCellFromPoint:function(a,b){for(var c=Math.floor((b+this.offset)/this.options.rowHeight),d=0,e=0,f=0;f<columns.length&&
e<a;f++)e+=columns[f].width,d++;0>d&&(d=0);return{row:c,cell:d-1}},getCellFromNode:function(a){var b=/l\d+/.exec(a.className);if(!b)throw"getCellFromNode: cannot get cell - "+a.className;return parseInt(b[0].substr(1,b[0].length-1),10)},getCellFromEvent:function(a){a=m.NodeList(a.target).closest(".slick-cell",this.id&&this.id);return!a.length?null:{row:a.parent().attr("row")|0,cell:this.getCellFromNode(a[0])}},getCellNodeBox:function(a,b){var c=this.options,d=this.columns;if(!this.cellExists(a,b))return null;
for(var e=a*c.rowHeight-this.offset,c=e+c.rowHeight-1,f=0,g=0;g<b;g++)f+=d[g].width;return{top:e,left:f,bottom:c,right:f+d[b].width}},resetActiveCell:function(){this.setActiveCellInternal(null,!1)},setFocus:function(){this.$focusSink.focus()},scrollActiveCellIntoView:function(){var a=this.options;if(this.activeCellNode){if(-1<a.frozenRow&&this.activeRow>=a.frozenRow){var b=(this.activeRow-a.frozenRow)*a.rowHeight;if(b<this.$viewportScrollContainer.scrollTop)this.$viewportScrollContainer.scrollTop=
b}if(!(-1<a.frozenColumn&&0==m.NodeList(this.activeCellNode).parents(".slick-viewport-right").length)){var a=this.$viewportScrollContainer.scrollLeft,c=o.position(this.activeCellNode),b=c.x,c=b+c.w,d=a+this.$viewportScrollContainer.width();if(b<a)this.$viewportScrollContainer.scrollLeft=b;else if(c>d)this.$viewportScrollContainer.scrollLeft=Math.min(b,c-this.$viewportTopR.clientWidth)}}},setActiveCellInternal:function(a,b){var c=this,d=c.activeCellNode,e=c.options;null!==d&&(c.makeActiveCellNormal(),
u.remove(d,"active"));var f=d!==a,d=c.activeCellNode=a;null!=d?(c.activeRow=parseInt(y.get(d.parentNode,"row")),c.activeCell=c.activePosX=c.getCellFromNode(d),u.add(d,"active"),e.editable&&b&&c.isCellPotentiallyEditable(c.activeRow,c.activeCell)?(clearTimeout(c.h_editorLoader),e.asyncEditorLoading?c.h_editorLoader=setTimeout(function(){c.makeActiveCellEditable()},e.asyncEditorLoadDelay):c.makeActiveCellEditable()):c.setFocus()):c.activeRow=c.activeCell=null;f&&(setTimeout(c.scrollActiveCellIntoView,
50),c.emit("activecellchanged",{},c.getActiveCell()))},clearTextSelection:function(){if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){var a=window.getSelection();a&&a.removeAllRanges&&a.removeAllRanges()}},isCellPotentiallyEditable:function(a,b){var c=this.columns;return a<this.getDataLength()&&!this.getDataItem(a)||c[b].cannotTriggerInsert&&a>=this.getDataLength()||!this.getEditor(a,b)?!1:!0},makeActiveCellNormal:function(){var a=this.columns;
if(this.currentEditor){this.emit("beforecelleditordestroy",{},{editor:this.currentEditor});this.currentEditor.destroy();this.currentEditor=null;if(this.activeCellNode){var b=this.getDataItem(this.activeRow);m.NodeList(this.activeCellNode).removeClass("editable invalid");if(b)a=a[activeCell],this.getFormatter(activeRow,a),this.activeCellNode.innerHTML=this.formatter(this.activeRow,this.activeCell,this.getDataItemValueForColumn(b,a),a,this.getDataItem(this.activeRow)),this.invalidatePostProcessingResults(activeRow)}$.browser.msie&&
this.clearTextSelection();this.getEditorLock().deactivate(editController)}},makeActiveCellEditable:function(a){var b=this.columns;if(this.activeCellNode){if(!options.editable)throw"Grid : makeActiveCellEditable : should never get called when options.editable is false";clearTimeout(this.h_editorLoader);if(this.isCellPotentiallyEditable(this.activeRow,this.activeCell)){var b=b[this.activeCell],c=this.getDataItem(this.activeRow);if(!1===this.emit("beforeeditcell",{row:this.activeRow,cell:this.activeCell,
item:c,column:b}))this.setFocus();else{this.getEditorLock().activate(editController);m.NodeList(this.activeCellNode).addClass("editable");if(!a)this.activeCellNode.innerHTML="";this.currentEditor=new (a||this.getEditor(this.activeRow,this.activeCell))({grid:this,gridPosition:this.absBox($container[0]),position:this.absBox(this.activeCellNode),container:this.activeCellNode,column:b,item:c||{},commitChanges:this.commitEditAndSetFocus,cancelChanges:this.cancelEditAndSetFocus});c&&this.currentEditor.loadValue(c);
this.serializedEditorValue=this.currentEditor.serializeValue();this.currentEditor.position&&this.handleActiveCellPositionChange()}}}},commitEditAndSetFocus:function(){var a=this.options;this.getEditorLock().commitCurrentEdit()&&(this.setFocus(),a.autoEdit&&this.navigateDown())},cancelEditAndSetFocus:function(){this.getEditorLock().cancelCurrentEdit()&&this.setFocus()},absBox:function(a){var b=o.getMarginBox(a),b={top:a.offsetTop,left:a.offsetLeft,bottom:0,right:0,width:b.w,height:b.h,visible:!0};
b.bottom=b.top+b.height;b.right=b.left+b.width;for(var c=a.offsetParent;(a=a.parentNode)!=document.body;){if(b.visible&&a.scrollHeight!=a.offsetHeight&&"visible"!=g.get(a,"overflowY"))b.visible=b.bottom>a.scrollTop&&b.top<a.scrollTop+a.clientHeight;if(b.visible&&a.scrollWidth!=a.offsetWidth&&"visible"!=g.get(a,"overflowX"))b.visible=b.right>a.scrollLeft&&b.left<a.scrollLeft+a.clientWidth;b.left-=a.scrollLeft;b.top-=a.scrollTop;if(a===c)b.left+=a.offsetLeft,b.top+=a.offsetTop,c=a.offsetParent;b.bottom=
b.top+b.height;b.right=b.left+b.width}return b},getActiveCellPosition:function(){return this.absBox(this.activeCellNode)},getGridPosition:function(){return this.absBox(this.domNode)},handleActiveCellPositionChange:function(){var a=this.currentEditor;if(this.activeCellNode&&(this.emit("activecellpositionchanged",{}),a)){var b=this.getActiveCellPosition();a.show&&a.hide&&(b.visible?a.show():a.hide());a.position&&a.position(b)}},getCellEditor:function(){return this.currentEditor},getActiveCell:function(){return this.activeCellNode?
{row:this.activeRow,cell:this.activeCell}:null},getActiveCellNode:function(){return this.activeCellNode},scrollRowIntoView:function(a,b){var c=this.options,d=a*c.rowHeight,e=(a+1)*c.rowHeight-this.viewportH+(this.viewportHasHScroll?this.scrollbarDimensions.height:0);(a+1)*c.rowHeight>this.scrollTop+this.viewportH+this.offset?this.scrollTo(b?d:e):a*c.rowHeight<this.scrollTop+this.offset&&this.scrollTo(b?e:d);this.render()},getColspan:function(a,b){var e;var c=this.data,d=this.columns,c=c.getItemMetadata&&
c.getItemMetadata(a);if(!c||!c.columns)return 1;e=(c=c.columns[d[b].id]||c.columns[b])&&c.colspan,c=e;"*"===c&&(c=d.length-b);return c||1},findFirstFocusableCell:function(a){for(var b=this.columns,c=0;c<b.length;){if(this.canCellBeActive(a,c))return c;c+=this.getColspan(a,c)}return null},findLastFocusableCell:function(a){for(var b=this.columns,c=0,d=null;c<b.length;)this.canCellBeActive(a,c)&&(d=c),c+=this.getColspan(a,c);return d},gotoRight:function(a,b){var c=this.columns;if(b>=c.length)return null;
do b+=this.getColspan(a,b);while(b<c.length&&!this.canCellBeActive(a,b));return b<c.length?{row:a,cell:b,posX:b}:null},gotoLeft:function(a,b){if(0>=b)return null;var c=this.findFirstFocusableCell(a);if(null===c||c>=b)return null;for(var c={row:a,cell:c,posX:c},d;;){d=this.gotoRight(c.row,c.cell,c.posX);if(!d)return null;if(d.cell>=b)return c;c=d}},gotoDown:function(a,b,c){for(var d=this.options,e;;){if(++a>=this.getDataLength()+(d.enableAddRow?1:0))return null;for(e=b=0;b<=c;)e=b,b+=this.getColspan(a,
b);if(this.canCellBeActive(a,e))return{row:a,cell:e,posX:c}}},gotoUp:function(a,b,c){for(var d;;){if(0>--a)return null;for(d=b=0;b<=c;)d=b,b+=this.getColspan(a,b);if(this.canCellBeActive(a,d))return{row:a,cell:d,posX:c}}},gotoNext:function(a,b,c){var d=this.options;if(b=this.gotoRight(a,b,c))return b;for(b=null;++a<this.getDataLength()+(d.enableAddRow?1:0);)if(b=this.findFirstFocusableCell(a),null!==b)return{row:a,cell:b,posX:b};return null},gotoPrev:function(a,b,c){for(var d,e;!d&&!(d=this.gotoLeft(a,
b,c));){if(0>--a)return null;b=0;e=this.findLastFocusableCell(a);null!==e&&(d={row:a,cell:e,posX:e})}return d},navigateRight:function(){this.navigate("right")},navigateLeft:function(){this.navigate("left")},navigateDown:function(){this.navigate("down")},navigateUp:function(){this.navigate("up")},navigateNext:function(){this.navigate("next")},navigatePrev:function(){this.navigate("prev")},navigate:function(a){var b=this.options;if(this.activeCellNode&&b.enableCellNavigation&&this.getEditorLock().commitCurrentEdit())if(this.setFocus(),
a=(0,{up:h.hitch(this,"gotoUp"),down:h.hitch(this,"gotoDown"),left:h.hitch(this,"gotoLeft"),right:h.hitch(this,"gotoRight"),prev:h.hitch(this,"gotoPrev"),next:h.hitch(this,"gotoNext")}[a])(this.activeRow,this.activeCell,this.activePosX)){var c=a.row==this.getDataLength();-1<b.frozenRow?a.row>=b.frozenRow&&this.scrollRowIntoView(a.row,!c):this.scrollRowIntoView(a.row,!c);this.setActiveCellInternal(this.getCellNode(a.row,a.cell),c||b.autoEdit);this.activePosX=a.posX}else this.setActiveCellInternal(this.getCellNode(this.activeRow,
this.activeCell),this.activeRow==this.getDataLength()||b.autoEdit)},getCellNode:function(a,b){var c=this.rowsCache;if(c[a])for(var c=m.NodeList(c[a]).children(),d,e=0;e<c.length;e++){d=this.getCellFromNode(c[e]);if(d===b)return c[e];if(d>b)break}return null},setActiveCell:function(a,b){var c=this.columns,d=this.options;if(this.initialized&&!(a>this.getDataLength()||0>a||b>=c.length||0>b)&&d.enableCellNavigation)-1<d.frozenRow&&a>d.frozenRow&&this.scrollRowIntoView(a,!1),this.setActiveCellInternal(this.getCellNode(a,
b),!1)},canCellBeActive:function(a,b){var c=this.options,d=this.columns,e=this.data;if(!c.enableCellNavigation||a>=this.getDataLength()+(c.enableAddRow?1:0)||0>a||b>=d.length||0>b)return!1;return(c=e.getItemMetadata&&e.getItemMetadata(a))&&"boolean"===typeof c.focusable?c.focusable:(c=c&&c.columns)&&c[d[b].id]&&"boolean"===typeof c[d[b].id].focusable?c[d[b].id].focusable:c&&c[b]&&"boolean"===typeof c[b].focusable?c[b].focusable:"boolean"===typeof d[b].focusable?d[b].focusable:!0},canCellBeSelected:function(a,
b){var c=this.columns,d=this.data;if(a>=this.getDataLength()||0>a||b>=c.length||0>b)return!1;return(d=d.getItemMetadata&&d.getItemMetadata(a))&&"boolean"===typeof d.selectable?d.selectable:(d=d&&d.columns&&(d.columns[c[b].id]||d.columns[b]))&&"boolean"===typeof d.selectable?d.selectable:"boolean"===typeof c[b].selectable?c[b].selectable:!0},gotoCell:function(a,b,c){var d=this.options;this.initialized&&this.canCellBeActive(a,b)&&this.getEditorLock().commitCurrentEdit()&&(-1<d.frozenRow&&a>d.frozenRow&&
this.scrollRowIntoView(a,!1),this.setActiveCellInternal(this.getCellNode(a,b),c||a===this.getDataLength()||d.autoEdit),this.currentEditor||this.setFocus())},commitCurrentEdit:function(){var a=this,b=a.currentEditor,c=a.activeRow,d=a.activeCell,e=a.getDataItem(c),f=a.columns[d];if(b){if(b.isValueChanged()){var g=b.validate();if(g.valid)return c<a.getDataLength()?(b={row:c,cell:d,editor:b,serializedValue:b.serializeValue(),prevSerializedValue:a.serializedEditorValue,execute:function(){this.editor.applyValue(e,
this.serializedValue);a.updateRow(this.row)},undo:function(){this.editor.applyValue(e,this.prevSerializedValue);a.updateRow(this.row)}},a.options.editCommandHandler?(a.makeActiveCellNormal(),a.options.editCommandHandler(e,f,b)):(b.execute(),a.makeActiveCellNormal()),a.emit("cellchange",{row:c,cell:d,item:e})):(c={},b.applyValue(c,b.serializeValue()),a.makeActiveCellNormal(),a.emit("addnewrow",{item:c,column:f})),!a.getEditorLock().isActive();m.NodeList(a.activeCellNode).addClass("invalid");a.emit("onvalidationerror",
{editor:b,cellNode:a.activeCellNode,validationResults:g,row:c,cell:d,column:f});b.focus();return!1}a.makeActiveCellNormal()}return!0},cancelCurrentEdit:function(){this.makeActiveCellNormal();return!0},rowsToRanges:function(a){for(var b=[],c=this.columns.length-1,d=0;d<a.length;d++)b.push(new B.Range(a[d],0,a[d],c));return b},getSelectedRows:function(){if(!this.selectionModel)throw"Selection model is not set";return this.selectedRows},setSelectedRows:function(a){if(!this.selectionModel)throw"Selection model is not set";
this.selectionModel.setSelectedRanges(this.rowsToRanges(a))},setColHighLight:function(a){var b=this.columns;this.$viewport.query("div.col-high-light").removeClass("col-high-light");"undefined"!=typeof a&&(this.$viewport.query(".l"+a).addClass("col-high-light"),b.forEach(function(a){a.cssClass=a.cssClass.replace("col-high-light","")}),b[a].cssClass+=" col-high-light")},clearHighLight:function(a){if(0==m.NodeList(a.target).closest(".slickgrid").length){if("column"==this.options.clearHighLight)this.setColHighLight();
else if("row"==this.options.clearHighLight)this.setSelectedRows([]);else if("both"==this.options.clearHighLight)this.setColHighLight(),this.setSelectedRows([]);else return;null!=this.activeCellNode&&this.resetActiveCell()}}})});