/*
	Copyright (c) 2012-2013,   To get sources and documentation, please visit:

		http://dms.gw.com.cn
*/

//>>built
require({cache:{"dojox/customfig/themes/blackTheme":function(){define("dojox/customfig/themes/blackTheme",["dojo/_base/declare"],function(v){return v("dojox.customfig.themes.blackTheme",null,{com_de_opt:{label:"#FFFFFF",font:"12px Arial normal",stroke:"#C00000",background:"#000000",backgroundGrid:{type:"solid",color:"#C00000",height:25,lineHeight:1},xAxisLabel:{color:"#FFFFFF",background:"#FFFFFF"},yAxisLabel:{color:"#FFFFFF",background:"#FFFFFF"},xLabelsInterval:30,fixedNum:0,prepareDistance:0},
sharingPlans:{timetrendFilledColors:["#131313","#0073ff"],timetrendFillAlpha:0.7,timetrend:["#F59F56","red","yellow"],baseValueStyle:{color:"#FFFF52",background:"#FFFFFF"},yUpLabel:{color:"#FF0000",background:"#FFFFFF"},yDownLabel:{color:"#1FA42C",background:"#FFFFFF"}},kline:{candleStyle:[{upStyle:{candle:{type:"stroke",color:"#CC4642"}},downStyle:{candle:{type:"fill",color:"#00ff00"}}},{upStyle:{candle:{type:"stroke",color:"#5F9EA0"}},downStyle:{candle:{type:"fill",color:"#5F9EA0"}}},{upStyle:{candle:{type:"stroke",
color:"#C67413"}},downStyle:{candle:{type:"fill",color:"#C67413"}}},{upStyle:{candle:{type:"stroke",color:"#C67488"}},downStyle:{candle:{type:"fill",color:"#C67488"}}},{upStyle:{candle:{type:"stroke",color:"#C93413"}},downStyle:{candle:{type:"fill",color:"#C93413"}}}],maximumArrow:{color:"#c8c8c8"},minimumArrow:{color:"#c8c8c8"},yAxisUpLabel:{color:"#6f6060"},yAxisLowLabel:{color:"#30f060"}},ma:{ma:["green","red","blue"]},edx:{edx:{color:"#ff9516",yTxtColor:"#ff9516",txtColor:"#ffffff",txtBgColor:"#ff9516"}},
kdj:{kdj:["green","red","blue"]},vol:{volumnStyle:{upColor:"#ff0000",downColor:"#00ff00",color:"yellow"}},macd:{macdStyle:{diff:{color:"#9B9B9B"},dea:{color:"#BC6111"},macd:{upcolor:"#ff0000",downcolor:"#00ff00"}}},crosshair:{tooltip:{content:{background:"#000000",width:"auto",height:"auto",border:"#FFFFFF solid 1px","text-align":"center",position:"absolute",opacity:0.7,"z-index":2,"line-height":1.6,padding:"4px","font-size":"12px",color:"#FFFFFF"},time:{"font-weight":"normal",color:"#ffc13b"}},vLine:{width:"1px",
background:"#6B6B6B",position:"absolute","z-index":2},hLine:{height:"1px",background:"#6B6B6B",position:"absolute","z-index":2},vLabel:{border:"1px solid #C00000",color:"#C0C0C0","text-align":"center","z-index":2,position:"absolute",background:"#000080","margin-left":"3px"},hLabel:{border:"1px solid #C00000",color:"#C0C0C0","text-align":"center","z-index":2,position:"absolute",width:"auto",background:"#000080"}}})})},"platform/charts/view/utils":function(){define(["dojo/aspect","dojox/customfig/utils",
"dojox/customfig/mains/Kline","dojox/canvasDashedLine"],function(v,p,y,w){var t={lines:[],init:function(){this.render();requestAnimationFrame(arguments.callee.bind(this));return this},render:function(){if(this.lines.length)this.data=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),this.lines.forEach(function(e){this.drawBL.apply(this,e)},this),this.ctx.putImageData(this.data,0,0),this.data=void 0,this.lines.length=0},colorToRGB:function(e){return(e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec({aqua:"#00ffff",
black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"}[e]||e))?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:[0,0,0]},setPixel:function(e,a,c){e=4*(a*this.canvas.width+e);a=this.data.data;a[e]=c[0];a[e+1]=c[1];a[e+2]=c[2]},drawBL:function(e,a,c,f,g){if(e!==c||a!==f)for(var i=Math.abs(c-e),h=Math.abs(f-a),
m=e<c?1:-1,j=a<f?1:-1,n=i-h;!(e==c&&a==f);){this.setPixel(e,a,g);var k=2*n;k>-h&&(n-=h,e+=m);k<i&&(n+=i,a+=j)}},drawLine:function(e,a,c,f,g,i){if(!this.canvas)this.canvas=document.querySelector("canvas"),this.ctx=e,v.around(e,"measureText",function(a){return function(f){var g=a.call(this,f);if(f&&f.length)switch(!0){case /^\d\d:\d\d$/.test(f):return{width:g.width+20};case /^\d{4}\/\d\d\/\d\d$/.test(f):return{width:g.width+10}}return g}});i&&!isNaN(a)&&!isNaN(c)&&!isNaN(f)&&!isNaN(g)&&0<=a&&0<=f&&
this.lines.push([Math.round(a),Math.round(c),Math.round(f),Math.round(g),this.colorToRGB(i)])},drawDashes:function(e,a,c,f,g,i){a=Math.round(a)+(Math.round(a)<a?0.5:-0.5);c=Math.round(c)+(Math.round(c)<c?0.5:-0.5);f=Math.round(f)+(Math.round(f)<f?0.5:-0.5);g=Math.round(g)+(Math.round(g)<g?0.5:-0.5);"#600000"===i&&(a===f?c<g?(c+=1.5,g++):(c++,g+=1.5):c===g&&(a<f?(a++,f--):(a--,f++)));w.drawDashedPolyLine(e,[[a,c],[f,g]],{pattern:"-**-",color:i,scale:2})},drawRect:function(e,a,c,f,g,i){f=Math.round(a+
f);g=Math.round(c+g);a=Math.round(a);c=Math.round(c);f-=a;g-=c;50>f&&!(f%2)&&f++;i?(i=e.fillStyle,e.fillStyle=e.strokeStyle,e.fillRect(a,c,f,1),e.fillRect(a+f-1,c,1,g),e.fillRect(a,c+g,f,1),e.fillRect(a,c,1,g),e.fillStyle=i):e.fillRect(a,c,f,g)},drawText:function(e,a,c,f,g){"top"===g.textBaseline&&(arguments[3]=f+5);return arguments}}.init();p.drawline=t.drawLine.bind(t);p.drawDashes=t.drawDashes.bind(t);p.drawRect=t.drawRect.bind(t);p.from5StrToHM=function(e,a){a=(new Date(+new Date((new Date(new Date-
6E4*(new Date).getTimezoneOffset())).toJSON().slice(0,10))+1E3*a)).toJSON().slice(11,16);return"%h%m"===e?a.replace(":",""):a};v.before(p,"clearCanvas",t.render.bind(t));v.before(p,"drawText",t.drawText.bind(t));y.prototype.drawCandle=function(e,a,c,f,g,i){var h=this.ctx,m=this.options,j=this.ymin,n=this.yStart+this.height-m.bottomSpacing,k=m.prepareDistance,x=this.yAxisScale,q=this.cwidth,o=this.csize,d=this.xStart,b=m.candleStyle,m=n-(e-j)*x,a=n-(a-j)*x,c=n-(c-j)*x,j=n-(f-j)*x;f>e?(e=m-j,j===m&&
(e=1),g=b[g].upStyle.candle.color,h.strokeStyle=g,1<o?(i=k+i*q+d,o=Math.floor(o)+Math.floor(o)%2,k=Math.round(i)+Math.floor(o/2),p.drawRect(h,i,j,o,e,!0),p.drawline(h,k,a,k,j,g,1),p.drawline(h,k,m,k,c,g,1)):(i=k+i*q+d+o/2,p.drawline(h,i,a,i,c,g,1))):(e=j-m,j===m&&(e=1),g=b[g].downStyle.candle.color,h.fillStyle=g,1<o?(i=k+i*q+d,o=Math.floor(o)+(Math.floor(o)%2?0:1),k=Math.round(i)+Math.floor(o/2),p.drawRect(h,i,m,o,e,!1),p.drawline(h,k,a,k,j,g,1),p.drawline(h,k,m,k,c,g,1)):(i=k+i*q+d+o/2,p.drawline(h,
i,a,i,c,g,1)))};return p})},"platform/charts/view/Crosshair":function(){define("../../../dojo/_base/declare,dijit/_WidgetBase,dijit/_TemplatedMixin,dojo/_base/lang,dojo/_base/connect,dojox/customfig/utils,dojo/dom-style,dojo/dom-construct,dojo/dom-geometry,dojo/dom,dojo/cssScale".split(","),function(v,p,y,w,t,e,a,c,f,g,i){var h=function(d,b,r,s){var a;if(d[r])return(a=d[r][b])?a=s?d[r][b-1]?d[r][b-1]:0:a:(b=s?d[r].length-2:d[r].length-1,a=d[r][b]),a},m=function(d){for(var b=0,r=0,s=d.length;r<s;r++)b+=
+d[r];return b},j=function(d,b,r,s){var a=0,s=s||0;b++;d[r]&&(a=b>d[r].length?m(d[r].slice(s))/d[r].slice(s).length:m(d[r].slice(s,b))/(b-s));return a},n=function(d){return{"\u65f6\u3000\u95f4":{field:"time",fn:function(b,d,s){return(b=h(b,d,s))?e.millisecond2Date("%H:%M",b):"--"}},"\u4ef7\u3000\u683c":{field:"price",fn:function(b,r,s){return(b=h(b,r,s))?(+b).toFixed(d):"--"}},"\u5747\u3000\u4ef7":{field:"price",fn:function(b,r,s,a){return j(b,r,s,a).toFixed(d)}},"\u6da8\u3000\u8dcc":{field:"price",
fn:function(b,r,a){r=h(b,r,a);b=h(b,0,"lastclose");return r&&b?(r-b).toFixed(d):0}},"\u5e45\u3000\u5ea6":{field:"price",fn:function(b,d,a){d=h(b,d,a);b=h(b,0,"lastclose");return(d&&b?(100*(d/b-1)).toFixed(2):0)+"%"}},"\u6210\u4ea4\u91cf":{field:"volume",fn:function(b,d,a){var f=h(b,d,a),b=h(b,d,a,!0);return f&&b?f-b:0}}}},k=function(d){return{"\u65f6\u3000\u95f4":{field:"time",fn:function(b,d,a){return(b=h(b,d,a))?b:"--"}},"\u5f00\u76d8\u4ef7":{field:"open",fn:function(b,a,f){return(b=h(b,a,f))?(+b).toFixed(d):
"--"}},"\u6700\u9ad8\u4ef7":{field:"high",fn:function(b,a,f){return(b=h(b,a,f))?(+b).toFixed(d):"--"}},"\u6700\u4f4e\u4ef7":{field:"low",fn:function(b,a,f){return(b=h(b,a,f))?(+b).toFixed(d):"--"}},"\u6536\u76d8\u4ef7":{field:"close",fn:function(b,a,f){return(b=h(b,a,f))?(+b).toFixed(d):"--"}},"\u5747\u3000\u4ef7":{field:"close",fn:function(b,a,f,g){return j(b,a,f,g).toFixed(d)}},"\u6da8\u3000\u8dcc":{field:"close",fn:function(b,a,f){var g=h(b,a,f),b=0>a-1?h(b,a,"open"):h(b,a,f,!0);return Number(g)&&
b?(g-b).toFixed(d):0}},"\u6210\u4ea4\u91cf":{field:"volume",fn:function(b,d,a,f){b=Number(h(b,d,a));return 1E4<b&&1E8>b?(b/1E4).toFixed(f)+"\u4e07":1E8<b?(b/1E8).toFixed(f||2)+"\u4ebf":isNaN(b)?"--":b.toFixed(f)}},"\u6210\u4ea4\u989d":{field:"amount",fn:function(b,a,f){var b=h(b,a,f),g;g=parseInt(b);b=""+g;1E4<(1E8>g)&&(b=(g/1E4).toFixed(d)+"\u4e07");1E8<g&&(b=(g/1E8).toFixed(d)+"\u4ebf");return b}}}},x={time:"\u65f6\u3000\u95f4",open:"\u5f00\u76d8\u4ef7",high:"\u6700\u9ad8\u4ef7",low:"\u6700\u4f4e\u4ef7",
close:"\u6536\u76d8\u4ef7",average:"\u5747\u3000\u4ef7",updown:"\u6da8\u3000\u8dcc",volume:"\u6210\u4ea4\u91cf",amount:"\u6210\u4ea4\u989d",price:"\u4ef7\u3000\u683c"},q=v(null,{tipKeyValue:null,tooltipTemplateString:"<span>{1}</span>:<span>{2}</span><br>",defaultOptions:{fixNum:3},constructor:function(d,b,a){this.mLabel=d;this.plot=b;d=w.mixin(this.defaultOptions,a?a.options:{});this.tipKeyValue=this.plot.csizeRate?k(d.fixNum):n(d.fixNum);if(a.keys){for(var d=this.tipKeyValue,a=a.keys,f=0,g=a.length,
c={};f<g;f++)b=a[f],(b=x[b])&&(c[b]=d[b]);this.tipKeyValue=c}},isShow:!1,behave:function(d){var b=this.plot,c=b.kwArgs.margins,e=b.offsets,h=c.t+e.t,c=c.l+e.l,k=b.plotHeight-e.t-e.b,e=b.plotWidth-e.l-e.r,l=b.main,j=b.mainIndicators,n=b.indicators,u,m,q,o;u=f.position(g.byId(b.domNode),!1);b=Math.round(d.pageX-u.x);d=Math.round(d.pageY-u.y);if(d>=h&&d<=h+k&&b>=c&&b<=c+e){if(this.toggle()){a.set(this.mLabel,{top:i.scale(h,"y")+"px"});if(l&&(h=l.yStart,k=h+l.height,d>=h&&d<=k&&(this.setToolTip(l,b),
h=f.getMarginBox(this.mLabel,!1),this.setTooltipPos(b,c,e,h.w),j)))for(var p in j)if(u=j[p],h=u.yStart,xStart=u.xStart,k=h+u.height,q=u.options.prepareDistance,m=u.csize,o=u.cwidth,m=Math.ceil((b-xStart-q-m)/o),d>=h&&d<=k){this.setToolTip(u,b);h=f.getMarginBox(this.mLabel,!1);this.setTooltipPos(b,c,e,h.w);m=u.getStart()?u.getStart()+m:m;u.renderTxt&&u.renderTxt(m);return}if(!l&&j)for(p in j)if(l=j[p],h=l.yStart,k=h+l.height,d>=h&&d<=k){this.setToolTip(l,b);h=f.getMarginBox(this.mLabel,!1);this.setTooltipPos(b,
c,e,h.w);return}if(n)for(p in n)if(l=n[p],h=l.yStart,xStart=l.xStart,k=h+l.height,q=l.options.prepareDistance,m=l.csize,o=l.cwidth,m=Math.ceil((b-xStart-q-m)/o),d>=h&&d<=k){this.setToolTip(l,b);h=f.getMarginBox(this.mLabel,!1);this.setTooltipPos(b,c,e,h.w);m=l.getStart()?l.getStart()+m:m;l.renderTxt&&l.renderTxt(m);break}}}else a.set(this.mLabel,{display:"none"})},setToolTip:function(d,b){var a=d.xStart,f=d.cwidth,g=d.csize;e.array2toarray1(d.xLabels);var c=this.plot,h=c.getData(),i=d.options.prepareDistance,
k=this.tooltipTemplateString,a=c.main.csizeRate?Math.ceil((b-a-i-g)/f)+c.main.getStart():Math.ceil((b-a-i-g)/f),f=[],i=this.plot.theme.crosshair.tooltip,j;for(j in this.tipKeyValue){d=this.tipKeyValue[j];g=k.replace(/\{1\}/g,j);if(/\u5747\u4ef7/g.test(j))var m=c.main.getStart?c.main.getStart():0,g=g.replace(/\{2\}/g,d.fn(h,a,d.field,m));else g=g.replace(/\{2\}/g,d.fn(h,a,d.field)),/\u65f6\u95f4/g.test(j)&&(g='<span style="color:'+i.time.color+";font-weight:"+i.time["font-weight"]+'">'+g+"</span>");
f.push(g)}this.mLabel.innerHTML=f.join("")},setTooltipPos:function(d,b,f,g){d<=b+f/2?a.set(this.mLabel,{left:i.scale(b+f-g,"x")+"px"}):a.set(this.mLabel,{left:i.scale(b,"x")+"px"});a.set(this.mLabel,{right:"auto"})},toggle:function(){a.set(this.mLabel,{"-webkit-transform-origin":"left top","-webkit-transform":"scale("+1/i.getScaleX()+","+1/i.getScaleY()+")"});if(this.isShow)return a.set(this.mLabel,{display:""}),!0;a.set(this.mLabel,{display:"none"});return!1}}),o=v(null,{constructor:function(d,b,
a,f,g){this.vLine=d;this.hLine=b;this.vLabel=a;this.hLabel=f;this.plot=g},isShow:!1,toggle:function(){a.set(this.hLabel,{display:""});a.set(this.vLabel,{display:""});a.set(this.hLabel,{"-webkit-transform-origin":"left top","-webkit-transform":"scale("+1/i.getScaleX()+","+1/i.getScaleY()+")"});a.set(this.vLabel,{"-webkit-transform-origin":"left top","-webkit-transform":"scale("+1/i.getScaleX()+","+1/i.getScaleY()+")"});a.set(this.hLine,{"-webkit-transform-origin":"left top","-webkit-transform":"scale("+
1/i.getScaleX()+","+1/i.getScaleY()+")"});a.set(this.vLine,{"-webkit-transform-origin":"left top","-webkit-transform":"scale("+1/i.getScaleX()+","+1/i.getScaleY()+")"});if(this.isShow)return a.set(this.hLine,{display:""}),a.set(this.vLine,{display:""}),!0;a.set(this.hLine,{display:"none"});a.set(this.vLine,{display:"none"});return!1},behave:function(d){var b=this.plot,c=b.kwArgs.margins,e=b.offsets,h=c.t+e.t,c=c.l+e.l,j=b.plotHeight-e.t-e.b,e=b.plotWidth-e.l-e.r,l=b.main,k=b.mainIndicators,m=b.indicators,
n,q,o;o=f.position(g.byId(b.domNode),!0);b=Math.round(d.pageX-o.x);d=Math.round(d.pageY-o.y);if(d>=h&&d<=h+j&&b>=c&&b<=c+e){this.toggle()&&(a.set(this.hLine,{width:e+"px",left:i.scale(c,"x")+"px",top:i.scale(d,"y")+"px"}),a.set(this.vLine,{height:j+"px",top:i.scale(h,"y")+"px",left:i.scale(b,"x")+"px"}));if(l&&(n=l.yStart,o=n+l.height,q=l.yAxisScale,d>=n&&d<=o))l.baseValue?(q=l.baseValue[0],n=q*l.ymin,q*=l.ymax,q=l.height/(q-n)):n=l.ymin,this.setXLabel(l,b),this.setYLabel(n,o,q,d,l.options.bottomSpacing||
0,l.options.fixedNum);if(!l&&k)for(var p in k)l=k[p],n=l.yStart,o=n+l.height,d>=n&&d<=o&&(this.setXLabel(l,b),this.setYLabel(l.ymin,o,l.yAxisScale,d,l.options.bottomSpacing||0,l.options.fixedNum));if(m)for(p in m)l=m[p],n=l.yStart,o=n+l.height,d>=n&&d<=o&&(this.setXLabel(l,b),this.setYLabel(l.ymin,o,l.yAxisScale,d,l.options.bottomSpacing||0,l.options.fixedNum));k=f.position(this.hLabel);p=f.position(this.vLabel);e=b-c<k.w/2?c:e-(b-c)<k.w/2?c+e-k:b-k.w/2;a.set(this.hLabel,{top:i.scale(h+j+2,"y")+"px",
left:i.scale(e,"x")+"px"});a.set(this.vLabel,{left:"-3px",top:i.scale(d-p.h/2,"y")+"px",width:c+"px"})}else a.set(this.hLine,{display:"none"}),a.set(this.vLine,{display:"none"}),a.set(this.hLabel,{display:"none"}),a.set(this.vLabel,{display:"none"})},setXLabel:function(d,b){var a=d.xStart,f=d.cwidth,g=d.csize,c=e.array2toarray1(d.xLabels);prepareDistance=d.options.prepareDistance;xline=Math.ceil((b-a-prepareDistance-g)/f);a=c[xline]||c[xline-1];"undefined"==typeof a&&(a="--/--");this.hLabel.children[0].innerHTML=
a},setYLabel:function(a,b,f,g,c,e){this.vLabel.children[0].innerHTML=((b-g-c)/f+a).toFixed(e)}});return v("dojox.customfig.actions.Crosshair",[p,y],{templateString:"<div><div data-dojo-attach-point='mLabel' style='display:none;'></div><div data-dojo-attach-point='vLabel' style='display:none;'><strong data-dojo-attach-point='vLabelVal'></strong><div style ='width: 5px; height: 5px; border-top: #587eb5 2px solid; border-left: #587eb5 2px solid; position: absolute;  top: 5px; right: -4px; -webkit-transform: rotate(145deg) skew(1deg, 1deg);border-radius: 2px;'></div></div><div data-dojo-attach-point='hLabel' style='display:none;'><strong data-dojo-attach-point='hLabelVal'></strong><div style ='width: 5px; height: 5px; border-top: #587eb5 2px solid; border-left: #587eb5 2px solid; position: absolute; top: -5px; left: 45%; -webkit-transform: rotate(45deg) skew(0deg, 0deg);border-radius: 2px;'></div></div><div data-dojo-attach-point='vLine' style='display:none;'></div><div data-dojo-attach-point='hLine' style='display:none;'></div>",
plot:null,lineLabel:null,toolTip:null,constructor:function(a){this.kwArgs=a;this.plot=a.plot;this.tipKey=a.tipKey||{}},postCreate:function(){var d=this.kwArgs,b=this.plot.theme,d=this.style={tooltip:d.style?w.mixin({},b.crosshair.tooltip,d.style.tooltip):b.crosshair.tooltip,hLine:d.style?w.mixin({},b.crosshair.hLine,d.style.hLine):b.crosshair.hLine,vLine:d.style?w.mixin({},b.crosshair.vLine,d.style.vLine):b.crosshair.vLine,hLabel:d.style?w.mixin({},b.crosshair.hLabel,d.style.hLabel):b.crosshair.hLabel,
vLabel:d.style?w.mixin({},b.crosshair.vLabel,d.style.vLabel):b.crosshair.vLabel};a.set(this.mLabel,d.tooltip.content);a.set(this.hLabel,d.hLabel);a.set(this.vLabel,d.vLabel);a.set(this.hLine,d.hLine);a.set(this.vLine,d.vLine);this.lineLabel=new o(this.vLine,this.hLine,this.vLabel,this.hLabel,this.plot);this.toolTip=new q(this.mLabel,this.plot,this.tipKey);c.place(this.domNode,this.plot.domNode,"first");t.connect(this.plot.domNode,"click",this,this.click);t.connect(this.plot.domNode,"mousemove",this,
this.mouseMove)},click:function(a){var b=this.plot,c=b.kwArgs.margins,e=b.offsets,h=c.t+e.t,c=c.l+e.l,i=b.plotHeight-e.t-e.b,e=b.plotWidth-e.l-e.r,k;k=f.position(g.byId(b.domNode),!1);b=Math.round(a.pageX-k.x);a=Math.round(a.pageY-k.y);if(a>=h&&a<=h+i&&b>=c&&b<=c+e)this.toolTip.isShow=!this.toolTip.isShow,this.lineLabel.isShow=!this.lineLabel.isShow},mouseMove:function(a){this.toolTip.behave(a);this.lineLabel.behave(a)}})})}}});
define("platform/charts/src","dojo/aspect,dojo/dom-geometry,dojox/customfig/widget/MinSharingPlans,dojox/customfig/themes/blackTheme,dojox/store/GridWSStore,platform/charts/view/utils,platform/charts/view/Crosshair".split(","),function(v,p,y,w,t,e,a){var c=new y({codes:[{name:location.hash.replace("#",""),type:"lastclose"}],plot:{margins:{l:2,t:2,r:4,b:2},offsets:{l:60,t:20,r:60,b:20},noscale:!0},theme:function(a){a.com_de_opt.stroke="#C00000";a.com_de_opt.font="12px simsun";a.com_de_opt.xLabelsInterval=
30;a.sharingPlans.timetrend[0]="white";a.ma.ma[0]="yellow";a.crosshair.tooltip.content.background="rgba(0,0,0,.7)";delete a.crosshair.tooltip.content["text-align"];delete a.crosshair.tooltip.content.opacity;return a}(new w),sharingPlans:{options:{timetrendFilled:!1,fixedNum:2,rateNum:0.001,rateNumOffset:0.1,baseValueStyle:{color:"#C00000"},backgroundGrid:{type:"solid",color:"#C00000",height:25}}},mainIndicators:[{type:"Ma",params:{args:[],options:{mainIndicatorType:1,label:"yellow"}}}],indicators:[{type:"Vol",
params:{args:[],options:{topSpacing:0,closed:!1,label:"yellow",backgroundGrid:{type:"solid",color:"#C00000",height:25}}}}],render:function(){this.getData();this.plot.main.height=Math.round(this.plot.main.height);this.plot.indicators.vol.yStart=Math.round(this.plot.indicators.vol.yStart);this.plot.render()},resize:function(){if(!this.requestId)this.domNode.style.width="100%",this.domNode.style.height="100%",this.containerNode.style.width="100%",this.containerNode.style.height="100%",this.plot.canvas.style.width=
"100%",this.plot.canvas.style.height="100%";cancelAnimationFrame(this.requestId);this.requestId=requestAnimationFrame(function(){var a=p.getMarginBox(this.containerNode);delete a.l;delete a.t;setTimeout(function(){this.initCanvas(a);e.width=this.main.width;e.height=this.main.height;this.render()}.bind(this.plot),0)}.bind(this))}},"container");v.around(c,"reg",function(a){return function(){if(this.getCodes()[0].name)a.apply(this,arguments),c.plot.main.setMainLabels([]),c.plot.main.setBaseValue([]),
c.plot.main.setData(0,0),c.plot.setData([]),c.dataHandleName.callback=function(a){if(!Number(a.lastclose)){var f=new t,e=0;v.after(f,"convert",function(a){if(2===++e){var f=document.createEvent("PopStateEvent");f.initEvent("popstate",!1,!0);dispatchEvent(f)}return a});c.fixStore&&c.fixStore.req_seq&&c.fixStore.cancel(c.fixStore.req_seq);c.fixStore=f;f.query({service:"objinfo",type:"getinfo",where:"obj="+c.getCodes().map(function(a){return a.name}).join(","),field:"lastclose",response_times:2,response_mode:0})}var m=
[],j=[];a.name&&a.name.forEach(function(a,f){m.push(a+"["+codes[f].replace(/^..|\..+?$/g,"")+"]")});c.plot.main.setMainLabels(m);codes.forEach(function(f,c){var e=a[codeTypes[c]];"undefined"!=typeof e&&"undefined"!=typeof e[c]?j.push(+e[c]):j.push(0)});c.plot.main.setBaseValue(j);c.plot.setData(a)}}});c.startup();e.xStart=c.plot.main.xStart;e.yStart=c.plot.main.yStart;e.width=c.plot.main.width;e.height=c.plot.main.height;v.around(e,"drawline",function(a){return function(c,e,h,m,j,n,k){if("#C00000"===
n){if(e===m)return 5>Math.abs(e-this.xStart-this.width)?void 0:this.drawDashes(c,e,h-1,m,j,"#600000",k);if(h===j&&5>Math.abs(h-this.yStart-this.height))return}a(c,e,h,m,j,n,k)}});v.after(c.plot.main,"setGeometry",function(){if(1<this.width&&1===this.xLabels.length&&510<this.xLabels[0].length&&380>=this.width){var a=0,c;this.xLabels.forEach(function(c,e){a+=c.length+e});c=Math.ceil(a/5);this.options.xLabelsInterval=c+(5-c%5)}});c.plot.mainIndicators.ma.renderTxt=function(a){var c=this.options,i=this.ctx,
h=this.xStart,m=this.yStart,j=this.plot,n=j.main,k=this.txt,p=this.args,q=this.data,o=c.fixedNum;a||(a=0);a&&(a-=this.start);if(q&&q.length){0==a&&(a=q[0].length-1);j=i.measureText(j.mainLabels).width;e.clearCanvas(i,h+j,m-n.offsets.t+1,this.width-j-2,n.offsets.t-2,c.background);p&&p.length&&(k=k+"MA("+p.join(",")+")");e.drawText(i,k,h+j,m+c.topSpacing-1,{align:"start",textBaseline:"bottom",color:c.label,background:c.background,font:c.font});for(var d in p)offsetMLabel=j+i.measureText(k).width,n=
" MA"+d+":"+(q[d][a]?q[d][a].toFixed(o):" "),k+=n,e.drawText(i,n,h+offsetMLabel,m+c.topSpacing-1,{align:"start",textBaseline:"bottom",color:c.ma[d],background:c.background,font:c.font})}};c.plot.indicators.vol.txt="";c.plot.indicators.vol.yAxis=function(){var a=this.ctx,c=this.options,i=this.xStart,h=i+this.width,m=this.yStart,j=this.height,n=m+j,k=this.yAxisScale,p=this.ymin,q=this.yLabels;if(!q||!q.length)for(var j=e.ygrid(p,this.ymax,Math.floor((j-c.topSpacing)/c.backgroundGrid.height)),o=0,d=
j.length;o<d;o++)Math.pow(10,c.precision.num),q=n-(j[o]-p)*k,q===m||q===n||("dashed"==c.backgroundGrid.type?e.drawDashes(a,i,q,h,q,c.backgroundGrid.color,1):e.drawline(a,i,q,h,q,c.backgroundGrid.color))};new a({plot:c.plot,style:{}});addEventListener("resize",c.resize.bind(c));addEventListener("popstate",function(){c.changeCodes([{name:location.hash.replace("#",""),type:"lastclose"}]);c.render()});addEventListener("dblclick",function(){location.assign("dzh://VIEWSTOCK?DATATYPE=DAY&LAYOUT=Level2\u9ed8\u8ba4&PAGE=\u5206\u65f6\u8d70\u52bf&LABEL="+
codes[0])})});