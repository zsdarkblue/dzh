define(["./_base","jquery","./set_services","highcharts"],function(b,a,c){return new (b.extend({assetsCfgQzhong:function(d){var g=a(".cfg-top .cfg-t-right").find(".commhei").eq(1);if(c.isEmpty(d)||d.constructor!=Object){g.html(c.nodata)}else{var e=[{name:"券种名称",field:"d0",cssClass:"t_name",line:false},{name:"占资产净值比(%)",field:"d1",cssHead:"t_colspan",cssContent:"t_p_right"},{name:"",field:"d2",cssHead:"t_co_re",cssClass:"t_co_len"},{name:"占比增减(%)",field:"d3"}],f=[{d0:"国债",d1:d["国债"],d2:c.getIHtml(d["国债"]),d3:d["国债占比增减"]},{d0:"金融债",d1:d["金融债"],d2:c.getIHtml(d["金融债"]),d3:d["金融债占比增减"]},{d0:"可转债",d1:d["可转债"],d2:c.getIHtml(d["可转债"]),d3:d["可转债占比增减"]},{d0:"企业债",d1:d["企业债"],d2:c.getIHtml(d["企业债"]),d3:d["企业债占比增减"]},{d0:"企业短期融资券",d1:d["企业短期融资券"],d2:c.getIHtml(d["企业短期融资券"]),d3:d["企业短期融资券占比增减"]},{d0:"中期票据",d1:d["中期票据"],d2:c.getIHtml(d["中期票据"]),d3:d["中期票据占比增减"]},{d0:"其他债",d1:d["其他债"],d2:c.getIHtml(d["其他债"]),d3:d["其他债占比增减"]}];g.html(c.createTable(e,f));g.find(".t_colspan").attr("colspan",2);g.find(".t_co_re").remove()}},assetsCfgInd:function(e){var j=a(".cfg-top .cfg-t-right").find(".commhei").eq(0);if(c.isEmpty(e)||e.constructor!=Array||e.length<2){j.html(c.nodata)}else{var g=[],k=[];for(var f=0,l=e.length;f<l;f++){for(var d in e[f]){if(f==0){var h={name:d,field:d};if(d=="行业名称"){h.cssClass="t_name";h.line=false}if(d=="占资产净值比(%)"){h.cssHead="t_colspan";h.cssContent="t_p_right"}g.push(h);if(d=="占资产净值比(%)"){g.push({name:"",field:"x_",cssHead:"t_co_re",cssClass:"t_co_len"})}}if(d=="占资产净值比(%)"){e[f]["x_"]=c.getIHtml(e[f][d])}}}j.html(c.createTable(g,e));j.find(".t_colspan").attr("colspan",2);j.find(".t_co_re").remove()}c.showLoading(j,"visible",false)},assetsCfgPie:function(g){if(c.isEmpty(g)||g.constructor!=Object){a("#a-c-chat").html(c.nodata);return}a(".assetsCfg-date").text(g["日期"]);delete g["日期"];var e=c.getObjMax(g);var h=[];for(var d in g){var f=[d,parseFloat(g[d])];if(d==e[0]){f={name:d,y:e[1],sliced:true,selected:true}}h.push(f)}new Highcharts.Chart({chart:{renderTo:"a-c-chat",plotShadow:false},exporting:{enabled:false},credits:{enabled:false},title:{text:""},tooltip:{formatter:function(){return this.key+"<br />资产分布:"+Highcharts.numberFormat(this.y,2,".")+"%"}},plotOptions:{pie:{allowPointSelect:true,cursor:"pointer",dataLabels:{enabled:true,color:"#000000",connectorColor:"#000000",format:"{point.name}: {point.percentage:.2f} %"},showInLegend:true}},series:[{type:"pie",name:"资产分布",data:h}]})},parse_chat:function(d,e,g,f){new Highcharts.Chart({chart:{renderTo:(g==undefined?"jdsy-con":g),type:"column"},exporting:{enabled:false},title:{text:""},subtitle:{text:""},xAxis:{tickLength:4,categories:d,tickmarkPlacement:"on",labels:{style:{color:"#606060",fontSize:"12px"}}},legend:{margin:2,y:14,itemStyle:{fontWeight:"normal"}},yAxis:{tickPixelInterval:30,title:{text:"",style:{width:"10em"},align:"high",rotation:0}},tooltip:{headerFormat:'<span style="font-size:13px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.4f} '+((f===false)?"亿份":"%")+"</b></td></tr>",footerFormat:"</table>",shared:true,useHTML:true},credits:{enabled:false},plotOptions:{series:{stacking:((f===false)?"normal":"")},column:{pointPadding:0.2,borderWidth:0}},series:e})},networth:function(d){c.getAjax("networth",{tp:d}).then(function(e){var f=a("#networth");if(e.type!=undefined&&e.avg!=undefined&&e.val!=undefined&&e.val.length>1){if(parseInt(e.type)!=1){a("#c-c-content .c-c-c-top").find("span").eq(4).addClass("selected").siblings().remove()}this.networth_chat(e.val[0]["name"],c.arrRest(e.val),c.arrRest(e.avg))}else{f.html(c.nodata)}c.showLoading(a("#networth"));console.dir(e)}.bind(this))},networth_chat:function(d,e,f){new Highcharts.Chart({chart:{renderTo:"networth",backgroundColor:"#FFF",plotBackgroundColor:"#FFF",type:""},title:{text:"",x:-20},exporting:{enabled:false},credits:{enabled:false},legend:{margin:1,y:13,itemStyle:{fontWeight:"normal"}},xAxis:{type:"datetime",labels:{formatter:function(){return Highcharts.dateFormat("%Y-%m-%d",this.value)},style:{color:"#2D2D2D",fontFamily:"arial",fontSize:"11px"},y:30},gridLineWidth:0,gridLineColor:"#bababa",lineWidth:1,lineColor:"#bababa",tickLength:4},yAxis:{title:{text:""},labels:{formatter:function(){return this.value+"%"}},tickPixelInterval:30,plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{enabled:false,},plotOptions:{series:{marker:{enabled:false}}},series:[{name:d,color:"#B40104",data:e},{name:"同类平均",data:f}]})}}))()});