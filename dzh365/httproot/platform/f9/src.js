define("resources/js/_base",["_base","jquery"],function(t,e){return t.extend(function(){},{loadingMsg:e('<i class="icon-loading"></i>').hide().insertAfter(e(".l_title:eq(0)>b")),showLoadingMsg:function(){this.loadingMsg.show()},hideLoadingMsg:function(){this.loadingMsg.hide()}})}),define("resources/js/services",["jquery"],function(t){return{baseUrl:[Array("http://f9data.gw.com.cn","http://f9databeta.gw.com.cn","http://f9dataalpha.gw.com.cn","http://f9datadev.gw.com.cn"),Array("http://dsj.gw.com.cn","http://dsjbeta.gw.com.cn","http://dsjalpha.gw.com.cn","http://dsjtest.gw.com.cn")]["prod"in external&&127==external.prod?1:0]["env"in external?external.env:2],code:(location.search.match(/obj=([^&]*)/)||[,"SH600000.stk"])[1],key_Prefix:function(){var t=location.pathname.split("/");return t.pop(),t.join("__")},getNav:function(e){var a=(location.search.match(/type=([^&]*)/)||[,"SOULENCE"])[1];if("SOULENCE"==a)var n={obj:e||this.code};else var n={type:a,obj:e||this.code};return t.ajax({url:this.baseUrl+("prod"in external&&127==external.prod?"/f9":"/f9/app_f9/www")+"/?m=Home&c=Home&f=getLeft",data:n,dataType:"jsonp"}).then(function(t){for(var e in t.APIUrl)localStorage.setItem(this.key_Prefix()+e,this.baseUrl+t.APIUrl[e]);localStorage.setItem(this.key_Prefix()+"code_code",t.title.code),localStorage.setItem(this.key_Prefix()+"sObj",t.title.obj)}.bind(this))},getFinancialReport:function(e){return t.ajax({url:localStorage.getItem(this.key_Prefix()+"GetDataUrl"),data:e,dataType:"jsonp"})},getFinancialReportUrl:function(e){return localStorage.getItem(this.key_Prefix()+"GetDataUrl")+t.param(e)},getFinancialForecastUrl:function(e){return e.type="dialog",localStorage.getItem(this.key_Prefix()+"ForecastUrl")+t.param(e)},getFinancialChartUrl:function(e){return e.type="dialog",localStorage.getItem(this.key_Prefix()+"ChartUrl")+t.param(e)},getExportUrl:function(e){return t.ajax({url:localStorage.getItem(this.key_Prefix()+"ExportUrl"),data:{U:e},dataType:"jsonp"}).then(function(e){var a="dzh://FILEMGR?";if(200==e.ErrorCode){var n=new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toJSON().substr(0,10),s=decodeURI((location.search.match(/title=([^&]*)/)||[,""])[1]);a+=t.param({LINK:e.DownAddr,OPEN:1,SHOWUI:1,FILE:s+n,SAVEAS:s+n+"("+localStorage.getItem(this.key_Prefix()+"code_code")+").xlsx"})}external.download?external.download(decodeURIComponent(a)):(alert(decodeURIComponent(a)),console.log(e))}.bind(this))}}}),define("resources/js/index.js",["./_base","jquery","./services","splitter","ztree"],function(t,e,a){var n=t.extend(function(t){e.extend(this,t),this.tree.setting.callback.onClick=this.onTreeNodeClick.bind(this),this.iframe.on("load",this.onFrameLoad.bind(this));var n=location.search,s=(n.match(/\bclear=([^&]*)/)||[,"Soulence"])[1];"Soulence"!=s&&localStorage.removeItem(a.key_Prefix()+"navTree");var i=(localStorage.getItem(a.key_Prefix()+"navTree")||"").split(","),o=this.tree.getNodeByParam("id",i[0]);if(o&&o.name===i[1])this.tree.selectNode(o,!0);else{var r=this.tree.getNodesByFilter(function(t){return 0==t.level},!0);i[0]=void 0!=r.children&&r.children instanceof Array?parseInt(r.id)+1:r.id}var l=(n.match(/\bpg=([^&]*)/)||[,"Sou"])[1];"Sou"!=l&&parseInt(l)>0&&(i[0]=parseInt(l)),document.getElementById("nav_"+i[0]+"_a").click()},{onTreeNodeClick:function(t,n,s){if(s.children)this.tree.expandNode(s);else{t.preventDefault();var i=s.url;/f9/.test(i)&&"http://"!=i.substr(0,7)&&(i=a.baseUrl+i),this.showLoadingMsg(),i+=/\?/.test(i)?"&":"?",this.title.text(t.target.innerText),this.iframe.css("visibility","hidden"),this.iframe.attr("src",i+e.param({obj:localStorage.getItem(a.key_Prefix()+"sObj"),title:t.target.innerText})),localStorage.setItem(a.key_Prefix()+"navTree",[s.id,s.name])}},onFrameLoad:function(){this.iframe.css("visibility","visible"),this.hideLoadingMsg()}});return n.init=function(){return a.getNav().then(function(t){t.data[0].open=!0;var a=t.title.name;e(".l_title:eq(0)>b").html(" <span>"+t.title.code+"</span>"+a),e(".l_title:eq(0)>b").attr("title",a),new n({loadingMsg:e(".l_title:eq(1)"),title:e(".l_title:eq(1)>b"),iframe:e("iframe"),tree:e.fn.zTree.init(e("#nav"),{data:{simpleData:{enable:!0,idKey:"id",pIdKey:"pid",rootPId:0}},view:{dblClickExpand:!1,expandSpeed:"",nameIsHTML:!0,selectedMulti:!1,showIcon:!1,showTitle:!1}},t.data)})}),this},n}),define("resources/js/report.js",["./_base","jquery","./services","dialog","select","grid"],function(base,$,services,dialog,select){var report=base.extend(function(){var t=this;this.grid=$(".grid").on("click","a[data-id]",function(){t.showChartDialog(this.dataset)}).on("click","a[data-time]",function(){t.showGridDialog(this.dataset)}),this.form=$("form").on("change",function(){t.onFiltersChange()}),this.timeDialog=$("#time_dialog"),this.chartDialog=$("#chart_dialog"),this.gridDialog=$("#grid_dialog"),$("body").on("click","[data-bind]",function(){this.dataset.bind in t&&t[this.dataset.bind](this)}),this.setYearRange(),this.setUnit(),this.onFiltersChange()},{getOptions:function(){var t=location.search,e={obj:(t.match(/obj=([^&]*)/)||[,"SH600000.stk"])[1],pType:(t.match(/pType=([^&]*)/)||[,14])[1]};return/&pk=/.test(t)&&(e.pk=t.match(/pk=([^&]*)/)[1]),/&pcode=/.test(t)&&(e.pcode=t.match(/pcode=([^&]*)/)[1]),this.form.serializeArray().forEach(function(t){e[t.name]=t.name in e?e[t.name]+","+t.value:t.value}),e},$i:0,yucheDialog:"",setUnit:function(){var t=location.search;null!=t.match(/unit=([^&]*)/)&&""!=t.match(/unit=([^&]*)/)&&$("select[name=unit]").val(t.match(/unit=([^&]*)/)[1])},onFiltersChange:function(){this._filtersLock||(this._filtersLock=!0,this.showLoadingMsg(),services.getFinancialReport(this.getOptions()).then(function(t){this._filtersLock=!1,this.hideLoadingMsg(),this.yucheDialog=t.bigdata.yuchedialog,this.itcode=t.sObj;var e=t.bigdata.data;return null==e||""==e||void 0==e?($(".flex-auto").html('<div class="no_data_msg">提示：该品种无此项记录，或在当前筛选条件下无数据</div>'),!1):(0==this.$i&&(this.loadBasic(t),this.$i=1),void this.buildGrid(e,this.addFormatters(t.bigdata.columns)))}.bind(this),function(){this._filtersLock=!1,this.hideLoadingMsg()}.bind(this)))},addFormatters:function(t){for(var e=0,a=t.length;a>e;e++){var n=t[e];"title"===n.field?n.formatter=this.chartDialogFormatter:n.field.indexOf("Y")>-1&&(n.formatter=this.gridDialogFormatter)}return t},buildGrid:function(t,e){var a=new Slick.Data.DataView;a.yucheDialog=this.yucheDialog,this.slick=buildGrid(this.grid,t,e,{frozenColumn:0,isCollapsing:!0,resize:!0},a)},resetGrid:function(){location.reload()},exportGrid:function(){services.getExportUrl(services.getFinancialReportUrl($.extend(this.getOptions(),{type:"aja"})))},sortGrid:function(){for(var t=this.slick.getColumns(),e=[],a=[],n=1,s=0;n>s;s++)e[s]=t[s];for(var i=n,o=0;i<t.length;i++,o++)a[o]=t[i];a.reverse();for(var r=e.length,l=0;l<a.length;l++,r++)e[r]=a[l];this.buildGrid(this.slick.getData().getItems(),e)},roundGrid:function(target){var input=$(target).parent().find(">input[type=hidden]").eq(0),value=input.val();input.val(/^[+-]/.test(target.dataset.value)?Math.min(Math.max(eval(value+target.dataset.value),0),6):target.dataset.value),input.val()!==value&&input.trigger("change")},setYearRange:function(t){for(var e=[],a=[],n=2e3,s=(new Date).getFullYear(),i=0;s>=n;){var o='<option value="'+s+'">'+s--+"</option>",r=o;3==i&&(r=o.replace("<option","<option selected")),e.push(o),a.push(r),i++}"SOULENCE"==t?($("select[name=yearsstart]").html(a.join("")),$("select[name=yearsend]").html(e.join(""))):(this.timeDialog.find("#year-end").html(e.join("")),this.timeDialog.find("#year-start").html(a.join("")))},changeYears:function(t){var e=this.form.find("input[name=years]"),a=e.val();if("value"in t.dataset)$(t).addClass("btn-blue").siblings().removeClass("btn-blue"),e.val(t.dataset.value);else{var n=this.timeDialog.find("select"),s=n.eq(0).val(),i=n.eq(1).val();e.val(s>i?i+","+s:s+","+i)}e.val()!==a&&e.trigger("change"),this.hideDialog(t)},chartDialogFormatter:function(t,e,a,n,s){var i=this.getItems(),o="<span style='display:inline-block;height:1px;width:"+15*s.indent+"px'></span>",r="",l=parseInt(s.spance,10),c=s.danwei,d="";void 0!=c&&(d='data-dwunit="'+parseInt(c)+'"');var p='<a data-id="'+s.distg+'" '+d+' style="position:absolute;right:5px" href="javascript:;"><i class="icon-popup"></i></a>';return a=a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"1"==s.bond,i[t+1]&&i[t+1].indent>s.indent?(l=0>l-1?0:l-1,s._collapsed?o+" <span class='toggle expand' style='position:relative;left:"+l+"em;'></span>&nbsp;<span style=\"position:relative;left:"+l+"em;"+r+'" id="row'+t+'">'+a+"</span>"+p:o+" <span class='toggle collapse' style='position:relative;left:"+l+"em;'></span>&nbsp;<span style=\"position:relative;left:"+l+"em;"+r+'" id="row'+t+'">'+a+"</span>"+p):"0"==s.distg?o+'<span style="position:relative;left:'+l+"em;"+r+'">'+a+"</span>":o+'<span style="position:relative;left:'+l+"em;"+r+'" id="row'+t+'">'+a+"</span>"+p},gridDialogFormatter:function(t,e,a,n,s){var i=s.distg,o=s.title;if(null!=a&&""!=a&&null!=this.yucheDialog[i]){"SOULENCE"==i&&(i=a,a="点击浏览");var r=n.name;return'<a data-ftcode="'+i+'" data-time="'+r+'"  data-name="'+o+'" href="javascript:;" style="text-decoration:underline">'+a+"</a>"}if(null!=a&&""!=a&&void 0!=this.yucheDialog[a]&&this.yucheDialog[a].indexOf("SOULENCE")>-1){var l,c=this.getItems();for(var d in s)s[d]==a+""&&(l=c[0][d]);i=a,a="点击浏览";var r=n.name;return'<a data-ftcode="'+i+'" data-typety="'+l+'" data-time="'+r+'"  data-name="'+o+'" href="javascript:;" style="text-decoration:underline">'+a+"</a>"}return a},getHrefHtml:function(t,e,a,n){var s=t.name;return'<a data-ftcode="'+e+'" data-time="'+s+'"  data-name="'+a+'" href="javascript:;" style="text-decoration:underline">'+n+"</a>"},showChartDialog:function(){this.chartDialog.find("iframe").one("load",function(){this.style.visibility="visible"}).css("visibility","hidden").attr("src",services.getFinancialChartUrl($.extend(this.getOptions(),arguments[0]))).end().widget("dialog").show()},showGridDialog:function(){this.gridDialog.find("iframe").one("load",function(){this.style.visibility="visible"}).css("visibility","hidden").attr("src",services.getFinancialForecastUrl($.extend(this.getOptions(),arguments[0],{obj:this.itcode}))).end().widget("dialog").show()},showTimeDialog:function(t){$(t).addClass("btn-blue").siblings().removeClass("btn-blue"),this.timeDialog.widget("dialog").show({left:"379px",top:"55px"})},hideDialog:function(t){$(t).parents(".dialog").widget("dialog").hide()},loadBasic:function(res){var single=eval(res.single),baogaoqi=res.baogaoqi,baotype=res.baotype,baogaoqi_dis=eval(res.baogaoqi_dis),str_tip="";if(baogaoqi_dis===!1)$("#baogaoqi_dis").remove(),$("select[name=tip]").remove();else{if(parseInt(baogaoqi)>=4){str_tip+='<optgroup label="">';var kid=single?[1,2,3,4]:[4,2,1,3];for(var x in kid){var temp=kid[x]%2==0||1==single?"selected='selected'":"";str_tip+='<option value="'+kid[x]+'"  '+temp+">"+baotype[kid[x]]+"</option>"}str_tip+="</optgroup>"}if(parseInt(baogaoqi)>=5){var baotype_true=res.baotype_true;str_tip+='<optgroup label="-">';for(var i=5;baogaoqi>=i;i++){var temp_str='selected="selected"';void 0!=baotype_true&&""!=baotype_true&&null!=baotype_true&&-1===$.inArray(i+"",baotype_true)&&(temp_str=""),str_tip+='<option value="'+i+'" '+temp_str+">"+baotype[i]+"</option>"}str_tip+="</optgroup>"}$("select[data-option=checkbox]").html(str_tip),str_tip=""}var years=eval(res.years);years===!0&&($("#years-se").html('<select name="yearsstart" data-option></select><label>至　</label><select name="yearsend" style="padding-left:5px" data-option></select>'),this.__proto__.setYearRange("SOULENCE"));var mulit=eval(res.mulit);if(mulit){var ext_dataTable=res.ext_dataTable,mulitTabel=res.mulitTabel;for(var x in ext_dataTable)str_tip+='<option value="'+x+'">'+mulitTabel[x]+"</option>";$("select[name=dataType]").html(str_tip),str_tip=""}else $("#data-sjlx").remove(),$("select[name=dataType]").remove();var bbtype=res.bbtype;if(0==bbtype.length)$("#bbtype").remove(),$("select[name=biaotype]").remove();else{var bbname=res.bbname;for(var x in bbtype){var temp=0==x?"selected='true'":"";str_tip+='<option value="'+bbtype[x]+'"  '+temp+">"+bbname[bbtype[x]]+"</option>"}$("select[name=biaotype]").html(str_tip),str_tip=""}var hvdata=res.hvdata,hvdata_dis=eval(res.hvdata_dis);if(hvdata_dis===!1)$("#hvdata_dis").remove(),$("select[name=per]").remove();else if(hvdata.length>0){str_tip+='<option value="CNY" selected>CNY</option>';for(var x in hvdata)str_tip+='<option value="'+hvdata[x]+'">'+hvdata[x]+"</option>";$("select[name=per]").html(str_tip),str_tip=""}var perType=eval(res.perType);perType===!1&&$("select[name=perType]").remove();var Ismerger=eval(res.Ismerger);if(Ismerger===!0){var s2=$("#form-group-soulence2");$("#form-group-soulence1").append(s2.html()),s2.remove()}var unit=res.unit;null!=unit&&""!=unit&&void 0!=unit&&$("select[name=unit]").val(unit);var Subsisting=res.Subsisting;(void 0==Subsisting||null==Subsisting||""==Subsisting)&&$("#subs").remove(),$("input[name=type_jidu]").val("SOULENCE");var pcode=res.pcode;if(void 0!=pcode&&null!=pcode&&""!=pcode&&pcode.constructor==Array){var temp_name="1"==res.pk?"发债人名称":"担保人名称";str_tip='<div class="s_title s_gray"><div class="l_title_img" style="padding-left:5px"></div><label style="margin-right:5px">'+temp_name+'</label><select data-bind="onBondChange" data-option>';for(var x in pcode){var tmp_strs=res.pcode_true==pcode[x].code?'selected="selected"':"";str_tip+='<option value="'+pcode[x].code+'" '+tmp_strs+">"+pcode[x].name+"</option>"}str_tip+="</select></div>",$(".flex-none").append(str_tip),str_tip="",$("select[data-bind=onBondChange]").on("change",function(t){var e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,a=t.target.value;window.location.href=/&pcode=/.test(e)?e.replace(/pcode=([^&]*)/,"pcode="+a):e+"&pcode="+a})}$("form.s_title").show(),select.init()}});return report.init=function(){return new report},report}),define("complex/js/model/dataRquest",["jquery","../../../resources/js/services","socket"],function(t,e){function a(t){var e=[],a=[],n={},s={},i={},o={};for(eachTitle in t[0])"日期"!=eachTitle&&a.push(eachTitle);n.title=a[0],s.title=a[1],i.title=a[2],e.push("title");for(var r=0,l=t.length;l>r;r++)e.push(t[r]["日期"]),n[t[r]["日期"]]=t[r][a[0]],s[t[r]["日期"]]=t[r][a[1]],i[t[r]["日期"]]=t[r][a[2]];return o.thData=e,o.tdData=[n,s,i],o}function n(a){function n(t){a.callbackF(t)}var s=e.baseUrl+"/f9/";t.get(s,a.conditions,n,"jsonp")}function s(){return t.send("/stock/html5_orr2/solr_report/getReportDataForTargetSearch112.mod",{gpdm:m.match(/\d{4,6}/)[0],page:1,jg:"",rqState:0,__encoding:"gbk",pagesize:5})}function i(){return t.send("/objinfo/getinfo",{field:"new,lastclose,lastvalue",where:"obj="+m})}function o(){return t.send("/quote/dyna",{field:"new,lastclose",where:"obj="+m,response_times:-1,response_mode:0})}function r(e){console.log(e.conditions.parameter),t.send("/rpc",{so:e.conditions.so,"function":e.conditions["function"],paraencode:"base64",parameter:(external.base64encode||btoa)(e.conditions.parameter)}).then(function(t){e.callbackF(t)},function(){console.log("出错了")})}var l=location.search,c=new Object;if(-1!=l.indexOf("?"))for(var d=l.substr(1),p=d.split("&"),h=0,u=p.length;u>h;h++)c[p[h].split("=")[0]]=p[h].split("=")[1];var m=c.obj,g={conditions:{m:"F9stock",c:"Glance",obj:m,f:"Stkstatus"},callbackF:function(e){stkstatusData=e,t(document).trigger("stkstatusDataBack")}},f={conditions:{m:"F9stock",c:"Glance",obj:m,f:"Stkprice"},callbackF:function(e){stkpriceData=e,t(document).trigger("stkpriceDataBack")}},v={conditions:{m:"F9stock",c:"Glance",obj:m,f:"Cinfo"},callbackF:function(e){var a={},n={},s="",i="",o="",r={},l="";for(var c in e)switch(c){case"1月涨跌":a.yyzd=e["1月涨跌"];break;case"5日涨跌":a.wrzd=e["5日涨跌"];break;case"市净率":a.syl=e["市净率"];break;case"市盈率TTM":a.sylTTM=e["市盈率TTM"];break;case"总市值":a.zsz=e["总市值"];break;case"总股本":a.zgb=e["总股本"];break;case"流通市值":a.ltsz=e["流通市值"];break;case"流通股本":a.ltgb=e["流通股本"];break;case"净利润业绩预告":a.jlryjbg=e["净利润业绩预告"];break;case"定报预披露日":a.dbyplr=e["定报预披露日"];break;case"概念题材":s=e["概念题材"];break;case"实际控制人":i=e["实际控制人"];break;case"产权关系":o=e["产权关系"];case"分配预案":n.fpya=e["分配预案"];break;case"最近除权":n.zjcq=e["最近除权"];break;case"股东大会日期":n.gddhrq=e["股东大会日期"];break;case"限售股份解禁":n.xsgfjz=e["限售股份解禁"];break;case"限售股解禁股数":n.xsgjjgf=e["限售股解禁股数"];break;case"地址":r.dz=e["地址"];break;case"电话":r.dh=e["电话"];break;case"简介":l=e["简介"];break;case"网址":r.wz=e["网址"];break;case"联系人":r.lxr=e["联系人"];break;case"邮箱":r.yx=e["邮箱"];break;case"邮编":r.yb=e["邮编"]}basicAllData={},basicAllData.basicHeadData=a,basicAllData.gbData=n,basicAllData.tcData=s,basicAllData.sjkzr=i,basicAllData.cqkx=o,basicAllData.lxdzData=r,basicAllData.gsjj=l,basicAllData.stockName=e["公司简称"],basicAllData.stockCode=e.code,t(document).trigger("basicDataBack")}},b={conditions:{m:"F9stock",c:"Glance",obj:m,f:"Finance"},callbackF:function(e){importantData=e.Important,financeData=e.Finance,t(document).trigger("financeDataBack")}},y={conditions:{m:"F9stock",c:"Glance",f:"Industry",obj:m,tp:1},callbackF:function(e){MarketData=e,t(document).trigger("MarketDataBack")}},_={conditions:{m:"F9stock",c:"Glance",f:"Industry",obj:m,tp:3},callbackF:function(e){valuationData=e,t(document).trigger("valuationDataBack")}},D={conditions:{m:"F9stock",c:"Glance",f:"Industry",obj:m,tp:2},callbackF:function(e){ScaleData=e,t(document).trigger("ScaleDataBack")}},x={conditions:{m:"F9stock",c:"Glance",f:"Industry",obj:m,tp:4},callbackF:function(e){industryFinanceData=e,t(document).trigger("industryFinanceDataBack")}},C={conditions:{m:"F9stock",c:"Glance",f:"JYZR",obj:m},callbackF:function(e){jgpjData=e.jgpj,rzrqData=e.rzrq,ylycData=e.ylyc,t(document).trigger("ratingsMarginDataBack")}},j={conditions:{m:"F9stock",c:"Glance",obj:m,f:"Sten"},callbackF:function(e){holdersData=e.holders,floatingData=e.floating,holdernumData=a(e.holdernum),SinholerData=e.Sinholer,ProductData=e.Product,t(document).trigger("hfhspDataBack")}},k={conditions:{so:"jso-ui-zhpnews.jar",paraencode:"base64","function":"gw.sh.func.MyOptionalStocksNewsRequest",parameter:'{"fids":"CC3,CC10,C1,C2,C3,C4,C16,C31,CC99,C8","dcategory":"1","sort":"C16:-1","skip":"0","amount":8,"stocks":"'+m+'"}'},callbackF:function(e){newBackData=e,t(document).trigger("newDataBack")}},w={conditions:{so:"jso-ui-notice_new.jar",paraencode:"base64","function":"gw.sh.func.NoticeSearchRequest",parameter:'{"type":"3","objCode":"'+m+'","itemId":"qbhs","pageNum":"1","pageSize":"7"}'},callbackF:function(e){bulletinBackData=e,t(document).trigger("bulletinDataBack")}},F={conditions:{so:"jso-ui-companynewsnotify.jar",paraencode:"base64","function":"gw.sh.func.CompanyNewsRequest",parameter:'{"fids":"C1,C3,C4,C6,C8","titleKeys":"互动","amount":4,"objs":"'+m+'"}'},callbackF:function(e){TZZNewsBackData=e,t(document).trigger("tzznewBack")}},T={getStkpriceData:function(){n(f)},getStkstatusData:function(){n(g)},getBasicData:function(){n(v)},getFinanceData:function(){n(b)},getStockholderData:function(){n(j)},getindustryFinanceData:function(){n(x)},getValuationData:function(){n(_)},getMarketData:function(){n(y)},getScaleData:function(){n(D)},getNewData:function(){r(k)},getBulletinData:function(){r(w)},getTZZData:function(){r(F)},getRatingsMarginData:function(){n(C)},getjgybData:s,getDynaData:o,getStkData:i};return T}),define("complex/js/view/complexV",["jquery"],function(t){function e(t,e,a){var n='<table class="hs_t_1" style="table-layout: fixed">';if(e&&t.thData&&""!=t.thData){n+='<thead><tr class="under_line">';for(var s=0;s<t.thData.length;s++)if("title"==t.thData[s])n+='<th class="t_name"></th>';else if(0==s)n+='<th class="t_name">'+t.thData[s]+"</th>";else{var i="";a===!0&&1===s&&(i=' class="t_type_jg"'),n+="<th"+i+">"+t.thData[s]+"</th>"}n+="</tr>"}if(t.tdData&&""!=t.tdData){n+="<tbody>";for(var o=0;o<t.tdData.length;o++){n+="<tr>";for(var r=0,l=t.thData.length;l>r;r++){var i="",c="";(0==r||"title"==t.thData[r])&&(i="t_name",c='title="'+t.tdData[o][t.thData[r]]+'"'),n+='<td class="'+i+'" '+c+">"+t.tdData[o][t.thData[r]]+"</td>"}n+="</tr>"}n+="</tbody>"}return n+="</table>"}function a(e,a){t(".stockCode").html(a),t(".stockName").html(e)}function n(){A.removeClass("blue")}function s(t){parseFloat(t[0].lastclose)<parseFloat(t[0].new)?(A.removeClass("green"),A.addClass("red")):(A.removeClass("red"),A.addClass("green"));var e=100*(parseFloat(t[0].new)/parseFloat(t[0].lastclose)-1);isNaN(e)&&(e=0),A.addClass("blue"),M.html(parseFloat(t[0].new).toFixed(2)),P.html(e.toFixed(2)+"%"),O.html((parseFloat(t[0].new)-parseFloat(t[0].lastclose)).toFixed(2)),setTimeout(n,200)}function i(t,e){2==e||3==e?(M.html(parseFloat(t[0].lastclose).toFixed(2)),P.html("-"),O.html("-")):1==e&&s([{lastclose:t["前收盘"],"new":t["收盘价"]}])}function o(t,e,a){if(t.length<=e)return t;var n=t.split("\r\n"),s=[],i=new RegExp(".{"+e+"}","g");a=void 0==a?"\r\n":a;for(var o in n)if(n[o].length<=e)s.push(n[o]);else{var r=n[o].match(i);r.push(n[o].substring(r.join("").length)),s.push(r.join(a))}return s.join(a)}function r(e){var a='<table class="hs_t_1" style="table-layout: fixed"><tr>';a+='<td style="width:84px">最新业绩预告：</td><td class="t_name" title="'+o(e.jlryjbg,50)+'">'+e.jlryjbg+"</td></tr>",a+='<tr><td>定报预披露日：</td><td class="t_name" title="'+o(e.dbyplr,50)+'">'+e.dbyplr+"</td></tr></table>",t("#dbplr").html(a),a='<table class="hs_t_1" style="table-layout: fixed"><tr>',a+='<td width="14%">总股本：</td><td width="32%" class="t_name" title="'+e.zgb.replace("亿","亿股")+'">'+e.zgb.replace("亿","亿股")+"</td>",a+='<td width="20%">流通股本：</td><td width="34%" class="t_name" title="'+e.ltgb.replace("亿","亿股")+'">'+e.ltgb.replace("亿","亿股")+"</td>",a+="</tr></table>",t("#fhsz").html(a)}function l(t){for(var e,a,n="[",s="[",i=0,o=2,r=0,l=t.data.length;l>r;r++)"1"==t.data[r].nsymbol&&(i=r,e=parseFloat(t.data[r].value)>parseFloat(t.Industry)?"高于":parseFloat(t.data[r].value)<parseFloat(t.Industry)?"低于":"等于",a=parseFloat(t.data[r].value)>parseFloat(t.Market)?"高于":parseFloat(t.data[r].value)<parseFloat(t.Market)?"低于":"等于"),0!=r&&(n+=",",s+=","),n+='"'+t.data[r].name+'"',s+=t.data[r].value,parseFloat(t.data[r].value)>o&&(o=parseFloat(t.data[r].value));var c=o/10;c=.1>c?.1:c.toFixed(1),n+="]",s+="]";var d="./resources/charts/cwzkpmChart.html?xAxisValue="+n+"&yData="+s+"&myNum="+i+"&IndustryValue="+t.Industry+"&marketValue="+t.Market+"&ykedu="+c;return{bjhyValue:e,bjscValue:a,chartUrl:d}}function c(e,a){var n=document.createElement("iframe");document.getElementById(a).appendChild(n),t("#"+a+" iframe").one("load",function(){this.style.visibility="visible"}).css({visibility:"hidden"}).attr("src",encodeURI(e)).show()}function d(e){if(console.log("####gscbxData"),console.dir(e),null==e.CompanyCount||void 0==e.CompanyCount||"null"==e.CompanyCount)t("#hypmContent .hy_con").html("所属行业：--"),t("#hypmscmx").html('<p class="no_data_color">提示：该品种无此项记录，或在当前条件下无数据</p>');else{if(t("#hypmContent .hy_con").html("所属行业："+e.CompanyCount),t("#scbxRank").html(e.Rank),parseFloat(e.Company[0].C21)>parseFloat(e.SSE[0]["上证指数1年涨跌幅"]))var a="强于";else var a="弱于";if(t("#scbxbjsc").html(a),parseFloat(e.Company[0].C21)>parseFloat(e.Industry[0]["行业指数1年涨跌幅"]))var a="强于";else var a="弱于";t("#scbxbjhy").html(a);var n="[";if(e.Company.length>0){for(var s in e.Company)n+="["+new Date(e.Company[s].C1).getTime()+","+parseFloat(e.Company[s].C21).toFixed(4)+"],";n=n.substring(0,n.length-1)}n+="]";var i="[";if(e.SSE.length>0){for(var s in e.SSE)i+="["+new Date(e.SSE[s].C1).getTime()+","+parseFloat(e.SSE[s]["上证指数1年涨跌幅"]).toFixed(4)+"],";i=i.substring(0,i.length-1)}i+="]";var o="[";if(e.Industry.length>0){for(var s in e.Industry)o+="["+new Date(e.Industry[s].C1).getTime()+","+parseFloat(e.Industry[s]["行业指数1年涨跌幅"]).toFixed(4)+"],";o=o.substring(0,o.length-1)}o+="]";var r="./resources/charts/scbxpmChart.html?Company="+n+"&SSE="+i+"&Industry="+o+"&Company_title="+t("input[type=hidden]").val();t("#scpmgsgmLoadingDiv").addClass("hide_box"),c(r,"scpmGsgmChartBox")}}function p(e){if(console.log("####gsgmData"),console.dir(e),null==e.CompanyCount||void 0==e.CompanyCount||"null"==e.CompanyCount)t("#hypmContent .hy_con").html("所属行业：--"),t("#hypmgsgm").html('<p class="no_data_color">提示：该品种无此项记录，或在当前条件下无数据</p>');else{t("#hypmContent .hy_con").html("所属行业："+e.CompanyCount),t("#gsgmRank").html(e.Rank);var a,n=l(e),a=n.chartUrl+"&ytitle=流通市值&Unit=亿元";t("#gsgmbjhy").html(n.bjhyValue),t("#gsgmbjsc").html(n.bjscValue),t("#hypmgsgmLoadingDiv").addClass("hide_box"),c(a,"hypmGsgmChartBox")}}function h(e){if(null==e.CompanyCount||void 0==e.CompanyCount||"null"==e.CompanyCount)t("#hypmContent .hy_con").html("所属行业：--"),t("#hypmgzsp").html('<p class="no_data_color">提示：该品种无此项记录，或在当前条件下无数据</p>');else{t("#hypmContent .hy_con").html("所属行业："+e.CompanyCount),t("#gzspTTMRank").html(e.Rank);var a,n=l(e),a=n.chartUrl+"&ytitle=市盈率&Unit=";t("#zspbjhy").html(n.bjhyValue),t("#zspbjsc").html(n.bjscValue),t("#hypmzspLoadingDiv").addClass("hide_box"),c(a,"hypmzspChartBox")}}function u(e){if(null==e.CompanyCount||void 0==e.CompanyCount||"null"==e.CompanyCount)t("#hypmContent .hy_con").html("所属行业：--"),t("#hypmcwzk").html('<p class="no_data_color">提示：该品种无此项记录，或在当前条件下无数据</p>');else{t("#hypmContent .hy_con").html("所属行业："+e.CompanyCount),t("#cwzkTTMRank").html(e.Rank);var a,n=l(e),a=n.chartUrl+"&ytitle=每股收益&Unit=元";t("#cwzkbjhy").html(n.bjhyValue),t("#cwzkbjsc").html(n.bjscValue),t("#hypmcwzkLoadingDiv").addClass("hide_box"),c(a,"hypmcwzkChartBox")}}function m(a){if(a[1][0]){"null"!=a[0]["评级机构家数"]&&null!=a[0]["评级机构家数"]&&""!=a[0]["评级机构家数"]&&"0"!=a[0]["评级机构家数"]&&(t("#pjdate").html(N+"-"+U+"-"+R),t("#pjnum").html(a[0]["评级机构家数"]),t("#ztpj").html(a[1][0]["综合评级"]));var n;a[1][1]&&(n=a[1][1]["综合评级"]);var s="./resources/charts/jgpjChart.html?newValue="+a[1][0]["综合评级"]+"&lastValue="+n;t("#jgpjLoadingDiv").addClass("hide_box");var i=document.createElement("iframe");i.id="jgpjframe",document.getElementById("jgpjBox").appendChild(i),t("#jgpjframe").one("load",function(){this.style.visibility="visible"}).css({visibility:"hidden"}).attr("src",encodeURI(s)).show();var o={};o.thData=["评级等级","强烈看涨","看涨","看平","看跌","强烈看跌"],a[1].length>0&&(o.tdData=a[1],o.tdData[0]["评级等级"]="最新评级家数",a[1][1]&&(o.tdData[1]["评级等级"]="上月评级家数"),jgpjMousemoveHtmlStr=e(o,!0),t("#jgpjmousemoveBox").html(jgpjMousemoveHtmlStr));for(var r="<ul>",l=0,c=a[2].length;c>l;l++){var d="";"维持"==a[2][l]["评级变动方向"]?d="resources/img/complex/wc.gif":"上调"==a[2][l]["评级变动方向"]?d="resources/img/complex/st.gif":"首次"==a[2][l]["评级变动方向"]?d="resources/img/complex/wc.gif":(a[2][l]["评级变动方向"]="",d="resources/img/complex/xt.gif"),r+='<li><img class="reviseIcon" src="'+d+'"><span> '+a[2][l]["研报日期"]+"</span>"+a[2][l]["评级机构"]+"　"+a[2][l]["评级变动方向"]+'评级："'+a[2][l]["评级原始方向"]+'"</li>'}r+="</ul>",t("#jgpjmxBox").html(r)}else t("#jgpjBox").parent().html('<p class="m_bottom_5 no_data_color">提示：该品种无此项记录，或在当前条件下无数据</p>'),t("#jgpjLoadingDiv").addClass("hide_box")}function g(e){if(console.dir("融资融券"),console.dir(e),e.data1&&void 0!=e.data1&&null!=e.data1){var a=parseFloat(e.data1["融资余额"])/parseFloat(e.data1["流通市值"])*100;t("#rzrqContent .m_bottom_5").html("截止"+e.data1["截止日期"]+"，融资余额为"+f(e.data1["融资余额"])+'万元，占流通市值比为<span style="color:#F94F4F">'+a.toFixed(2)+"%</span>。融券余额为"+f(e.data1["融券余额"])+"万元。");var n="./resources/charts/rzChart.html?datas="+JSON.stringify(e.data2);t("#rzrqLoadingDiv").addClass("hide_box");var s=document.createElement("iframe");s.src=encodeURI(n),s.id="rzChartIframe",document.getElementById("rzChartBox").appendChild(s),t("#rzChartIframe").one("load",function(){this.style.visibility="visible"}).css({visibility:"hidden"}).attr("src",encodeURI(n)).show();var n="./resources/charts/rqChart.html?datas=["+parseFloat(e.data1["融资余额"])+","+parseFloat(e.data1["流通市值"])+"]",i=document.createElement("iframe");i.src=encodeURI(n),i.id="rqChartIframe",document.getElementById("rqChartBox").appendChild(i),t("#rqChartIframe").one("load",function(){this.style.visibility="visible"}).css({visibility:"hidden"}).attr("src",encodeURI(n)).show(),t("#rzrqLoadingDiv").addClass("hide_box")}else t("#rzrqContent").html('<p class="m_bottom_5 no_data_color">提示：该品种无此项记录，或在当前条件下无数据</p>'),t("#rzrqLoadingDiv").addClass("hide_box")}function f(t,e){if("NaN"==t||"null"==t||0/0==t||null==t||void 0==t||""==t)return"0.00";e?t=Number(t).toFixed(e)+"":t+="";var a=t.indexOf("."),n=t;-1!=a&&(n=t.substring(0,a));for(var s=/(-?\d+)(\d{3})/;s.test(n);)n=n.replace(s,"$1,$2");return-1!=a?n+t.substring(a):n}function v(a){if(null==a["截止日期"]||void 0==a["截止日期"]||""==a["截止日期"])t("#ylyczf").parent().html('<p class="m_bottom_5 no_data_color">提示：该品种无此项记录，或在当前条件下无数据</p>');else{var n="[",s="[",i="",o="",r="",l={};l.thData=["title"];for(var c in a.data[0])"C4"!=c?(n+='"'+c+'",',s+=a.data[0][c].replace(/\,/g,"")+",",l.thData.push(c),-1!=c.indexOf("预测")&&(o=a.data[0][c])):i=a.data[0].C4;n=n.slice(0,-1),s=s.slice(0,-1),n+="]",s+="]";var d="[";for(var c in a.data[1])"C4"!=c&&(d+=a.data[1][c]+",",-1!=c.indexOf("预测")&&(r=a.data[1][c]));d+="]",(""==o||void 0==o)&&(o="--");var p="截止"+N+"-"+U+"-"+R+"，近半年共有"+a["评级机构家数"]+"家机构对",h=a.year+"年度业绩作出预测，平均预测净利润为"+o+"亿，平均预测基本每股收益为"+r+"元(最高"+a["最高"]+"元，最低"+a["最低"]+"元)。",u=100*(parseFloat(o.replace(/\,/g,""))/parseFloat(a.data[0][parseInt(a.year)-1].replace(/\,/g,""))-1),m="",g="涨幅",f="上涨";u=u.toFixed(2),u>0?m="resources/img/complex/st.gif":0>u?(m="resources/img/complex/xt.gif",g="降幅",f="下滑"):(("--"==o||0/0==u)&&(u="--"),m="resources/img/complex/wc.gif");var v='<img class="reviseIcon" src="'+m+'">照此预测，'+a.year+"年度净利润相对去年"+f+"，"+g+"为"+u+"%";t("#ylycjzDateNum").html(p),t("#forecastProfitBrief").html(h),t("#ylyczf").html(v);var b="./resources/charts/ylycChart.html?xAxisValue="+n+"&yData="+s+"&yAxisTitle="+i+"&mgsyseriesData="+d;t("#ylycLoadingDiv").addClass("hide_box");var y=document.createElement("iframe");document.getElementById("ylycChartBox").appendChild(y),t("#ylycChartBox iframe").one("load",function(){this.style.visibility="visible"}).css({visibility:"hidden"}).attr("src",encodeURI(b)).show(),l.tdData=a.data,l.tdData[0].title=a.data[0].C4,l.tdData[1].title=a.data[1].C4;var _="";_=e(l,!0),t("#ylycMousemoveTableBox").html(_)}}function b(t,e){for(var a="<ul>",n=0,s=t.length;s>n;n++){var i="",o="";if(1===e||3==e)var r="index";else if(2===e){var r="notice",o="-"+t[n].type;""!=t[n].url&&(i=' <i class="icon-'+t[n].url.toLowerCase()+' NBDown"></i>')}else if(4===e){var r="report";""!=t[n].url&&(i=' <i class="icon-'+t[n].url.split(".")[1].toLowerCase()+' NBDown"></i>')}var l=t[n].time.substr(0,4)+"-"+t[n].time.substr(4,2)+"-"+t[n].time.substr(6,2);a+='<li title="'+t[n].content+'" data-time="'+l+'" data-url="'+encodeURI(t[n].url)+'" data-id="'+t[n].id+'"><span>'+l+"</span>"+i+"<a href=\"dzh://navigate?'root://news/details/"+r+".html?skin=white#"+t[n].id+o+"#DZHPOPUP(650,400)#'\">",a+=t[n].content,a+="</a></li>"}return a+="</ul>"}function y(e){if(e.length<=0)t("#newBox").addClass("no_data_color").html("提示：该品种无此项记录，或在当前条件下无数据");else{for(var a=[],n=0,s=e.length;s>n;n++)a[n]={},a[n].time=e[n].C16,a[n].content=e[n].C3,a[n].url=e[n].C4,a[n].id=e[n].C1;var i=b(a,1);t("#newBox").html(i)}}function _(e){if(e.length<=0)t("#bulletinBox").addClass("no_data_color").html("提示：该品种无此项记录，或在当前条件下无数据");else{for(var a=[],n=0,s=e.length;s>n;n++)a[n]={},a[n].time=e[n].C2,a[n].content=e[n].C3,a[n].url=e[n].C7,a[n].id=e[n].C1,a[n].type=e[n].TYPE;var i=b(a,2);t("#bulletinBox").html(i)}}function D(e){if(e.length<=0)t("#tzznewBox").addClass("no_data_color").html("提示：该品种无此项记录，或在当前条件下无数据");else{for(var a=[],n=0,s=e.length;s>n;n++)a[n]={},a[n].time=e[n].C6,a[n].content=e[n].C3,a[n].url=e[n].C4,a[n].id=e[n].C1;var i=b(a,3);t("#tzznewBox").html(i)}}function x(e){if(e.length<=0)t("#jgybBox").addClass("no_data_color").html("提示：该品种无此项记录，或在当前条件下无数据");else{for(var a=[],n=0,s=e.length;s>n;n++)a[n]={},a[n].time=e[n].rq.replace(/-/g,""),a[n].content=e[n].bt,a[n].url=e[n].wjlx,a[n].id=e[n].bgnm;var i=b(a,4);t("#jgybBox").html(i)}}function C(e){var a=e.fpya.split(":"),n="--"==e.xsgjjgf?"":"("+e.xsgjjgf+")",s="<tr><td>"+(a[0]?a[0]:"分配方案")+"：</td>";
s+='<td class="t_name" title="'+a[1]+'">'+a[1]+"</td>",s+='<td>股东大会日期：</td><td class="t_name" title="'+e.gddhrq+'">'+e.gddhrq+"</td></tr>",s+='<tr><td>最近除权：</td><td class="t_name" title="'+e.zjcq+'">'+e.zjcq+"</td>",s+='<td>限售股份解禁：</td><td class="t_name" title="'+e.xsgfjz+n+'">'+e.xsgfjz+n+"</td></tr>",t("#fhsz table").append(s)}function j(e,a,n){var s="";s="null"==e||null==e||""==e?"--":e.replace(/\,/g,"，"),t("#tcSpan").text(s);var i="",o="";"null"==a||null==a||""==a?i="--":(i=a,o='<span id="propertyDetail">详情</span>'),t("#sjkzrDiv").html('<p><span class="red">实际控制人</span>：'+i+o+'</p><div id="propertyPosition"><pre id="propertyBox">'+n+"</pre></div>")}function k(e){var a='<tbody><tr><td class="t_name address_1">地址：</td><td class="addrees_value1" title="'+e.dz+'">';a+=e.dz,a+='</td><td class="t_name address_2">邮编：</td><td class="addrees_value2" title="'+e.yb+'">',a+=e.yb,a+='</td></tr><tr><td class="t_name address_1">网址：</td><td class="addrees_value1" title="'+e.wz+'">',a+=e.wz,a+='</td><td class="t_name address_2">联系人：</td><td class="addrees_value2" title="'+e.lxr+'">',a+=e.lxr,a+='</td></tr><tr><td class="t_name address_1">邮箱：</td><td class="addrees_value1" title="'+e.yx+'">',a+=e.yx,a+='</td><td class="t_name address_2">电话：</td><td class="addrees_value2" title="'+e.dh+'">',a+=e.dh,a+="</td></tr></tbody>",t("#addreesTable").html(a)}function w(e){t("#gsjjP").text(e)}function F(t,e){var a=/\b\d{4}-\d{1,2}-\d{1,2}\b/;for(eachTh in e)a.test(eachTh)&&t.push(eachTh)}function T(a){var n=[];n.push("title"),F(n,a[0]);var s=a,i={};i.thData=n,i.tdData=s;var o=e(i,!0);t("#importantTable").html(o)}function I(a){if(a.length<=1)t("#sdgdDiv").append('<div class="padding_10 no_data_color" id="sdgdTable">提示：该品种无此项记录，或在当前条件下无数据</div>');else{t("#sdgd_lt").parent().find("#sd_title_bh").append('<span class="date_bb" id="sdgd_date">报表日期：'+a[0].C1+"</span>");var n={};n.thData=["股东名称","持股数(万股)","占总股本(%)","较上期(万股)"],n.tdData=a;var s="";s=e(n,!0),s=s.replace('class="hs_t_1','id="sdgdTable" class="hs_t_1'),t("#sdgdDiv").append(s)}}function S(a){if(a.length<=1)t("#sdgdDiv").append('<div class="padding_10 no_data_color d_none" id="sdltgdTable">提示：该品种无此项记录，或在当前条件下无数据</div>');else{t("#sdgd_lt").parent().find("#sd_title_bh").append('<span class="date_bb d_none" id="sdltgd_date">报表日期：'+a[0].C1+"</span>");var n={};n.thData=["股东名称","持股数(万股)","占总股本(%)","较上期(万股)"],n.tdData=a;var s="";s=e(n,!0),s=s.replace('class="hs_t_1','id="sdltgdTable" class="hs_t_1 d_none"'),t("#sdgdDiv").append(s)}}function B(a){if(a.length<=0){var n=t("#zycpBox");n.addClass("no_data_color"),n.html("提示：该品种无此项记录，或在当前条件下无数据")}else{var n=t("#company_pro");3==parseInt(a[0].C22)?n.attr("data-type","42"):1==parseInt(a[0].C22)&&n.attr("data-type","41"),n.parent().find("span").append('<span class="date_bb">报表日期：'+a[0].C1+"</span>");var s={};s.thData=["产品名称","销售收入","占主营收入比重"],s.tdData=a;var i="";i=e(s,!0),i=i.replace("销售收入","销售收入(万)").replace("占主营收入比重","占主营收入比重(%)"),t("#zycpBox").html(i)}}function z(a){if(a.length<=0){var n=t("#jgcgBox");n.addClass("no_data_color"),n.html("提示：该品种无此项记录，或在当前条件下无数据")}else{t("#jgcg_zy").parent().find("span").append('<span class="date_bb">报表日期：'+a[0].C1+"</span>");var s={};s.thData=["机构名称","机构类型","持股数(万股)","占流通股(%)","较上期(万股)"],s.tdData=a;var i="";i=e(s,!0,!0),t("#jgcgBox").html(i)}}function q(a){console.log(a),a.thData.length<=1?t("#gdhsBox").addClass("no_data_color").html("提示：该品种无此项记录，或在当前条件下无数据"):(holderNumTableStr=e(a,!0),t("#gdhsBox").html(holderNumTableStr))}function E(a){function n(t,a){s+='<div class="content cw_content">',s+=e(t,a),s+="</div>"}var s="",i=0;financeTableData=[],financeTableData[0]={},financeTableData[0].thData=[],financeTableData[0].thData.push("title"),F(financeTableData[0].thData,a[0]);for(var o=1;o<a.length;o++)if(financeTableData[i]||(financeTableData[i]={}),financeTableData[i].tdData||(financeTableData[i].tdData=[]),1==a[o].flag){financeTableData[i].thData=financeTableData[0].thData;var r=!1;0==i&&(r=!0);var l="";""!=a[o]&&(l='<span class="rightBottomcwDW">'+a[o].danwei+"<span>"),n(financeTableData[i],r),s+='<div class="item_list2"><span class="rightBottomcwBT">'+a[o].title+"</span>"+l+"</div>",i++}else financeTableData[i].tdData.push(a[o]);financeTableData[i].thData=financeTableData[0].thData,n(financeTableData[i],!1),t("#rightBody").append(s)}var L=new Date,N=L.getFullYear(),U=L.getMonth()+1,R=L.getDate(),A=t(".SL-header").find("span"),M=A.eq(0),P=A.eq(1),O=A.eq(2),H={setStockCodeName:a,setBasicFinanceValue:r,createGBGDHtml:C,setTCKzrValue:j,createAddreesTbody:k,appendGsjjPText:w,createImportantTable:T,createFinanceTable:E,createImportantTable:T,createHoldersTable:I,createFloatingTable:S,createProductTable:B,createHoldernumTable:q,createSinholerTable:z,createNewUl:y,createBulletinUl:_,createTZZNewUl:D,createCwzkPmChart:u,createGsgmChart:p,createSCBXChart:d,creategzspPmChart:h,createJgpjUl:m,createRzRqTableChart:g,createForecastProfit:v,createJgybUl:x,createDynaStatusData:i,setDynaData:s};return H}),define("complex/js/controller/complex.js",["jquery","../model/dataRquest","../view/complexV","../../../resources/js/services"],function(t,e,a,n){return{init:function(){function s(e){var a=e.target.parentNode.id;if("hypmLabel"==a||"sdgdLabel"==a){if("sdgdLabel"==a){var n=t("#sd_title_bh").find(".sd_t");"十大股东"==n.text()?(n.text("十大流通股东"),t("#sdgd_date").addClass("d_none"),t("#sdltgd_date").removeClass("d_none")):(n.text("十大股东"),t("#sdgd_date").removeClass("d_none"),t("#sdltgd_date").addClass("d_none"))}selectedLable=t("#"+a+" div.selected"),selectedLable.removeClass("selected"),t(e.target).addClass("selected")}}function i(e){s(e);var a=t("#hypmContent div.select_box");a.removeClass("select_box"),a.addClass("hide_box")}function o(e,a,n){var s="dzh://FILEMGR?";s+=t.param({LINK:e,OPEN:1,SHOWUI:1,file:n,saveas:n+"."+a}),window.external&&window.external.download?window.external.download(decodeURIComponent(s)):alert(decodeURIComponent(s))}e.getStkstatusData(),t(document).on("stkstatusDataBack",function(){var n=t("#leftRightBox"),s="&nbsp;&nbsp;提示：该品种无此项记录，或在当前筛选条件下无数据";if(t("#leftRightBox").show(3),!stkstatusData)return t(".SL-header").find("span").html("-"),n.html(s),!1;if(console.log(stkstatusData),t("input[type=hidden]").val(stkstatusData["证券简称"]),0===parseInt(stkstatusData["显示速览"]))return t(".SL-header").find("span").html("-"),n.html(s),!1;if(parseInt(stkstatusData["上市状态"])>1){if(t(".SL-header").find("span").html("-"),parseInt(stkstatusData["上市状态"])>2)return n.html(s),!1}else{var i=parseInt(stkstatusData["停牌类型"]);e.getStkData().then(function(t){console.dir(t);var n=new Date,s=n.getHours(),o=n.getMinutes();if(0===i)9>s||9==s&&15>o?e.getStkpriceData():e.getDynaData().progress(function(t){a.setDynaData(t)});else if(1===i||2==i){var r=stkstatusData["停牌时间"];r=r.substr(0,4)+"-"+r.substr(4,2)+"-"+r.substr(6,2)+" "+r.substr(8,2)+":"+r.substr(10,2)+":"+r.substr(12,2),2==i&&new Date(r).getTime()<n.getTime()?e.getDynaData().progress(function(t){a.setDynaData(t)}):a.createDynaStatusData(t,2)}})}console.dir(stkstatusData)}),t(document).on("stkpriceDataBack",function(){stkpriceData&&a.createDynaStatusData(stkpriceData,1)}),t(document).on("basicDataBack",function(){basicAllData&&(a.setStockCodeName(basicAllData.stockName,basicAllData.stockCode),a.setBasicFinanceValue(basicAllData.basicHeadData),a.createGBGDHtml(basicAllData.gbData),a.setTCKzrValue(basicAllData.tcData,basicAllData.sjkzr,basicAllData.cqkx),a.appendGsjjPText(basicAllData.gsjj,basicAllData.sjkzr),a.createAddreesTbody(basicAllData.lxdzData),t("#propertyDetail").mouseout(function(){t("#propertyBox").css("display","none")}),t("#propertyDetail").mousemove(function(){t("#propertyBox").css("display","block")}))}),t(document).on("MarketDataBack",function(){a.createSCBXChart(MarketData)}),t(document).on("industryFinanceDataBack",function(){a.createCwzkPmChart(industryFinanceData)}),t(document).on("valuationDataBack",function(){a.creategzspPmChart(valuationData)}),t(document).on("ScaleDataBack",function(){a.createGsgmChart(ScaleData)}),t(document).on("ratingsMarginDataBack",function(){a.createJgpjUl(jgpjData),a.createRzRqTableChart(rzrqData),a.createForecastProfit(ylycData),t("#jgpjBox").mouseout(function(){t("#jgpjmousemoveBox").css("display","none")}),t("#jgpjBox").mousemove(function(e){t("#jgpjmousemoveBox").css("display","block");var a=e.clientY+document.body.scrollTop+20+"px",n=e.clientX+document.body.scrollLeft;t("#jgpjmousemoveBox table").css("top",a),t("#jgpjmousemoveBox table").css("left",n)}),t("#ylycChartBox").mouseout(function(){t("#ylycMousemoveTableBox").css("display","none")}),t("#ylycChartBox").mousemove(function(e){t("#ylycMousemoveTableBox").css("display","block");var a=e.clientY+document.body.scrollTop+20+"px",n=e.clientX+document.body.scrollLeft;n+560>document.body.clientWidth&&(n=document.body.clientWidth-560);t("#ylycMousemoveTableBox table").css("top",a),t("#ylycMousemoveTableBox table").css("left",n)})}),t(document).on("newDataBack",function(){a.createNewUl(newBackData)}),t(document).on("bulletinDataBack",function(){a.createBulletinUl(bulletinBackData)}),t(document).on("tzznewBack",function(){a.createTZZNewUl(TZZNewsBackData)}),e.getjgybData().then(function(t){a.createJgybUl(t)}),t(document).on("financeDataBack",function(){a.createImportantTable(importantData),a.createFinanceTable(financeData)}),t(document).on("hfhspDataBack",function(){a.createHoldersTable(holdersData),a.createHoldernumTable(holdernumData),a.createProductTable(ProductData),a.createSinholerTable(SinholerData),a.createFloatingTable(floatingData)});var r=t("#hypmLabel");r.click(function(){var e=event.target.id;if("scbx"==e){s(event),i(event);var a=t("#hypmscmx");a.removeClass("hide_box"),a.addClass("select_box")}if("gskm"==e){s(event),i(event);var a=t("#hypmgsgm");a.removeClass("hide_box"),a.addClass("select_box")}if("gzsp"==e){s(event),i(event);var a=t("#hypmgzsp");a.removeClass("hide_box"),a.addClass("select_box")}if("cwzk"==e){s(event),i(event);var a=t("#hypmcwzk");a.removeClass("hide_box"),a.addClass("select_box")}});var l=t("#sdgdLabel");l.click(function(){s(event),"sdltgd"==event.target.id?(t("#sdgdTable").addClass("d_none"),t("#sdltgdTable").removeClass("d_none")):"sdgd"==event.target.id&&(t("#sdltgdTable").addClass("d_none"),t("#sdgdTable").removeClass("d_none"))}),e.getBasicData(),e.getFinanceData(),e.getNewData(),e.getBulletinData(),e.getTZZData(),e.getindustryFinanceData(),e.getScaleData(),e.getMarketData(),e.getValuationData(),e.getRatingsMarginData(),e.getStockholderData(),t("#report_zy,#report_cw,#rzrq,#sdgd_lt,#gdhs_zy,#jgcg_zy,#company_pro,#company_news,#company_news_e,#company_notice,#company_yb").on("click",function(){var e=t(this).attr("id"),a=parseInt(t(this).attr("data-type")),s=(location.search.match(/obj=([^&]*)/)||[,"SH600000.stk"])[1];if("company_yb"==e){var i=external.httproot?external.httproot:"http://127.0.0.1:30719";top.location.href=i+"/stock/yjbg-112/index.html?type=search&code="+s}else if("rzrq"==e)top.location.href="DZH://REPORT?ReportModule.dll&MODULE='113'&MODULEREPLACED='ssddvsd'&PARAM='loadStat 1612 1612'";else{14==a&&t("#sdltgd").hasClass("selected")&&(a=13);var o=top.$.fn.zTree.getZTreeObj("nav"),r=o.getNodeByParam("id",a);o.selectNode(r);var l=r.url;l+=/\?/.test(l)?"&":"?",l+="obj="+s,33==a?location.href=l:("company_news_e"==e&&(l+="&guanjianzi=互动"),location.href=n.baseUrl+l)}}),t("#newBox,#bulletinBox,#tzznewBox,#jgybBox").on("click","li",function(e){var a=t(this).parent().parent(".content").attr("id"),s=t(this).attr("title"),i=t(this).attr("data-id"),r=t(this).attr("data-url"),l=(location.search.match(/obj=([^&]*)/)||[,"SH600000.stk"])[1],c=n.baseUrl+"/f9/";"I"==e.target.tagName&&("bulletinBox"==a?t.ajax({url:c+"?m=F9stock&c=Notice&type=3&obj="+l+"&tp=2&n_type=2&noticeid="+i,dataType:"jsonp"}).then(function(t){i="http://pdf.gw.com.cn/pdf/pdfPath/MRGG/"+t.DownAddr.replace(/\\/g,"/"),o(i,t.DownAddr.split(".").pop(),s)}):o(r.replace("1_",""),r.split(".").pop(),s))})}}}),define("resources/js/set_services",["jquery","./services"],function(t,e){return{obj:(location.search.match(/obj=([^&]*)/)||[,"SH600000.stk"])[1],type:(location.search.match(/type=([^&]*)/)||[,"jihe"])[1],DownUrl:"http://pdf.gw.com.cn/pdf/pdfPath/MRGG/",nodata:'<p class="no_data_color">提示：该品种无此项记录，或在当前条件下无数据</p>',getAjax:function(e,a){var n={obj:this.obj,type:this.type,m:"F9finance",c:"Glance",f:e};if(void 0!=a&&a instanceof Object)for(var s in a)n[s]=a[s];return t.ajax({url:"http://dsjalpha.gw.com.cn/f9/",data:n,dataType:"jsonp"})},getJavaSend:function(e){var a=void 0==e.url?"/rpc":e.url,n="";if(e.parameter.constructor===Object)n=btoa(JSON.stringify(e.parameter));else if(e.parameter.constructor===String){var s=[],i=e.parameter.split(";");for(var o in i)s.push(btoa(i[o]));n=s.join(",")}return t.send(a,{so:e.so,"function":e["function"],paraencode:"base64",parameter:n},function(){console.log("调JSO出错,参数为[[********************************"),console.log(e),console.log("]]********************************")})},replaceField:function(t){return t.replace(/(一季度|二季度|三季度|四季度)/g,function(t){return"一季度"==t?"Q1":"二季度"==t?"Q2":"三季度"==t?"Q3":"四季度"==t?"Q4":""})},createTable:function(t,e){var a="";if(void 0!=t&&t instanceof Array&&t.length>0&&e instanceof Array&&e.length>0){var n=' class="under_line"',s=[];t[0].line===!1&&(n=""),a='<table class="c-c-table common-table"><tr'+n+">";for(var i=0,o=t.length;o>i;i++){var r="";void 0!=t[i].cssHead&&(r=' class="'+t[i].cssHead+'"'),void 0!=t[i].cssClass&&(r=""!=r?r.replace('class="','class="'+t[i].cssClass+" "):' class="'+t[i].cssClass+'"',s[i]=' class="'+t[i].cssClass+'"'),void 0!=t[i].cssContent&&(s[i]=void 0!=s[i]?s[i].replace('class="','class="'+t[i].cssContent+" "):' class="'+t[i].cssContent+'"'),a+="<th"+r+">"+t[i].name+"</th>"}a+="</tr><tbody>";for(var l in e){a+="<tr>";for(var i=0,o=t.length;o>i;i++){var r="";void 0!=t[i].showTitle&&t[i].showTitle===!0&&(r=' title="'+e[l][t[i].field]+'" '),void 0!=s[i]&&(r+=s[i]),a+="<td"+r+">"+e[l][t[i].field]+"</td>"}a+="</tr>"}a+="</tbody></table>"}return a},createNotice:function(t){var e="<ul>";for(var a in t){var n=t[a].time.substr(0,4)+"-"+t[a].time.substr(4,2)+"-"+t[a].time.substr(6,2);e+='<li title="'+t[a].content+'" data-time="'+n+'" data-id="'+t[a].id+'"><span>'+n+'</span> <i class="'+this.getIcon(t[a].icon)+'" data-icon="'+t[a].id+"@@"+t[a].icon+"@@"+t[a].content+'"></i><a href="dzh://navigate?\'root://news/details/notice.html?skin=white#'+t[a].id+"-"+t[a].type+"#DZHPOPUP(650,400)#'\">"+t[a].content+'</a><span class="text-al">'+t[a].explan+"</span></li>"}return e+="</ul>"},downFile:function(e){var a=e.split("@@");this.getAjax("",{m:"F9stock",c:"Notice",type:14,tp:2,n_type:2,noticeid:a[0]}).then(function(e){var n=e.DownAddr.split(","),s=this.DownUrl+n[0].replace(/\\/g,"/"),i="dzh://FILEMGR?";i+=t.param({LINK:s,OPEN:1,SHOWUI:1,file:a[2],saveas:a[2]+"."+a[1].split(",")[0]}),window.external&&window.external.download?window.external.download(decodeURIComponent(i)):alert(decodeURIComponent(i))}.bind(this))},getIcon:function(t){var e=t.toLowerCase().split(",");if(e.length>1)switch(e[0]){case"doc":case"docx":case"pdf":case"rar":case"txt":case"xls":case"xlsx":e[0]=e[0]+"-m";break;default:e[0]="multiple"}return"icon-"+e[0]},getDate:function(){var t=new Date,e=t.getFullYear()-1,a=t.getMonth()+1,n=t.getDate();return t.setDate(n-1),yes_year=t.getFullYear(),yes_month=t.getMonth()+1,yesterday=t.getDate(),10>a&&(a="0"+a),10>yes_month&&(yes_month="0"+yes_month),10>n&&(n="0"+n),10>yesterday&&(yesterday="0"+yesterday),e+""+a+n+"-"+yes_year+yes_month+yesterday},redirect:function(t){var a=top.$.fn.zTree.getZTreeObj("nav"),n=a.getNodeByParam("id",t);a.selectNode(n);var s=n.url;s+=/\?/.test(s)?"&":"?",s+="obj="+this.obj,location.href=e.baseUrl+s},showLoading:function(t,e,a){var e=void 0==e?"visible":e,a=void 0==a?!0:a;"visible"==e?a===!0?(t.parent().removeClass("loading"),t.css({visibility:"visible"})):t.removeClass("loading"):a===!0?(t.parent().addClass("loading"),t.css({visibility:"hidden"})):t.addClass("loading")},arrRest:function(t,e,a){var e=void 0==arguments[1]?"日期":e,a=void 0==arguments[2]?"数值":a,n=[];for(var s in t)n.push([new Date(t[s][e]).getTime(),parseFloat(t[s][a])]);return n},custr:function(t,e,a){if(t.length<=e)return t;var n=t.split("\r\n"),s=[],i=new RegExp(".{"+e+"}","g");a=void 0==a?"\r\n":a;for(var o in n)if(n[o].length<=e)s.push(n[o]);else{var r=n[o].match(i);r.push(n[o].substring(r.join("").length)),s.push(r.join(a))}return s.join(a)},isEmpty:function(t){return void 0!=t&&null!=t&&""!=t&&"null"!=t&&"NULL"!=t&&0!=t?!1:!0},getVal:function(t,e){return e===!1?this.isEmpty(t)?"--":t:this.isEmpty(t)?"--":parseFloat(t).toFixed(2)},assetsCfgCommon:function(t){var e="";if(this.isEmpty(t)||t.length<1)e=this.nodata;else{for(var a=[],n=0,s=t.length;s>n;n++)for(var i in t[n]){if(0==n){var o={name:i,field:i,line:!1};(-1!=i.indexOf("简称")||-1!=i.indexOf("代码"))&&(o.cssClass="t_name"),a.push(o)}if(-1!=i.indexOf("持仓变动")){var r="",l="";parseFloat(t[n][i])<0?r="green":parseFloat(t[n][i])>0&&(r="red",l="+"),t[n][i]='<span class="'+r+'">'+l+t[n][i]+"</span>"}}e=this.createTable(a,t)}return e},getObjMax:function(t){var e="",a=0;for(var n in t){var s=parseFloat(t[n]);""==e?(e=n,a=s):"min"==arguments[1]&&a>s?(e=n,a=s):("max"==arguments[1]||void 0==arguments[1])&&s>a&&(e=n,a=s)}return[e,a]},getObjMin:function(t){return this.getObjMax(t,"min")},arrMax:function(t){return Math.max.apply(Math,t)},arrMin:function(t){return Math.min.apply(Math,t)},getIHtml:function(t){var e=' style="width:'+2.5*parseFloat(t)+'%"';return parseFloat(t)<0&&(e+=' class="t_green"'),"<i"+e+"></i>"}}}),define("resources/js/set_chat",["./_base","jquery","./set_services","highcharts"],function(t,e,a){return new(t.extend({assetsCfgQzhong:function(t){var n=e(".cfg-top .cfg-t-right").find(".commhei").eq(1);if(a.isEmpty(t)||t.constructor!=Object)n.html(a.nodata);else{var s=[{name:"券种名称",field:"d0",cssClass:"t_name",line:!1},{name:"占资产净值比(%)",field:"d1",cssHead:"t_colspan",cssContent:"t_p_right"},{name:"",field:"d2",cssHead:"t_co_re",cssClass:"t_co_len"},{name:"占比增减(%)",field:"d3"}],i=[{d0:"国债",d1:t["国债"],d2:a.getIHtml(t["国债"]),d3:t["国债占比增减"]},{d0:"金融债",d1:t["金融债"],d2:a.getIHtml(t["金融债"]),d3:t["金融债占比增减"]},{d0:"可转债",d1:t["可转债"],d2:a.getIHtml(t["可转债"]),d3:t["可转债占比增减"]},{d0:"企业债",d1:t["企业债"],d2:a.getIHtml(t["企业债"]),d3:t["企业债占比增减"]},{d0:"企业短期融资券",d1:t["企业短期融资券"],d2:a.getIHtml(t["企业短期融资券"]),d3:t["企业短期融资券占比增减"]},{d0:"中期票据",d1:t["中期票据"],d2:a.getIHtml(t["中期票据"]),d3:t["中期票据占比增减"]},{d0:"其他债",d1:t["其他债"],d2:a.getIHtml(t["其他债"]),d3:t["其他债占比增减"]}];n.html(a.createTable(s,i)),n.find(".t_colspan").attr("colspan",2),n.find(".t_co_re").remove()}},assetsCfgInd:function(t){var n=e(".cfg-top .cfg-t-right").find(".commhei").eq(0);if(a.isEmpty(t)||t.constructor!=Array||t.length<2)n.html(a.nodata);else{for(var s=[],i=0,o=t.length;o>i;i++)for(var r in t[i]){if(0==i){var l={name:r,field:r};"行业名称"==r&&(l.cssClass="t_name",l.line=!1),"占资产净值比(%)"==r&&(l.cssHead="t_colspan",l.cssContent="t_p_right"),s.push(l),"占资产净值比(%)"==r&&s.push({name:"",field:"x_",cssHead:"t_co_re",cssClass:"t_co_len"})}"占资产净值比(%)"==r&&(t[i].x_=a.getIHtml(t[i][r]))}n.html(a.createTable(s,t)),n.find(".t_colspan").attr("colspan",2),n.find(".t_co_re").remove()}a.showLoading(n,"visible",!1)},assetsCfgPie:function(t){if(a.isEmpty(t)||t.constructor!=Object)return void e("#a-c-chat").html(a.nodata);e(".assetsCfg-date").text(t["日期"]),delete t["日期"];var n=a.getObjMax(t),s=[];for(var i in t){var o=[i,parseFloat(t[i])];i==n[0]&&(o={name:i,y:n[1],sliced:!0,selected:!0}),s.push(o)}new Highcharts.Chart({chart:{renderTo:"a-c-chat",plotShadow:!1},exporting:{enabled:!1},credits:{enabled:!1},title:{text:""},tooltip:{formatter:function(){return this.key+"<br />资产分布:"+Highcharts.numberFormat(this.y,2,".")+"%"}},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,color:"#000000",connectorColor:"#000000",format:"{point.name}: {point.percentage:.2f} %"},showInLegend:!0}},series:[{type:"pie",name:"资产分布",data:s}]})},parse_chat:function(t,e,a,n){new Highcharts.Chart({chart:{renderTo:void 0==a?"jdsy-con":a,type:"column"},exporting:{enabled:!1},title:{text:""},subtitle:{text:""},xAxis:{tickLength:4,categories:t,tickmarkPlacement:"on",labels:{style:{color:"#606060",fontSize:"12px"}}},legend:{margin:2,y:14,itemStyle:{fontWeight:"normal"}},yAxis:{tickPixelInterval:30,title:{text:"",style:{width:"10em"},align:"high",rotation:0}},tooltip:{headerFormat:'<span style="font-size:13px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.4f} '+(n===!1?"亿份":"%")+"</b></td></tr>",footerFormat:"</table>",shared:!0,useHTML:!0},credits:{enabled:!1},plotOptions:{series:{stacking:n===!1?"normal":""},column:{pointPadding:.2,borderWidth:0}},series:e})},networth:function(t){a.getAjax("networth",{tp:t}).then(function(t){var n=e("#networth");void 0!=t.type&&void 0!=t.avg&&void 0!=t.val&&t.val.length>1?(1!=parseInt(t.type)&&e("#c-c-content .c-c-c-top").find("span").eq(4).addClass("selected").siblings().remove(),this.networth_chat(t.val[0].name,a.arrRest(t.val),a.arrRest(t.avg))):n.html(a.nodata),a.showLoading(e("#networth")),console.dir(t)}.bind(this))},networth_chat:function(t,e,a){new Highcharts.Chart({chart:{renderTo:"networth",backgroundColor:"#FFF",plotBackgroundColor:"#FFF",type:""},title:{text:"",x:-20},exporting:{enabled:!1},credits:{enabled:!1},legend:{margin:1,y:13,itemStyle:{fontWeight:"normal"}},xAxis:{type:"datetime",labels:{formatter:function(){return Highcharts.dateFormat("%Y-%m-%d",this.value)},style:{color:"#2D2D2D",fontFamily:"arial",fontSize:"11px"},y:30},gridLineWidth:0,gridLineColor:"#bababa",lineWidth:1,lineColor:"#bababa",tickLength:4},yAxis:{title:{text:""},labels:{formatter:function(){return this.value+"%"}},tickPixelInterval:30,plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{enabled:!1},plotOptions:{series:{marker:{enabled:!1}}},series:[{name:t,color:"#B40104",data:e},{name:"同类平均",data:a}]})}}))}),define("resources/js/set_index.js",["./_base","jquery","./set_services","./set_chat"],function(t,e,a,n){var s=t.extend(function(t){e.extend(this,t);var s=e("#top-cinfo-ri-ri");e("#top-cinfo-ri-cen dl").on("mouseenter","a[data-more]",function(){s.show(5)}),s.mouseleave(function(){e(this).hide(5)}),e("#c-c-content .c-c-c-top").on("click","[data-bind]",function(){a.showLoading(e("#networth"),"hidden"),n.networth(this.dataset.bind),e(this).addClass("selected").siblings().removeClass("selected")}),e(".item_list").on("click","a[data-type]",function(){a.redirect(this.dataset.type)}),e(".notice").on("click","i[data-icon]",function(){a.downFile(this.dataset.icon)}),e(".cfg-b-header").on("click","div",function(){e(this).addClass("selected").siblings().removeClass("selected"),e(".cfg-bottom").find(".commhei").eq(e(this).index()).show().siblings(".commhei").hide()}),e(".cfg-t-right .cfg-list").on("click","div",function(){e(this).addClass("selected").siblings().removeClass("selected"),e(".cfg-top .cfg-t-right").find(".commhei").eq(e(this).index()).show().siblings(".commhei").hide()})},{assetsCfg:function(){a.getAjax("assetsCfg").then(function(t){var s=e(".cfg-bottom").find(".commhei");n.assetsCfgPie(t["饼图"]),n.assetsCfgInd(t["行业分布"]),n.assetsCfgQzhong(t["券种分布"]),s.eq(0).html(a.assetsCfgCommon(t["重仓股"])),s.eq(1).html(a.assetsCfgCommon(t["重仓债"])),s.eq(2).html(a.assetsCfgCommon(t["重仓基金"])),a.showLoading(s.eq(0),"visible",!1),console.log(t)}.bind(this))},riskReturn:function(){var t={so:"jso-fc-socket.jar","function":"gw.sh.func.FCSocketRequest",parameter:"2;SECODE="+a.obj+"|*|SECODETYPE=6|*|REFINDEX=SH000001.index|*|REFINDEXTYPE=9|*|TRADEDATE="+a.getDate()+"|*|INDEXNAME=RiskBenefitAssessment|*|PRECISION=8|*|FREQ=1|*|NONRISKYIELD=|*|CALIBER=2|*|"};a.getJavaSend(t).then(function(t){var n=e(".riskReturn"),s="";if(a.isEmpty(t)||t.length<1)s=a.nodata;else{var s="",i=[{name:"风险调整收益",field:"d0",cssClass:"t_name",cssHead:"pink"},{name:"Jensen(%)",field:"d1"},{name:"Sharpe(%)",field:"d2"},{name:"Treynor(%)",field:"d3"},{name:"Sortino(%)",field:"d4"},{name:"信息比率(%)",field:"d5"}],o=[{d0:a.getVal(t[0]["集合理财简称"],!1),d1:a.getVal(t[0].Jensen),d2:a.getVal(t[0].Sharp),d3:a.getVal(t[0].Treynor),d4:a.getVal(t[0].Sortino),d5:a.getVal(t[0]["信息比率"])}];s=a.createTable(i,o),s+='<div class="rr-margin"></div>',delete i,o;var i=[{name:"波动性风险",field:"d0",cssClass:"t_name",cssHead:"pink"},{name:"Beta",field:"d1"},{name:"年化波动率(%)",field:"d2"},{name:"可决系数",field:"d3"},{name:"下行风险(%)",field:"d4"},{name:"跟踪误差(%)",field:"d5"}],o=[{d0:a.getVal(t[0]["集合理财简称"],!1),d1:a.getVal(t[0].Beta),d2:a.getVal(t[0]["年化波动率"]),d3:a.getVal(t[0]["决定系数R2"]),d4:a.getVal(t[0]["下跌风险(%)"]),d5:a.getVal(t[0]["跟踪误差"])}];s+=a.createTable(i,o),delete i,o}n.html(s),a.showLoading(n,"visible",!1),console.log(t)}.bind(this))},jltgGallery:function(){a.getAjax("jltgGallery").then(function(t){this.phaseFun(t.phase),this.mangerFun(t.manger),this.buyFun(t.buy),this.annualincome(t.annualincome),this.product_(t.product),console.dir(t)}.bind(this))},annualincome:function(t){var n=e(".c4-height"),s="";if(a.isEmpty(t))s=a.nodata;else{for(var i=[],o=[],r=0,l=t.length;l>r;r++){var c={};for(var d in t[r]){if(0==r){var p={};"name"==d?(p.name="",p.field=d,p.cssClass="t_name"):(p.name=d,p.field=d),i.push(p)}c[d]=t[r][d]}o.push(c)}s=a.createTable(i.reverse(),o)}n.html(s),a.showLoading(n,"visible",!1)},product_:function(t){var s=e(".product");if(a.isEmpty(t)||t.length<2)s.html(a.nodata);else{for(var i=[],o=[],r=[],l=[{name:"申购",color:"#F78A8A",type:"column",data:[]},{name:"赎回",color:"#84BC41",type:"column",data:[]},{name:"净申赎",dataLabels:{enabled:!0,color:"#318CC7"},color:"#318CC7",type:"spline",data:[]}],c=0,d=t.length;d>c;c++){var p={};for(var h in t[c]){if(0==c&&"净申赎"!=h){var u={};u.name=h,u.field=h,"报告期"==h&&(u.cssClass="t_name"),i.push(u)}p[h]=t[c][h],"报告期"==h&&(p[h]=a.replaceField(t[c][h]),r.push(p[h])),"本期申购"==h&&l[0].data.push(parseFloat(t[c][h].replace(/,/g,""))),"本期赎回"==h&&l[1].data.push(-parseFloat(t[c][h].replace(/,/g,""))),"净申赎"==h&&l[2].data.push(parseFloat(t[c][h]))}o.push(p)}l[0].data.reverse(),l[1].data.reverse(),l[2].data.reverse(),r.reverse(),n.parse_chat(r,l,"product-fe",!1),e(".product-table").html(a.createTable(i,o))}a.showLoading(s,"visible",!1)},buyFun:function(t){var n=e(".buy-cla");if(a.isEmpty(t))n.html(a.nodata);else{a.isEmpty(t.C4)||delete t.C4;var s='<table class="c-c-table common-table">',i=0,o=[],r=[];for(var l in t){var c="";t[l].length>6&&(c=' title="'+a.custr(t[l],20)+'"');var d='<td class="t_name" width="27%">'+l+"</td><td"+c+">"+t[l]+"</td>";5>i?o.push(d):r.push(d),i++}for(var l in o)s+="<tr>"+o[l]+'<td width="5%"></td>'+r[l]+"</tr>";s+="</table>",n.html(s)}a.showLoading(n,"visible",!1)},mangerFun:function(t){if(!a.isEmpty(t)){var n=e("#tzjl-con");n.find("tr").eq(0).find("td").eq(1).html("<span>"+t["名字"]+"</span>　　"+t["任职机构"]);var s=t["简历"],i="",o=n.find("tr").eq(1).find("td").eq(0);s.length>180&&(i=a.custr(s,35),s=s.substring(0,180)+"...",o.attr("title",i)),o.html(s),a.isEmpty(t["头像"])||n.find("tr").eq(0).find("td").eq(0).find("img").attr("src",t["头像"])}},phaseFun:function(t){var s=e("#jdsy-table"),i=e("#jdsy-con"),o=t.val.length;if(o>1){for(var r=[],l=[],c=[],d=[],p=["#B40104","#5EAAF6","#FFCC00"],h=0;o>h;h++){var u=0,m={},g={name:"",data:[]};for(var f in t.val[h]){if(0==h){var v="产品简称"!=f?f:"",b={name:v,field:"_"+u+"_"};0==u&&(b.cssClass="t_name"),r.push(b),0!=u&&c.push(v)}0==u?g.name=t.val[h][f]:g.data.push(parseFloat(t.val[h][f])),m["_"+u+"_"]=t.val[h][f],u++}(4==o&&3>h||3==o&&2>h)&&d.push(g),l.push(m)}for(var h=0,y=d.length;y>h;h++)d[h].color=p[h];n.parse_chat(c,d),s.html(a.createTable(r,l))}else i.html(a.nodata);a.showLoading(i,"visible",!1)},getNotice:function(){var t={so:"jso-ui-notice_new.jar","function":"gw.sh.func.NoticeSearchRequest",parameter:{type:14,pageSize:7,objCode:"PF"+a.obj.substring(1)+".fnd"}};a.getJavaSend(t).then(function(t){var n=e(".notice"),s="";if(a.isEmpty(t)||t.length<1)s=a.nodata;else{for(var i=[],o=0,r=t.length;r>o;o++)i[o]={},i[o].time=t[o].C2,i[o].content=t[o].C3,i[o].icon=t[o].C7,i[o].explan=t[o].C4,i[o].id=t[o].C1,i[o].type=t[o].TYPE;s=a.createNotice(i)}n.html(s),a.showLoading(n,"visible",!1),console.log(t)}.bind(this))},getInfo:function(){a.getAjax("getInfo").then(function(t){if(void 0!=t["券商代码"]){var n="";for(var s in t){var i=t[s];i.length>15&&(i=i.substring(0,15)+"..."),n+="<dd><span>"+s+'</span><span class="f-right t-right" title="'+a.custr(t[s],30)+'">'+i+"</span></dd>"}e("#c-r-info dl").html(n)}console.dir(t)}.bind(this))},createCinfo:function(){a.getAjax("Cinfo").then(function(t){if(void 0!=t.type){var n="red",s=0,i="<dd>";1==parseInt(t.type)&&t["最新净值"].indexOf("-")>-1&&(n="green");for(var o in t){if(!(5>s))break;var r="",l="",c="";2>s?r=" f-bold":(l="%","最新日期"==o&&(l=""),parseInt(t[o])<0&&(n="green")),i+="<span>"+o+'：</span><span class="'+n+r+'">'+t[o]+l+c+"</span>",1==s&&(i+='</dd><dd class="r-s-con">'),s++}e("#top-cinfo-right dl").html(i);var d=e("#top-cinfo-center dl").find("dd");d.eq(0).find("span").eq(1).html(null==t["状态"]?"--":t["状态"]),d.eq(1).find("span").eq(1).html(t["投资类型"].replace("计划","")+"｜"+t["风险等级"]+"风险"),d.eq(2).find("span").eq(1).html(null==t["最新规模"]?"--":t["最新规模"]+"亿元("+t["截止日期"]+")")}if(void 0!=t["相关产品"]&&parseInt(t["相关产品"].length)>0){for(var p="",h="",u=parseInt(t["相关产品"].length),s=0;u>s;s++){var m=parseFloat(t["相关产品"][s]["收益率"]),g=parseFloat(t["相关产品"][s]["最新净值"]),d=t["相关产品"][s]["集合理财代码"],r="";isNaN(m)||(r=0>m?"("+m+"%)":"(+"+m+"%)");var f='<dd><a href="'+location.origin+location.pathname+"?obj="+d+"&type="+a.type+'">'+t["相关产品"][s]["集合理财简称"]+"("+d.substring(1)+')</a><span class="'+(0>m||0>g?"green":"red")+'"> '+(isNaN(m)&&isNaN(g)?"":""+g+r)+"</span></dd>";2>s&&(p+=f.replace('class="','class="d-none ')),h+=f}u>2&&(p+='<dd><a href="javascript:void(0)" data-more>更多</a></dd>'),e("#top-cinfo-ri-cen dl").html(p),e("#top-cinfo-ri-ri dl").html(h)}console.dir(t)}.bind(this))},init:function(){this.createCinfo(),this.getInfo(),n.networth("3m"),this.jltgGallery(),this.riskReturn(),this.assetsCfg(),this.getNotice()}});return s.init=function(){return new s},s}),require(["resources/js/index.js","resources/js/report.js","complex/js/controller/complex.js","resources/js/set_index.js"],function(){"complex"==(location.pathname.match(/([^\/]+)\.html/)||[,"index"])[1]?require(["complex/js/controller/complex.js"],function(t){t.init()}):"set"==(location.pathname.match(/([^\/]+)\.html/)||[,"index"])[1]?require(["resources/js/set_index.js"],function(t){t.init()}):require(["resources/js/"+(location.pathname.match(/([^\/]+)\.html/)||[,"index"])[1]+".js"],function(){arguments[0]&&arguments[0].init&&arguments[0].init()})}),define("src",function(){});