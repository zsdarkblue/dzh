(function(c){var b=0;function a(){if(b){return b}var f=c('<div style="width:50px;height:50px;overflow:hidden;position:absolute;top:-200px;left:-200px;"><div style="height:100px;"></div></div>');c("body").append(f);var e=c("div",f).innerWidth();f.css("overflow-y","auto");var d=c("div",f).innerWidth();c(f).remove();b=(e-d);return b}c.fn.tableScroll=function(e){if(e=="undo"){var d=c(this).parent().parent();if(d.hasClass("tablescroll_wrapper")){d.find(".tablescroll_head thead").prependTo(this);d.find(".tablescroll_foot tfoot").appendTo(this);d.before(this);d.empty()}return}var f=c.extend({},c.fn.tableScroll.defaults,e);f.scrollbarWidth=a();this.each(function(){var r=f.flush;var j=c(this).addClass("tablescroll_body");var g;if(j.parent().hasClass("tablescroll_wrapper")){g=j.parent()}else{g=c('<div class="tablescroll_wrapper"></div>').insertBefore(j).append(j)}if(!g.parent("div").hasClass(f.containerClass)){c("<div></div>").addClass(f.containerClass).insertBefore(g).append(g)}var h=f.width?f.width:j.outerWidth();g.css({width:h+"px",height:f.height+"px",overflow:"auto"});j.css("width",h+"px");var o=g.outerWidth();var q=o-h;g.css({width:((h-q)+f.scrollbarWidth)+"px"});j.css("width",(h-q)+"px");if(j.outerHeight()<=f.height){g.css({height:"auto",width:(h-q)+"px"});r=false}var s=c("thead",j).length?true:false;var t=c("tfoot",j).length?true:false;var k=c("thead tr:first",j);var l=c("tbody tr:first",j);var i=c("tfoot tr:first",j);var p=0;c("th, td",k).each(function(u){p=c(this).width();c("th:eq("+u+"), td:eq("+u+")",k).css("width",p+"px");c("th:eq("+u+"), td:eq("+u+")",l).css("width",p+"px");if(t){c("th:eq("+u+"), td:eq("+u+")",i).css("width",p+"px")}});if(s){var m=c('<table class="tablescroll_head" cellspacing="0"></table>').insertBefore(g).prepend(c("thead",j))}if(t){var n=c('<table class="tablescroll_foot" cellspacing="0"></table>').insertAfter(g).prepend(c("tfoot",j))}if(m!=undefined){m.css("width",h+"px");if(r){c("tr:first th:last, tr:first td:last",m).css("width",(p+f.scrollbarWidth)+"px");m.css("width",g.outerWidth()+"px")}}if(n!=undefined){n.css("width",h+"px");if(r){c("tr:first th:last, tr:first td:last",n).css("width",(p+f.scrollbarWidth)+"px");n.css("width",g.outerWidth()+"px")}}});return this};c.fn.tableScroll.defaults={flush:true,width:null,height:100,containerClass:"tablescroll"}})(jQuery);