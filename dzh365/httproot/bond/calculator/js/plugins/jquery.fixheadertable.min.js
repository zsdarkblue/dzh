(function(a){a.fn.fixheadertable=function(b){var e={caption:"",showhide:true,theme:"ui",height:null,width:null,minWidth:null,minWidthAuto:false,colratio:[],whiteSpace:"nowrap",addTitles:false,zebra:false,zebraClass:"ui-state-active",sortable:false,sortedColId:null,sortType:[],dateFormat:"d-m-y",pager:false,rowsPerPage:10,resizeCol:false,minColWidth:100,wrapper:true};var b=a.extend(e,b);function d(g,h){if(g.currentStyle){var i=x.currentStyle[h]}else{if(window.getComputedStyle){var i=document.defaultView.getComputedStyle(g,null).getPropertyValue(h)}}return i}function c(){var i=a("<p/>").addClass("t_fixed_header_scroll_inner");var j=a("<div/>").addClass("t_fixed_header_scroll_outer");j.append(i);a(document.body).append(j);var h=i[0].offsetWidth;j.css("overflow","scroll");var g=i[0].offsetWidth;if(h==g){g=j[0].clientWidth}j.remove();return(h-g)}function f(o,j){var l={m:1,d:1,y:1970,h:0,i:0,s:0},m,h,p;if(j&&j!==null&&j!==undefined){j=a.trim(j);j=j.split(/[\\\/:_;.\t\T\s-]/);o=o.split(/[\\\/:_;.\t\T\s-]/);var g=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"];var q=["am","pm","AM","PM"];var i=function(k,r){if(k===0){if(r==12){r=0}}else{if(r!=12){r+=12}}return r};for(m=0,h=o.length;m<h;m++){if(o[m]=="M"){p=a.inArray(j[m],g);if(p!==-1&&p<12){j[m]=p+1}}if(o[m]=="F"){p=a.inArray(j[m],g);if(p!==-1&&p>11){j[m]=p+1-12}}if(o[m]=="a"){p=a.inArray(j[m],q);if(p!==-1&&p<2&&j[m]==q[p]){j[m]=p;l.h=i(j[m],l.h)}}if(o[m]=="A"){p=a.inArray(j[m],q);if(p!==-1&&p>1&&j[m]==q[p]){j[m]=p-2;l.h=i(j[m],l.h)}}if(j[m]!==undefined){l[o[m].toLowerCase()]=parseInt(j[m],10)}}l.m=parseInt(l.m,10)-1;var n=l.y;if(n>=70&&n<=99){l.y=1900+l.y}else{if(n>=0&&n<=69){l.y=2000+l.y}}}return new Date(l.y,l.m,l.d,l.h,l.i,l.s,0)}return this.each(function(){var A=a(this);var I=null;var s=a("thead th",this).length;var y=a(this).width();var R=null;var m=null;var l=null;var C=null;var o=null;var aa=c();var H=r(s);var T=null;var P=10;var Z=null;var v=null;var z=null;var E=null;var h=null;var w=null;var B=/[\$,%]/g;var F=null;var q=null;function D(ab){l=a('<div class="headtable ui-state-default" style="margin-right : 0px"></div>');m=l;m.insertBefore(ab)}function r(af){var ad=a("<colgroup />");if(b.colratio.length==0){var ac=null;for(var ae=0;ae<af;ae++){ac=a('<col style="width : '+(100/af)+'%" />');ad.append(ac);ac=null}}else{if(b.colratio.length==af){var ab=0;for(var ae=0;ae<af;ae++){ac=a('<col style="width : '+b.colratio[ae]+'px" />');ad.append(ac);ac=null;ab+=parseInt(b.colratio[ae])}a(A).css("width",ab+"px")}}return ad}function J(af,ae,ab,ad){if((b.sortType.length!=0)&&(b.sortType.length==s)){var ac=b.sortType[ae];if(ac=="float"){getSortKey=function(ag){var ah=parseFloat(String(ag).replace(B,""));return isNaN(ah)?0:ah}}else{if(ac=="integer"){getSortKey=function(ag){return ag?parseFloat(String(ag).replace(B,"")):0}}else{if(ac=="date"){getSortKey=function(ag){return f(b.dateFormat,ag).getTime()}}else{getSortKey=function(ag){if(!ag){ag=""}return a.trim(String(ag).toLowerCase())}}}}}else{getSortKey=function(ag){if(!ag){ag=""}return a.trim(String(ag).toLowerCase())}}w.sort(function(ai,ah){var ag=getSortKey(ai[ae]);var aj=getSortKey(ah[ae]);return((ag<aj)?-1:((ag>aj)?1:0))});if(ab=="DESC"){w.reverse()}(b.pager)?t(af):N(w,af)}function N(ae,af){var ab=a("tbody",af);ab.children().remove();if(b.zebra){for(var ad=0;ad<ae.length;ad++){(ad%2)?(tr=a('<tr class="'+b.zebraClass+'"></tr>')):(tr=a("<tr></tr>"));for(var ac in ae[ad]){tr.append(a('<td class="ui-widget-content"></td>').html(ae[ad][ac]))}ab.append(tr)}}else{for(var ad=0;ad<ae.length;ad++){tr=a("<tr></tr>");for(var ac in ae[ad]){tr.append(a('<td class="ui-widget-content"></td>').html(ae[ad][ac]))}ab.append(tr)}}}function W(ac){var ab=[];a("tr",ac).each(function(ad){var ae={};a("td",this).each(function(af){ae[af]=a(this).html()});ab.push(ae)});return ab}function p(af){o=a('<table class="head"/>').append(H).append(a("thead",af));m.append(o);o.wrap("<div></div>");var ah=a("th",o);ah.addClass("ui-widget-content ui-state-default");if(b.sortable){var ad=null;ah.each(function(ai){a(this).contents().wrapAll('<div class="ui-sort"></div>');ad=a("div.ui-sort",this);ad.click(function(){ah.removeClass("ui-state-hover");a(this).parent().removeClass("ui-state-active").addClass("ui-state-hover");a("span.ui-icon",ah).remove();if(a(this).hasClass("sortedUp")){J(af,ai,"DESC",this);a(this).removeClass("sortedUp").addClass("sortedDown");a(this).append('<span style="display : inline-block; vertical-align : middle" class="ui-icon ui-icon-triangle-1-s"></span>')}else{J(af,ai,"ASC",this);a(this).removeClass("sortedDown").addClass("sortedUp");a(this).append('<span style="display : inline-block; vertical-align : middle" class="ui-icon ui-icon-triangle-1-n"></span>')}m[0].scrollLeft=C[0].scrollLeft})});a("div.ui-sort",ah).addClass("hover")}if(b.resizeCol&&(b.colratio.length==s)){ah.each(function(ai){var aj=a('<span class="ui-resize"></span>');a(this).prepend(aj);aj.mousedown(function(ak){ac(ai,ak);return false})});_main_wrapper.mousemove(function(ai){if(F){ae(ai);return false}}).mouseup(function(){if(F){ab();return false}return true});function ag(al){var ak=0,ai=a("col",H),an=a("th > span.ui-resize",o)[al],aj=C[0].scrollLeft;for(var am=0;am<al;am++){ak+=parseInt(ai[am].style.width)}return an.offsetLeft+5+ak-aj}function ac(aj,ai){F={id:aj,startX:ai.clientX,initTableWidth:K(),offset:ag(aj)};q.css({display:"block",height:m.height()+C.height()+2+"px",left:F.offset+"px",cursor:"col-resize"})}function ae(ai){var aj=ai.clientX-F.startX;F.newWidth=parseInt(a("col",H)[F.id].style.width)+aj;F.newTableWidth=F.initTableWidth+aj;if(F.newWidth>parseInt(b.minColWidth)){q.css({left:F.offset+aj+"px"})}else{F.newWidth=parseInt(b.minColWidth)}}function ab(){a(H.children()[F.id]).css({width:F.newWidth+"px"});a(T.children()[F.id]).css({width:F.newWidth+"px"});var ai=F.newTableWidth;o.css({width:ai+"px"});a(A).css({width:ai+"px"});F=null;q.css({display:"none"});m[0].scrollLeft=C[0].scrollLeft}}}function g(){if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var ab=new Number(RegExp.$1);if(ab==7||ab==6){return true}else{return false}}}function U(){if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var ab=new Number(RegExp.$1);if(ab==8){return true}else{return false}}}function S(ab){C=a('<div class="body ui-widget-content"></div>').insertBefore(ab).append(ab);if(b.height!=null&&!isNaN(parseInt(b.height))){C.css("height",b.height+"px")}T=H.clone();a(ab).prepend(T);a("td",ab).addClass("ui-widget-content");a(ab).wrap("<div></div>");if(b.addTitles==true){a("td",ab).each(function(){a(this).attr("title",a(this).text())})}if(b.zebra){a("tr:odd",ab).addClass(b.zebraClass)}}function Q(ac){var ad=aa;if(g()){ad=0}var ab=0;if(parseInt(a(ac).height())>parseInt(b.height)){ab=ad;overflow="scroll"}else{ab=0;overflow="auto"}if(a.browser.msie&&b.height){ab=ad;overflow="scroll"}l.css("margin-right",ab);return overflow}function j(af,ac){var ae=w.length;var ab=0;if(ae<ac){ab=ae}else{ab=ac}var ad=w.slice(0,ab);N(ad,af);v=Math.ceil(ae/ac);E=1;z.html("Showing page "+E+" of "+v);C.css("overflow-y",Q(af));a("tr:last td",af).css("border-bottom-width","1px")}function n(ab){E++;if(E>=(v)){E=(v)}t(ab)}function X(ab){E--;if(E<=1){E=1}t(ab)}function t(ae){var ad=w.length;var af,ab=0;af=(E-1)*Z;if(ad<(E*Z)){ab=ad}else{ab=(E*Z)}var ac=w.slice(af,ab);N(ac,ae);z.html("Showing page "+E+" of "+v);C.css("overflow-y",Q(ae));a("tr:last td",ae).css("border-bottom-width","1px")}function Y(ae,ac,ab){var ad=a('<div class="button ui-state-default '+ab+'"><span class="ui-icon '+ae+'"> </span></div>');h.append(ad);ad.mouseover(function(){a(this).addClass("ui-state-hover")}).mousedown(function(){a(this).addClass("ui-state-active")}).mouseup(function(){a(this).removeClass("ui-state-active")}).mouseout(function(){a(this).removeClass("ui-state-active");a(this).removeClass("ui-state-hover")}).click(ac)}function i(ab){h=a('<div class="pager ui-widget-header ui-corner-bottom ui-widget-content"></div>');_main_wrapper.append(h);Y("ui-icon-arrowthickstop-1-e",function(){E=v;t(ab)},"ui-corner-right");Y("ui-icon ui-icon-arrowthick-1-e",function(){n(ab)},"noborder");Y("ui-icon ui-icon-arrowthick-1-w",function(){X(ab)},"noborder");Y("ui-icon-arrowthickstop-1-w",function(){E=1;t(ab)},"ui-corner-left noborder");_button_set=a('<div id="'+ab.id+'_radio" style="float : left"><input type="radio" id="'+ab.id+'_show_10_rows" name="'+ab.id+'_radio"/><label for="'+ab.id+'_show_10_rows">10</label><input type="radio" id="'+ab.id+'_show_25_rows" name="'+ab.id+'_radio"/><label for="'+ab.id+'_show_25_rows">25</label><input type="radio" id="'+ab.id+'_show_50_rows" name="'+ab.id+'_radio" /><label for="'+ab.id+'_show_50_rows">50</label><input type="radio" id="'+ab.id+'_show_100_rows" name="'+ab.id+'_radio"/><label for="'+ab.id+'_show_100_rows">100</label></div>');h.append(_button_set);a("#"+ab.id+"_show_10_rows",h).click(function(){Z=P;j(ab,Z)});a("#"+ab.id+"_show_25_rows",h).click(function(){Z=P*2.5;j(ab,Z)});a("#"+ab.id+"_show_50_rows",h).click(function(){Z=P*5;j(ab,Z)});a("#"+ab.id+"_show_100_rows",h).click(function(){Z=P*10;j(ab,Z)});z=a('<div class="page_infos"></div>');h.append(z);Z=P;a("#"+ab.id+"_show_"+b.rowsPerPage+"_rows",h).click();_button_set.buttonset()}function K(){var ab=0;for(var ac=0;ac<b.colratio.length;ac++){ab+=parseInt(b.colratio[ac])}return ab}R=a("<div/>").addClass("t_fixed_header ui-state-default default "+b.theme).insertBefore(this).append(this);R.css("border","none").css("font-weight","normal");_main_wrapper=a('<div class="t_fixed_header_main_wrapper ui-widget ui-widget-header '+b.theme+'"></div>');if(b.whiteSpace=="normal"){R.addClass("t_fixed_header_wrap")}D(this);p(this);S(this);if(b.wrapper){var L=R.wrap('<div class="ui-widget ui-widget-content ui-corner-all" style="padding : 5px; font-size : 1em;"></div>').parent()}else{var L=R.wrap("<div></div>").parent()}if(b.width!=null&&!isNaN(parseInt(b.width))&&b.width>0){L.css("width",b.width+"px")}var G=R.detach();var k=a('<div class="t_fixed_header_main_wrapper_child"></div>');_main_wrapper.append(k);k.append(G);L.append(_main_wrapper);if(g()){C.css("margin-bottom",17+"px")}if(b.caption!=""){var M=a('<div class="t_fixed_header_caption ui-widget-header ui-corner-top">'+b.caption+"</div>");_main_wrapper.prepend(M).addClass("ui-corner-all");if(b.showhide){var O=a('<div style="cursor : pointer; display : inline-block; vertical-align : middle; background : none; border : none;" class="ui-state-active"><span class="ui-icon ui-icon-triangle-1-n"> </span></div>');M.append(O);O.click(function(){k.toggle();M.toggleClass("toggle");if(h){h.toggle()}a("span",O).toggleClass("ui-icon-triangle-1-s")})}}if(b.sortable||b.pager){w=W(this)}if(b.pager){i(this)}if(b.sortable&&!isNaN(parseInt(b.sortedColId))){var V=a("th",o)[b.sortedColId];a(V).addClass("ui-state-hover");a("div.ui-sort",V).click()}if(b.resizeCol&&(b.colratio.length==s)){q=a('<div class="ui-resize-ghost ui-widget-header" style="height : '+_main_wrapper.parent().height()+'px"></div>');R.append(q)}C.css("overflow-y",Q(this));if(b.minWidth!=null&&!isNaN(parseInt(b.minWidth))&&b.minWidth>0){var u=b.minWidth+"px"}else{if(b.minWidthAuto){if(b.colratio.length==s){var u=a(this).width()+"px"}else{var u=(y+150)+"px"}}}m.children().first().css("min-width",u);C.children().first().css("min-width",u);C.scroll(function(){m[0].scrollLeft=C[0].scrollLeft});if(b.colratio.length==s){R.removeClass("default");a(o).css("width",K()+"px")}})}})(jQuery);