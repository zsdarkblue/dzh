/*
	Copyright (c) 2012-2013,   To get sources and documentation, please visit:

		http://dms.gw.com.cn
*/

//>>built
require({cache:{"bond/bondQuotationImEmbed/view/main":function(){define("dojo/_base/declare,dijit/_WidgetBase,dijit/_TemplatedMixin,dijit/_WidgetsInTemplateMixin,dijit/layout/_ContentPaneResizeMixin,dojo/text!./main.html,dojo/query,dojo/on,dojo/json,dojo/dom,dojo/dom-class,dojo/dom-construct,dojo/dom-geometry,dijit/Dialog,dojo/_base/lang,dojo/_base/event,dojo/_base/array,dojo/io-query,dojox/store/WebSocket,dojo/text!./bottomRateBondQuoteTemplete.html,dojo/text!./bottomCapitalBondQuoteTemplete.html,bond/bondQuotationImEmbed/view/_helper/GridSOSubStore,bond/bondQuotationImEmbed/view/_helper/CustomKeyboardSpirit,bond/bondQuotationImEmbed/view/_helper/MessageDialog,bond/bondQuotationImEmbed/view/_helper/util,bond/bondQuotationImEmbed/view/_helper/imUtil,dojo/NodeList-traverse".split(","),
function(f,j,l,a,c,b,d,i,g,h,v,k,n,q,e,m,w,x,y,r,s,z,t,u,o,p){return f("bond/bondQuotationImEmbed/view/main",[j,l,c,a],{templateString:b,startup:function(){this.dijitCapitalLineCount=this.dijitRateLineCount=4;this.inherited(arguments);this.initialNeedQuote("rate");this.initialNeedQuote("capital")},initCodeSpirit:function(a,d,b,c){"capital"!=c&&(d=a+d,(b=dijit.byId(d))&&b.destroy(),"rate"==c?(new t({onChange:function(){if(this.item&&this.item.bondName)h.byId(this.id.replace(a,"rateCodeName")).innerText=
this.item.bondName}},d)).startup():(new t({soUrl:bondForumConfig.soUrl+"bondQuotation/creditBondCode.dzh",onChange:function(){if(this.item&&this.item.bondName)h.byId(this.id.replace(a,"creditCodeName")).innerText=this.item.bondName}},d)).startup())},initialNeedQuote:function(a){var d=this;h.byId(a+"TableParent").innerHTML="rate"==a?r:"credit"==a?bottomCreditBondQuoteTemplete:s;for(var b=1;4>b;b++)d.initCodeSpirit(a+"CodeSpirit",b,"\u521d\u59cb\u5316\u663e\u793a",a);i("rate"==a?d.rateNeedQuoteSubmit:
"credit"==a?d.creditNeedQuoteSubmit:d.capitalNeedQuoteSubmit,"click",function(){bondForumConfig.permissionFlg?h.byId(a+"Form").checkValidity()?1==("rate"==a?d.bondRateForum.get("value"):"credit"==a?d.bondCreditForum.get("value"):d.bondCapitalForum.get("value"))?d.needQuoteSubmitFunc(3,a):d.needQuoteSubmitFunc(2,a):(new u).showDialog("\u6570\u636e\u9a8c\u8bc1\u672a\u901a\u8fc7\uff0c\u8bf7\u67e5\u770b\u8f93\u5165\u7684\u6570\u636e\u7c7b\u578b\u53ca\u683c\u5f0f!"):(new u).showDialog("\u60a8\u6ca1\u6709\u83b7\u5f97\u6743\u9650\uff0c\u8bf7\u4e0e\u5ba2\u670d\u8054\u7cfb\uff01")});
d.needQuoteClearFunc(a);d.needQuoteAddAndDeleteLineFunc(a)},needQuoteSubmitFunc:function(a,b){var c=[];d("#"+b+"MyTable tr").forEach(function(a){a=w.map(a.children,function(a){if("th"==a.nodeName||"TH"==a.nodeName)return a.innerText;if(a.children&&0==a.children.length)return"--"!=a.innerText?a.innerText:"";if(a.children&&0<a.children.length){var d=a.children[0].id;return d?(a=d.substring(7,d.length),dijit.byId(a).get("value")):a.children[0].value}});c.push(a)});c=o.filterNeedQuote(c,{rate:1,credit:2,
capital:3}[b]);k.place("rate"==b?r:"credit"==b?bottomCreditBondQuoteTemplete:s,b+"MyTable","replace");for(var e=1;4>e;e++)this.initCodeSpirit(b+"CodeSpirit",e,"\u63d0\u4ea4\u540e\uff0c\u521d\u59cb\u5316\u663e\u793a",b);e={rate:o.getRateAndCreditQuoteLabel(),credit:o.getRateAndCreditQuoteLabel(),capital:o.getCapitalQuoteLabel()};e=e[b];e=o.quoteAddConvert(e,c,{traderID:bondForumConfig.currentUserId||p.getCurrentUserID(),quoteAgency:"dzh",counterpartyTraderID:bondForumConfig.counterpartyId});e={postTarget:a,
quoteInfoAdd:encodeURI(g.stringify(e)),t:(new Date).getTime()};(new y).query(o.getSocketParams(bondForumConfig.soUrl+{rate:"bondQuotation/addRate.dzh?",credit:"bondQuotation/addCredit.dzh?",capital:"bondQuotation/addFund.dzh?"}[b]+x.objectToQuery(e))).then(function(a){setTimeout(function(){var d=0==bondForumConfig.counterpartyIdType?p.sendQuoteInfo(a,p.getCurrentUserID(),bondForumConfig.counterpartyId):p.sendQuoteInfo(a,p.getCurrentUserID(),bondForumConfig.currentUserId||p.getCurrentUserID(),bondForumConfig.counterpartyId);
d&&"success"==d&&window.external&&window.external.closeDialog&&window.external.closeDialog()},500)})},needQuoteClearFunc:function(a){var d=this,b={rate:d.rateNeedQuoteClear,credit:d.creditNeedQuoteClear,capital:d.capitalNeedQuoteClear},c={rate:r,capital:s},b=b[a];i(b,"click",function(){k.place(c[a],a+"MyTable","replace");for(var b=1;4>b;b++)d.initCodeSpirit(a+"CodeSpirit",b,"\u6e05\u7a7a\u540e\u663e\u793a",a)})},needQuoteAddAndDeleteLineFunc:function(a){var b=this;i(h.byId(a+"TableParent"),"click",
function(b){m.stop(b);var c=b.target;if("delItem"==c.getAttribute("opFunc")){var b=d(c).closest("tr"),e=d(c).closest("tbody");if("rate"==a||"credit"==a)c=b[0].children[2].children[0].id,c=c.substring(7,c.length),dijit.byId(c).destroy();c=b[0].children[0].innerText;e=e[0].children.length-2;k.destroy(b[0]);if(c!=e){b=0;for(e-=c;b<e;b++){var g=d("#"+a+"MyTable tr:nth-child("+(+c+b+1)+")")[0].children[0];g.innerText=+g.innerText-1}}}});i(dijit.byId(a+"AddItem"),"click",function(){console.warn(b);var c=
d("#"+a+"MyTable tr").length,e={rate:"dijitRateLineCount",credit:"dijitCreditLineCount",capital:"dijitCapitalLineCount"},e=e[a],g=b[e],i=a+"CodeSpirit"+g,c="rate"==a||"credit"==a?k.toDom("<tr><td>"+(c-1)+'</td><td><select><option value="\u6536">\u6536</option><option value="\u51fa">\u51fa</option></select></td><td style="overflow-x: hidden;"><div id="'+i+'"></div></td> <td id="'+a+"CodeName"+g+'"></td><td><input class="td_input_text" type="text" checkType="validNumber"   /></td><td><input class="td_input_text" type="text" checkType="validFloat"  /></td><td><input class="td_input_text" type="text" checkType="validFloat" /></td><td><input class="td_input_text" type="text" /></td><td><input type="image" src="./resources/ico-delete.gif" opFunc="delItem"></td></tr>'):
k.toDom("<tr><td>"+(c-1)+'</td><td><select><option value="\u6536">\u6536</option><option value="\u51fa">\u51fa</option></select></td><td><input class="td_input_text" type="text" checkType="validNumber"/></td><td><select><option value="1">\u5929</option><option value="2">\u5468</option><option value="3">\u6708</option></select></td><td><input class="td_input_text" type="text" checkType="validNumber"/></td><td><select><option value="\u4e0d\u9650">\u4e0d\u9650</option><option value="\u4ec5\u5229\u7387">\u4ec5\u5229\u7387</option><option value="\u53ef\u4fe1\u7528">\u53ef\u4fe1\u7528</option></select></td><td><input class="td_input_text" type="text"/></td><td><input type="image" src="./resources/ico-delete.gif" opFunc="delItem"></td></tr>');
k.place(c,a+"AddItemTr","before");b.initCodeSpirit(a+"CodeSpirit",g,"\u65b0\u589e\u663e\u793a",a);b[e]=g+1});i(h.byId(a+"TableParent"),"keypress",function(a){o.checkInput(a)})},resize:function(a){a&&n.setMarginBox(this.domNode,{w:a.w,y:a.y});this.inherited(arguments)}})})},"url:bond/bondQuotationImEmbed/view/main.html":'<div data-dojo-attach-point="containerNode">\r\n    <div class="dijitRegionalPane">\r\n        <span data-dojo-type="dijit/layout/StackController" id="controller" containerId="myStackContainer">\r\n        </span>\r\n    </div>\r\n    <div id="myStackContainer" data-dojo-type="dijit/layout/StackContainer" class="spacer">\r\n\r\n        <div id="rateBondPane" data-dojo-type="dijit/layout/ContentPane" title="\u73b0\u5238">\r\n            <\!--\u6211\u8981\u62a5\u4ef7\u9875\u7b7e--\>\r\n            <div id="rateNeedQuote" style="height:100%;">\r\n                <form id="rateForm" style="height:70%;overflow-y: auto;" class="debug_border_white myTable_style">\r\n                    <\!--\u6211\u8981\u62a5\u4ef7\u8f93\u5165\u8868\u683c--\>\r\n                    <div id="rateTableParent">\r\n                    </div>\r\n                </form>\r\n\r\n                <div style="height:25px;" class="hbox">\r\n                    <div class="spacer4"></div>\r\n                    <div>\r\n                        <input id="bondRateForum" type="checkbox" data-dojo-attach-point="bondRateForum"\r\n                               data-dojo-type="dijit/form/CheckBox" value="1" checked="true"/>\r\n                        <label for="bondRateForum">\u53d1\u9001\u5230\u667a\u6167\u901a\u503a\u5238\u8bba\u575b</label>\r\n                    </div>\r\n                    <div class="spacer"></div>\r\n                </div>\r\n\r\n                <div class="hbox" style="margin:2px 0px;">\r\n                    <div class="end_pack_align_box">\r\n                        <div data-dojo-type="dijit.form.Button" data-dojo-props="label:\'\u63d0\u4ea4\'"\r\n                             data-dojo-attach-point="rateNeedQuoteSubmit"></div>\r\n                    </div>\r\n                    <div style="margin:0px 5px;">\r\n                        <div data-dojo-type="dijit.form.Button" data-dojo-props="label:\'\u65b0\u589e\'"\r\n                            id="rateAddItem"></div>\r\n                    </div>\r\n                    <div class="start_pack_align_box">\r\n                        <div data-dojo-type="dijit.form.Button" data-dojo-props="label:\'\u6e05\u7a7a\'"\r\n                             data-dojo-attach-point="rateNeedQuoteClear"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div id="capitalBondPane" data-dojo-type="dijit/layout/ContentPane" title="\u8d44\u91d1">\r\n            <\!--\u6211\u8981\u62a5\u4ef7\u9875\u7b7e--\>\r\n            <div id="capitalNeedQuote" style="height:100%;">\r\n                <form id="capitalForm" style="height:70%;overflow-y: auto;" class="debug_border_white myTable_style">\r\n                    <\!--\u6211\u8981\u62a5\u4ef7\u8f93\u5165\u8868\u683c--\>\r\n                    <div id="capitalTableParent">\r\n                    </div>\r\n                </form>\r\n\r\n                <div style="height:25px;" class="hbox">\r\n                    <div class="spacer4"></div>\r\n                    <div>\r\n                        <input id="bondCapitalForum" type="checkbox" data-dojo-attach-point="bondCapitalForum"\r\n                               data-dojo-type="dijit/form/CheckBox" value="1" checked="true"/>\r\n                        <label for="bondCapitalForum">\u53d1\u9001\u5230\u667a\u6167\u901a\u503a\u5238\u8bba\u575b</label>\r\n                    </div>\r\n                    <div class="spacer"></div>\r\n                </div>\r\n\r\n                <div class="hbox" style="margin:2px 0px;">\r\n                    <div class="end_pack_align_box">\r\n                        <div data-dojo-type="dijit.form.Button" data-dojo-props="label:\'\u63d0\u4ea4\'"\r\n                             data-dojo-attach-point="capitalNeedQuoteSubmit"></div>\r\n                    </div>\r\n                    <div style="margin:0px 5px;">\r\n                        <div data-dojo-type="dijit.form.Button" data-dojo-props="label:\'\u65b0\u589e\'"\r\n                             id="capitalAddItem"></div>\r\n                    </div>\r\n                    <div class="start_pack_align_box">\r\n                        <div data-dojo-type="dijit.form.Button" data-dojo-props="label:\'\u6e05\u7a7a\'"\r\n                             data-dojo-attach-point="capitalNeedQuoteClear"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n</div>\r\n',
"url:bond/bondQuotationImEmbed/view/bottomRateBondQuoteTemplete.html":'<table border=1 class="table bottom_width" id="rateMyTable">\r\n    <tbody>\r\n    <tr>\r\n        <th>\u5e8f\u53f7</th>\r\n        <th>\u65b9\u5411</th>\r\n        <th>\u503a\u5238\u4ee3\u7801</th>\r\n        <th>\u503a\u5238\u7b80\u79f0</th>\r\n        <th>\u91d1\u989d(\u4e07)</th>\r\n        <th>\u4ef7\u683c(\u5143)</th>\r\n        <th>\u6536\u76ca\u7387(%)</th>\r\n        <th>\u5907\u6ce8</th>\r\n        <th>\u64cd\u4f5c</th>\r\n    </tr>\r\n\r\n    <tr>\r\n        <td>1</td>\r\n        <td><select><option value="\u6536">\u6536</option><option value="\u51fa">\u51fa</option></select></td>\r\n        <td style="overflow-x: hidden;"><div id="rateCodeSpirit1"></div></td>\r\n        <td id="rateCodeName1"></td>\r\n        <td><input class="td_input_text" type="text" checkType="validNumber"  /></td>\r\n        <td><input class="td_input_text" type="text" checkType="validFloat"/></td>\r\n        <td><input class="td_input_text" type="text" checkType="validFloat"  /></td>\r\n        <td><input class="td_input_text" type="text"  /></td>\r\n        <td><input type="image" src="./resources/ico-delete.gif" opFunc="delItem"></td>\r\n    </tr>\r\n    <tr>\r\n        <td>2</td>\r\n        <td><select><option value="\u6536">\u6536</option><option value="\u51fa">\u51fa</option></select></td>\r\n        <td style="overflow-x: hidden;"><div id="rateCodeSpirit2"></div></td>\r\n        <td  id="rateCodeName2"></td>\r\n        <td><input class="td_input_text" type="text" checkType="validNumber"    /></td>\r\n        <td><input class="td_input_text" type="text" checkType="validFloat"/></td>\r\n        <td><input class="td_input_text" type="text" checkType="validFloat"  /></td>\r\n        <td><input class="td_input_text" type="text"/></td>\r\n        <td><input type="image" src="./resources/ico-delete.gif" opFunc="delItem"></td>\r\n    </tr>\r\n    <tr id="rateAddItemTr" style="visibility: hidden;">\r\n        <td>\u53c2\u7167\u884c</td>\r\n        <td><select><option value="\u6536">\u6536</option><option value="\u51fa">\u51fa</option></select></td>\r\n        <td style="overflow-x: hidden;"><div id="rateCodeSpirit3"></div></td>\r\n        <td  id="rateCodeName3"></td>\r\n        <td><input class="td_input_text" type="text" checkType="validNumber"   noValidate /></td>\r\n        <td><input class="td_input_text" type="text" checkType="validFloat"  noValidate /></td>\r\n        <td><input class="td_input_text" type="text" checkType="validFloat"  noValidate /></td>\r\n        <td><input class="td_input_text" type="text"  noValidate/></td>\r\n        <td><input type="image" src="./resources/ico-add.gif" opFunc="addItem"></td>\r\n    </tr>\r\n    </tbody>\r\n</table>',
"url:bond/bondQuotationImEmbed/view/bottomCapitalBondQuoteTemplete.html":'<table border=1 class="table bottom_width1" id="capitalMyTable">\r\n    <tbody>\r\n    <tr>\r\n        <th>\u5e8f\u53f7</th>\r\n        <th>\u65b9\u5411</th>\r\n        <th>\u671f\u9650</th>\r\n        <th>\u671f\u9650\u5355\u4f4d</th>\r\n        <th>\u91d1\u989d(\u4e07)</th>\r\n        <th>\u62b5\u62bc</th>\r\n        <th>\u5907\u6ce8</th>\r\n        <th>\u64cd\u4f5c</th>\r\n    </tr>\r\n    <tr>\r\n        <td>1</td>\r\n        <td><select><option value="\u6536">\u6536</option><option value="\u51fa">\u51fa</option></select></td>\r\n        <td><input class="td_input_text" type="text" checkType="validNumber"/></td>\r\n        <td><select><option value="1">\u5929</option><option value="2">\u5468</option><option value="3">\u6708</option></select></td>\r\n        <td><input class="td_input_text" type="text" checkType="validNumber" /></td>\r\n        <td><select><option value="\u4e0d\u9650">\u4e0d\u9650</option><option value="\u4ec5\u5229\u7387">\u4ec5\u5229\u7387</option><option value="\u53ef\u4fe1\u7528">\u53ef\u4fe1\u7528</option></select></td>\r\n        <td><input class="td_input_text" type="text"/></td>\r\n        <td><input type="image" src="./resources/ico-delete.gif" opFunc="delItem"></td>\r\n    </tr>\r\n    <tr>\r\n        <td>2</td>\r\n        <td><select><option value="\u6536">\u6536</option><option value="\u51fa">\u51fa</option></select></td>\r\n        <td><input class="td_input_text" type="text" checkType="validNumber"/></td>\r\n        <td><select><option value="1">\u5929</option><option value="2">\u5468</option><option value="3">\u6708</option></select></td>\r\n        <td><input class="td_input_text" type="text" checkType="validNumber" /></td>\r\n        <td><select><option value="\u4e0d\u9650">\u4e0d\u9650</option><option value="\u4ec5\u5229\u7387">\u4ec5\u5229\u7387</option><option value="\u53ef\u4fe1\u7528">\u53ef\u4fe1\u7528</option></select></td>\r\n        <td><input class="td_input_text" type="text" /></td>\r\n        <td><input type="image" src="./resources/ico-delete.gif" opFunc="delItem"></td>\r\n    </tr>\r\n    <tr id="capitalAddItemTr" style="visibility: hidden;">\r\n        <td>\u53c2\u7167\u884c</td>\r\n        <td><select><option value="\u6536">\u6536</option><option value="\u51fa">\u51fa</option></select></td>\r\n        <td><input class="td_input_text" type="text" checkType="validNumber" noValidate/></td>\r\n        <td><select><option value="1">\u5929</option><option value="2">\u5468</option><option value="3">\u6708</option></select></td>\r\n        <td><input class="td_input_text" type="text" checkType="validNumber" noValidate/></td>\r\n        <td><select><option value="\u4e0d\u9650">\u4e0d\u9650</option><option value="\u4ec5\u5229\u7387">\u4ec5\u5229\u7387</option><option value="\u53ef\u4fe1\u7528">\u53ef\u4fe1\u7528</option></select></td>\r\n        <td><input class="td_input_text" type="text" /></td>\r\n        <td><input type="image" src="./resources/ico-add.gif" opFunc="addItem"></td>\r\n    </tr>\r\n    </tbody>\r\n</table>',
"bond/bondQuotationImEmbed/view/_helper/GridSOSubStore":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/json,dojo/Deferred,dojo/store/util/QueryResults,dojo/store/Observable,dojo/_base/array,dojo/io-query,dojo/topic,dojox/store/GridSOStore".split(","),function(f,j,l,a,c,b,d,i,g,h){return f("bond/bondQuotationImEmbed/view/_helper/GridSOSubStore",h,{convert:function(a){var d=this.inherited(arguments),b=d.result;if(b&&b.datas&&b.head){for(var d=b.datas,b=b.head,c=[],e=0,g=d.length;e<g;e++){for(var i=
{},h=0,f=b.length;h<f;h++)i[b[h]]=d[e][h];c.push(i)}d=c}else d=[];return d}})})},"bond/bondQuotationImEmbed/view/_helper/CustomKeyboardSpirit":function(){define("dojo/_base/lang,dojo/_base/declare,dojo/_base/array,dojo/on,dojo/_base/window,dojo/aspect,dijit/form/ComboBox,dojox/store/GridWSStore,dojo/json".split(","),function(f,j,l,a,c,b,d,i){return j("bond.bondQuotationImEmbed.view._helper.CustomKeyboardSpirit",[d],{hasDownArrow:!1,autoComplete:!1,labelType:"html",labelAttr:"bondName",searchAttr:"bondCode",
selectOnClick:!0,soUrl:bondForumConfig.soUrl+"bondQuotation/rateBondCode.dzh",labelFunc:function(a){return a[this.labelAttr]+" "+a[this.searchAttr]},onSearch:function(a,d,b){b.direction=!0;this.dropDown.clearResultList()},postMixInProperties:function(){this.store=new i;b.before(this.store,"query",f.hitch(this,this.beforeQuery));b.after(this.store,"convert",f.hitch(this,this.afterQuery));this.inherited(arguments)},afterQuery:function(a){var d=this.get("value");return l.filter(a,function(a){return-1!=
a.bondCode.indexOf(d)}).slice(0,10)},beforeQuery:function(a){this.get("value");var d="Z2V0,"+btoa(this.soUrl);a.service="rpc";a.so="javadataproxy.jar";a.parameter=d;a["function"]="gw/UIMain";a.paraencode="base64";a.response_times=1;a.response_mode=0;delete a.bondCode},startup:function(){this._setHasDownArrowAttr(this.hasDownArrow);this.inherited(arguments)}})})},"bond/bondQuotationImEmbed/view/_helper/MessageDialog":function(){define("dojo/_base/declare,dijit/_WidgetBase,dijit/_TemplatedMixin,dijit/_WidgetsInTemplateMixin,dijit/layout/_ContentPaneResizeMixin,dojo/dom,dijit/registry,dojo/text!./MessageDialog.html".split(","),
function(f,j,l,a,c,b,d,i){return f("bond.bondQuotationImEmbed.view._helper.MessageDialog",[j,l,a,c],{templateString:i,postMixInProperties:function(){},postCreate:function(){},showDialog:function(a){this.tipInfo.innerHTML=a;this.dialogConfirm.show()}})})},"url:bond/bondQuotationImEmbed/view/_helper/MessageDialog.html":'<div data-dojo-attach-point="containerNode" class="spacer">\r\n    <div data-dojo-id="dialogConfirm" data-dojo-attach-point="dialogConfirm" data-dojo-type="dijit/Dialog"  data-dojo-props="title:\'\u63d0\u793a\u4fe1\u606f\'" style="display:none;width:480px;">\r\n        <div class="vbox" style="height: 100px;">\r\n            <div style="height:  -webkit-calc(100% - 25px);overflow-y: auto;padding:2px 5px;">\r\n                <div data-dojo-attach-point="tipInfo" class="spacerx" style="text-align: center; line-height:50px;"></div>\r\n            </div>\r\n\r\n            <div class="spacerx" style="text-align: center; line-height:25px;">\r\n                <button data-dojo-type="dijit/form/Button" type="button" onclick="dialogConfirm.onCancel()">\u5173\u95ed</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>',
"bond/bondQuotationImEmbed/view/_helper/util":function(){define(["dojo/json","dojo/_base/lang","dojo/_base/array","dojo/_base/event","bond/bondQuotationImEmbed/view/_helper/MessageDialog"],function(f,j,l,a,c){var b={getWindowSize:function(){return window.screen},typeOf:function(a){var b=Object.prototype.toString,c={undefined:"undefined",number:"number","boolean":"boolean",string:"string","[object Function]":"function","[object RegExp]":"regexp","[object Array]":"array","[object Date]":"date","[object Error]":"error"};
return c[typeof a]||c[b.call(a)]||(a?"object":"null")},getCurrentUserID:function(){var a;if(bondForumConfig&&bondForumConfig.currentUserID)a=bondForumConfig.currentUserID;else if(window.external&&window.external.getDZHProperty)a=window.external.getDZHProperty("userid"),bondForumConfig.currentUserID=a;return a||"dzhcpz221"}};b.getCharCode=function(a){return"number"==typeof a.charCode?a.charCode:a.keyCode};b.checkInput=function(d){var c=d.target.getAttribute("checkType");if(c){var g=b.getCharCode(d),
h=String.fromCharCode(g);switch(c){case "validNumber":!/\d/.test(h)&&9<g&&!d.ctrlKey&&a.stop(d);break;case "validFloat":!/\d|[.]/.test(h)&&9<g&&!d.ctrlKey&&a.stop(d)}}};b.encodeObjArrayToString=function(a){a=l.map(a,function(a){var b={},d;for(d in a)b[d]=a[d];return b});return f.stringify(a)};b.getSocketParams=function(a){a={parameter:"Z2V0,"+btoa(a)};return j.delegate({service:"rpc",so:"javadataproxy.jar","function":"gw/UIMain",paraencode:"base64",response_times:1,response_mode:0},a)};b.getRateAndCreditQuoteLabel=
function(){return"tradeDirection,bondCode,bondName,amount,price,quotationYield,remark,bondTerm,rating,traderID,counterpartyTraderID".split(",")};b.getCapitalQuoteLabel=function(){return"tradeDirection,bondTerm,bondTermUnit,amount,pawn,remark".split(",")};b.quoteAddConvert=function(a,b,c){for(var h=[],f=1,k=b.length-1;f<k;f++){for(var n=b[f],q={},e=1,m=n.length-1;e<m;e++)if(q[a[e-1]]=n[e],c)for(var j in c)q[j]=c[j];h.push(q)}return h};b.filterNeedQuote=function(a,i){var g=[];if(a&&a.length&&1<a.length){g.push(a[0]);
for(var h=!0,f=[],k=1,n=a.length;k<n;k++){var j=a[k];if(k!=n-1&&(1==i||2==i)){var e=j[3];if(!j[2]||!e)continue;if((e=j[4])&&(0>+e||1E6<+e))h=!1,console.warn("\u8f93\u5165\u91d1\u989d"+e+"\u4e0d\u5408\u6cd5!"),f.push("\u7b2c"+k+"\u884c\u8f93\u5165\u91d1\u989d"+e+"\u4e0d\u5408\u6cd5!");if((e=j[5])&&(!b.checkNumberOrFloat(e)||0>+e||200<+e))h=!1,console.warn("\u8f93\u5165\u4ef7\u683c"+e+"\u4e0d\u5408\u6cd5!"),f.push("\u7b2c"+k+"\u884c\u8f93\u5165\u4ef7\u683c"+e+"\u4e0d\u5408\u6cd5!");if((e=j[6])&&(!b.checkNumberOrFloat(e)||
0>+e||100<+e))h=!1,console.warn("\u8f93\u5165\u6536\u76ca\u7387"+e+"\u4e0d\u5408\u6cd5!"),f.push("\u7b2c"+k+"\u884c\u8f93\u5165\u6536\u76ca\u7387"+e+"\u4e0d\u5408\u6cd5!")}else if(k!=n-1&&3==i){var m=j[2],e=j[4];if(!m&&!e)continue;else if(!m&&e||m&&!e)h=!1,f.push("\u7b2c"+k+"\u884c\u671f\u9650\u548c\u91d1\u989d\u4e3a\u5fc5\u586b\u9879");else{if(0>+m||365<+m)h=!1,console.warn("\u8f93\u5165\u671f\u9650"+m+"\u4e0d\u5408\u6cd5!"),f.push("\u7b2c"+k+"\u884c\u8f93\u5165\u671f\u9650"+m+"\u4e0d\u5408\u6cd5!");
if(0>+e||1E6<+e)h=!1,console.warn("\u8f93\u5165\u91d1\u989d"+e+"\u4e0d\u5408\u6cd5!"),f.push("\u7b2c"+k+"\u884c\u8f93\u5165\u91d1\u989d"+e+"\u4e0d\u5408\u6cd5!")}}g.push(j)}if(1>=g.length||!h)g=[];0==g.length&&(new c).showDialog("\u6570\u636e\u9a8c\u8bc1\u5931\u8d25\uff1a<br/> "+f.join("; "));return g}};b.checkNumberOrFloat=function(a){return/^([1-9]\d*|0(?!\.0+$))(\.\d{1,4})?$/.test(a)};return b})},"bond/bondQuotationImEmbed/view/_helper/imUtil":function(){define(["dojo/json","bond/bondQuotationImEmbed/view/_helper/MessageDialog",
"dojo/_base/array"],function(f,j){var l={getCurrentUserID:function(){var a;if(bondForumConfig&&bondForumConfig.currentUserID)a=bondForumConfig.currentUserID;else if(window.external&&window.external.getDZHProperty)a=window.external.getDZHProperty("userid"),bondForumConfig.currentUserID=a;return a||"dzhcpz221"},utf8encode:function(a){for(var a=a.replace(/\r\n/g,"\n"),c="",b=0;b<a.length;b++){var d=a.charCodeAt(b);128>d?c+=String.fromCharCode(d):(127<d&&2048>d?c+=escape(String.fromCharCode(d>>6|192)):
(c+=escape(String.fromCharCode(d>>12|224)),c+=escape(String.fromCharCode(d>>6&63|128))),c+=escape(String.fromCharCode(d&63|128)))}return c},openClusterWnd:function(a,c){a&&c?window.external&&window.external.execDzhCommand?1==window.external.execDzhCommand("GwimObject","GwimObject","OpenClusterWnd",a,c,!1)&&console.warn("\u7528\u6237ID\u6216\u7fa4ID\u4e3a\u7a7a! szUserId: "+a+", szClusterId:"+c):console.error("\u5fc5\u987b\u5728\u7ec8\u7aef\u4e0b\u624d\u80fd\u6b63\u5e38\u5f39\u51fa\u7fa4\u7a97\u53e3"):
console.error("\u53c2\u6570\u9519\u8bef szUserId: "+a+", szClusterId:"+c)},openChatWnd:function(a){a?window.external&&window.external.execDzhCommand?window.external.execDzhCommand("GwimObject","GwimObject","OpenChatWnd",a,"",!1):console.error("\u5fc5\u987b\u5728\u7ec8\u7aef\u4e0b\u624d\u80fd\u6b63\u5e38\u5f39\u51fa\u804a\u5929\u7a97\u53e3"):console.error("\u53c2\u6570\u9519\u8bef userId:"+a)},generateTime:function(){var a=new Date,c=a.getFullYear(),b=a.getMonth()+1,d=a.getDate(),f=a.getHours(),g=
a.getMinutes(),h=a.getSeconds();a.getMilliseconds();return c+"-"+b+"-"+d+" "+f+":"+g+":"+h},sendQuoteInfo:function(a,c,b,d){var i="id,traderID,\u62a5\u4ef7\u65f6\u95f4,\u4ea4\u6613\u65b9\u5411,\u503a\u5238\u4ee3\u7801,\u503a\u5238\u7b80\u79f0,\u5907\u6ce8,\u671f\u9650,\u671f\u9650\u5355\u4f4d,\u4ef7\u683c,\u91d1\u989d,\u62a5\u4ef7\u6536\u76ca\u7387,\u62a5\u4ef7\u7c7b\u578b,\u72b6\u6001,\u52a8\u4f5c\u7c7b\u578b,\u4ea4\u6613\u5458\u540d\u5b57,\u62a5\u4ef7\u673a\u6784,\u8bc4\u7ea7,counterpartyTraderID,\u503a\u5238\u7c7b\u578b,\u62b5\u62bc\u7269,\u4ee3\u507f\u671f,\u4e0a\u5e02\u65e5\u671f,\u606f\u7968\u7c7b\u578b,\u53d1\u884c\u671f\u9650,\u53d1\u884c\u91cf(\u4ebf\u5143),\u4e3b\u4f53\u8bc4\u7ea7,\u53d1\u503a\u4eba\u540d\u79f0,\u53d1\u884c\u4ef7\u683c,\u4ed8\u606f\u65b9\u5f0f,\u7968\u9762(\u53d1\u884c)\u5229\u7387,\u57fa\u51c6\u5229\u7387\u7c7b\u578b,\u57fa\u51c6\u5229\u5dee,\u5230\u671f\u65e5\u671f,\u62c5\u4fdd\u4eba\u540d\u79f0,\u62c5\u4fdd\u4eba\u8bc4\u7ea7,\u8d77\u606f\u65e5,\u6bcf\u5e74\u4ed8\u606f\u65e5,\u662f\u5426\u8de8\u5e02\u573a,\u5e94\u8ba1\u5229\u606f,postTarget".split(","),
g={};if(a||c||b)if(window.external&&window.external.execDzhCommand){a[0].result.head=i;g=a[0];g=f.stringify(g);a=window.external.execDzhCommand("GwimObject","GwimObject","SendQuoteInfo",g,l.generateTime(),c,b,d||"",!1);if(0==a)return(new j).showDialog("\u6d88\u606f\u6210\u529f\u53d1\u9001!"),"success";console.error("\u53d1\u9001\u5931\u8d25\uff0c\u8fd4\u56de\u503c\u4e3a\uff1a "+a);(new j).showDialog("\u53d1\u9001\u5931\u8d25\uff0c\u8fd4\u56de\u503c\u4e3a\uff1a "+a)}else console.error("\u5fc5\u987b\u5728\u7ec8\u7aef\u4e0b\u624d\u80fd\u6b63\u5e38\u53d1\u9001\u6d88\u606f");
else console.error("\u53d1\u9001\u62a5\u4ef7\u8f93\u5165\u53c2\u6570\u6709\u8bef!")},querySingleUserStatus:function(a){var c;if(!a||""==a)console.error("\u67e5\u8be2\u7528\u6237\u72b6\u6001\uff0c\u53c2\u6570\u4e0d\u80fd\u4e3a\u7a7a:"+a);else if(window.external&&window.external.execDzhCommand){var b=window.external.execDzhCommand("GwimObject","GwimObject","QueryUsersStatus",a,1,!1);b?(b=f.parse(b))&&"0"==b.GWIM_RET&&(c=b.GWIM_VALUE.UserStatus[a]):console.error("im\u8fd4\u56de\u503c\u4e3a\u7a7a,\u65e0\u6cd5\u4eceim\u83b7\u53d6\u7528\u6237["+
a+"]\u7684\u72b6\u6001\u4fe1\u606f!")}else console.error("\u5fc5\u987b\u5728\u7ec8\u7aef\u4e0b\u624d\u80fd\u6b63\u5e38\u4f7f\u7528\u67e5\u8be2\u7528\u6237\u72b6\u6001\u529f\u80fd");return c},querySingleUserStatus:function(a,c){var b;if(!a||""==a||!c||""==c)console.error("\u6279\u91cf\u67e5\u8be2\u7528\u6237\u72b6\u6001\uff0c\u53c2\u6570\u4e0d\u80fd\u4e3a\u7a7a,userIds:"+a+", size:"+c);else if(window.external&&window.external.execDzhCommand){var d=window.external.execDzhCommand("GwimObject","GwimObject",
"QueryUsersStatus",a,c,!1);d?(d=f.parse(d))&&"0"==d.GWIM_RET&&(b=d.GWIM_VALUE.UserStatus):console.error("im\u8fd4\u56de\u503c\u4e3a\u7a7a,\u65e0\u6cd5\u4eceim\u83b7\u53d6\u591a\u7528\u6237["+a+"]\u7684\u72b6\u6001\u4fe1\u606f!")}else console.error("\u5fc5\u987b\u5728\u7ec8\u7aef\u4e0b\u624d\u80fd\u6b63\u5e38\u4f7f\u7528\u67e5\u8be2\u7528\u6237\u72b6\u6001\u529f\u80fd");return b},queryContactInfoInGlobal:function(a){var c;if(!a||""==a)console.error("\u5168\u5c40\u8303\u56f4\u67e5\u8be2\u7528\u6237\u8d44\u6599\uff0c\u53c2\u6570\u4e0d\u5bf9:"+
a);else if(window.external&&window.external.execDzhCommand)if(a=window.external.execDzhCommand("GwimObject","GwimObject","QueryContactInfoInGlobal",a,!1))try{var b=f.parse(a);0!=b.GWIM_RET?console.error("queryContactInfoInGlobal \u83b7\u53d6\u5931\u8d25,\u8fd4\u56de\u503c\u4e3a\uff1a\uff1a\n"+a):c=b.GWIM_VALUE}catch(d){console.error("queryContactInfoInGlobal \u89e3\u6790\u5931\u8d25!")}else console.error("\u5168\u5c40\u8303\u56f4\u67e5\u8be2\u7528\u6237\u8d44\u6599_\u67e5\u8be2\u672a\u83b7\u53d6\u8fd4\u56de\u503c");
else console.error("\u5fc5\u987b\u5728\u7ec8\u7aef\u4e0b\u624d\u80fd\u6b63\u5e38\u53d1\u9001\u6d88\u606f");return c},queryContatInfoByKey:function(a){var c;if(!a||""==a)console.error("\u5168\u5c40\u8303\u56f4\u6761\u4ef6\u641c\u7d22\u7528\u6237\u8d44\u6599\uff0c\u53c2\u6570\u4e0d\u80fd\u4e3a\u7a7a:"+a);else if(window.external&&window.external.execDzhCommand)if(a=window.external.execDzhCommand("GwimObject","GwimObject","QueryContatInfoByKey",a,!1))try{var b=f.parse(a);0!=b.GWIM_RET?console.error("queryContatInfoByKey \u83b7\u53d6\u5931\u8d25\uff0c\u8fd4\u56de\u503c\u4e3a\uff1a \n"+
a):c=b.GWIM_VALUE}catch(d){console.error("queryContatInfoByKey\u89e3\u6790\u5931\u8d25!")}else console.error("\u5168\u5c40\u8303\u56f4\u6761\u4ef6\u641c\u7d22\u7528\u6237\u8d44\u6599_\u67e5\u8be2\u672a\u83b7\u53d6\u8fd4\u56de\u503c");else console.error("\u5fc5\u987b\u5728\u7ec8\u7aef\u4e0b\u624d\u80fd\u6b63\u5e38\u53d1\u9001\u6d88\u606f");return c},queryClusterInfoInGlobal:function(a){var c;if(!a||""==a)console.error("\u5168\u5c40\u8303\u56fd\u67e5\u8be2\u7fa4\u8d44\u6599\uff0c\u53c2\u6570\u4e0d\u80fd\u4e3a\u7a7a:"+
a);else if(window.external&&window.external.execDzhCommand)if(a=window.external.execDzhCommand("GwimObject","GwimObject","QueryContatInfoByKey",a,!1)){var b=f.parse(a);0!=b.GWIM_RET?console.error("queryClusterInfoInGlobal \u83b7\u53d6\u5931\u8d25\uff0c\u8fd4\u56de\u503c\u4e3a\uff1a \n"+a):c=b.GWIM_VALUE}else console.error("\u67e5\u8be2\u672a\u83b7\u53d6\u8fd4\u56de\u503c");else console.error("\u5fc5\u987b\u5728\u7ec8\u7aef\u4e0b\u624d\u80fd\u6b63\u5e38\u53d1\u9001\u6d88\u606f");return c},queryClustersInfo:function(a,
c){var b;if(!a||""==a)console.error("\u6279\u91cf\u67e5\u8be2\u7fa4\u4fe1\u606f\uff0c\u53c2\u6570\u4e0d\u80fd\u4e3a\u7a7a:"+a);else if(window.external&&window.external.execDzhCommand){var d=window.external.execDzhCommand("GwimObject","GwimObject","QueryClustersInfo",a,c,!1);if(d){var i=f.parse(d);0!=i.GWIM_RET?console.error("queryClustersInfo \u83b7\u53d6\u5931\u8d25\uff0c\u8fd4\u56de\u503c\u4e3a\uff1a \n"+d):b=i.GWIM_VALUE}else console.error("\u67e5\u8be2\u672a\u83b7\u53d6\u8fd4\u56de\u503c")}else console.error("\u5fc5\u987b\u5728\u7ec8\u7aef\u4e0b\u624d\u80fd\u6b63\u5e38\u53d1\u9001\u6d88\u606f");
return b},queryUserGroup:function(a,c){var b;if(!a||""==a)console.error("\u6279\u91cf\u67e5\u8be2\u597d\u53cb\u5206\u7ec4\u4fe1\u606f\uff0c\u53c2\u6570\u4e0d\u80fd\u4e3a\u7a7a:"+a);else if(window.external&&window.external.execDzhCommand){var d=window.external.execDzhCommand("GwimObject","GwimObject","QueryUserGroup",a,c,!1);if(d){var i=f.parse(d);0!=i.GWIM_RET?console.error("queryUserGroup \u83b7\u53d6\u5931\u8d25\uff0c\u8fd4\u56de\u503c\u4e3a\uff1a \n"+d):b=i.GWIM_VALUE}else console.error("\u67e5\u8be2\u672a\u83b7\u53d6\u8fd4\u56de\u503c")}else console.error("\u5fc5\u987b\u5728\u7ec8\u7aef\u4e0b\u624d\u80fd\u6b63\u5e38\u53d1\u9001\u6d88\u606f");
return b}};return l})}}});
define("bond/bondQuotationImEmbed/src","dojo/parser,bond/bondQuotationImEmbed/view/main,bond/bondQuotationImEmbed/view/_helper/GridSOSubStore,dojo/json,dojo/_base/lang,bond/bondQuotationImEmbed/view/_helper/util,dojo/_base/array,dojo/dom-construct,bond/bondQuotationImEmbed/view/_helper/MessageDialog,bond/bondQuotationImEmbed/view/_helper/imUtil,bond/bondQuotationImEmbed/view/_helper/CustomKeyboardSpirit,dojox/store/MultiResultStore".split(","),function(f,j,l,a,c,b,d,i,g,h,v,k){return function(){f.parse();
setTimeout(function(){var b=new k,c=bondForumConfig.currentUserId||h.getCurrentUserID();b.query({service:"rpc",so:"jso-all-bondpermissions.jar","function":"gw.sh.func.BondPermissionsRequest",paraencode:"base64",parameter:btoa('{"username":"'+c+'","moduleid":"613"}'),response_times:1,cache_timeout:0,response_mode:0,request_timeout:-1}).then(function(b){console.warn("\u83b7\u53d6\u5230\u7684\u7528\u6237\u6743\u9650:"+a.stringify(b));if(b)b=b[0].items[0].PEMISSIONS,console.warn(b),bondForumConfig.permission=
b,b=b.split(","),d.some(b,function(a){return 2==a})?bondForumConfig.permissionFlg=!0:(new g).showDialog("\u60a8\u597d\uff0c\u60a8\u5c1a\u672a\u5f00\u901a\u62a5\u4ef7\u529f\u80fd\uff0c\u8bf7\u8054\u7cfb\u5ba2\u6237\u7ecf\u7406\u3002")})},10);setTimeout(function(){var b=h.queryContactInfoInGlobal(bondForumConfig.currentUserId);if(b)b=b[0],console.warn(a.stringify(b)),bondForumConfig.userInfo=b},50)}});