(function(au){var j,Y;var aq=[],ao=[];var H=au("#tab-main .tab-bar > li").length,aD=au("#tab-secondary .tab-bar > li").length,ag=0,al=0;var av,L,aF="";var at=null;var V=[],D=[],aI=[],M=[],ad=[],ap=null,aC=[],w=[],W=[];var I="",S="100211",ah="getTodayQuotation",ax=0,aj=1,aA=0,q=true,aG=false,N=["0","2","6","3","4","13","14","10","9","12","8"],v=["0","1","2","3"],t=["obj","tradetype","newclean","newyield","vol","changeclean","avgclean","avgyield","openclean","highclean","lowclean","openyield","highyield","lowyield"],s=["bondCode","bondName","remainYear","tradetype","newclean","newyield","vol","changeclean","lastavgclean","avgyield","openclean","highclean","lowclean","openyield","highyield","lowyield","couponRate","bondRating","mainBodyRate"],p=["bondCode","bondName","remainYear","updateTime","buyinitiator","buyvol","buyclean","buyyield","0","1","sellyield","sellclean","sellvol","sellinitiator","selltime","date","netPrice","fullPrice","yields","couponRate","bondRating","mainBodyRate"],G=["bondCode","bondName","remainYear","newclean","newyield","avgclean","avgyield","updateTime","buyinitiator","buyvol","buyclean","buyyield","sellyield","sellclean","sellvol","sellinitiator","selltime","0","1","couponRate","bondRating","mainBodyRate"];var k=[],K=[],aK=[],Q=[],az=[],a=[],z=8;var aJ,aH,m=[];var e=au(window).width();var ar={check:{enable:true},view:{showIcon:false},callback:{beforeDrag:af,beforeDrop:A,beforeDragOpen:aL,onDrag:T,onDrop:o,onExpand:ay},edit:{drag:{autoExpandTrigger:true,prev:h,inner:O,next:J},enable:true,showRemoveBtn:false,showRenameBtn:false},data:{simpleData:{enable:true}}};window.socketData=[];window.socketData1=[];window.dataOptimal=[];window.dataMarket=[];Socket.send(""+aF+"/bond/bestPricesBetweenBanks/getBondTradeDate.dzh",function(i){at=i[0].tradeDate.slice(0,4)+"-"+i[0].tradeDate.slice(4,6)+"-"+i[0].tradeDate.slice(6,8)});Socket.send("service=did&did=100011&where=obj=IB&response_times=-1&fullmarket=1",function(i){ap=true;i.forEach(function(aP){if(aP.obj in this){au.extend(this[aP.obj],aP)}else{this.push(aP);this[aP.obj]=aP}},socketData)},".tab-content");Socket.send("service=did&did=100007&where=obj=IB&response_times=-1&fullmarket=1",function(i){ap=true;i.forEach(function(aP){if(aP.obj in this){au.extend(this[aP.obj],aP)}else{this.push(aP);this[aP.obj]=aP}},socketData1)});setInterval(function(){if(ap){if(socketData1.length&&socketData.length){x()}else{y(socketData1,socketData)}}},1000);au("#tab-main .tab-bar").on("click","li",function(){if(au(this).hasClass("hasActive")){return}if(au(".monkey-ajax-loading").length){au(".monkey-ajax-loading").remove()}au("#tab-main-datatable"+(aA+1)+"_filter").find("input").val("");var i=aq[aA].fnSettings();if(i.aoData.length){aq[aA].oApi._fnClearTable(i);aq[aA].fnDraw()}au(this).siblings().removeClass("hasActive");au(this).addClass("hasActive");var aP=au(this).index(),aQ=au(this).children("a").data("did");aq[aP].find("td.dataTables_empty").html(" ");ah=au(this).data("did");q=true;aA=aP;aj=aP+1;aq[aP].find("thead").css({display:"none"});au("#tab-main-datatable"+(aP+1)).parents(".dataTables_scroll").find(".dataTables_scrollHeadInner,.dataTable").css("width","100%");if(aQ=="110"){aM(aP,aC)}if(aQ=="100011"){if(parseInt(localStorage.getItem("treeLe"))){F(m,aH,w,2,Q)}else{aM(aP,w)}}if(aQ=="100007"){aM(aP,W)}if(aQ=="history"){au("#tab5-input12").val(X(at));addIndex=au("#tab5-check1").is(":checked");aE(aP,ah,aN(au("#tab5-input12").val()),aN(au("#tab5-input12").val()),0,0,addIndex,"","","year","","","year","","","","",au("#btn-export-data4").data("on"))}if(aQ=="historyOptimal"){au("#tab-main-datatable4_wrapper .set-today-date").html(at);au("#tab4-input12").val(X(at));aE(aP,ah,aN(au("#tab4-input12").val()),aN(au("#tab4-input12").val()),0,0,false,"","","year","","","year","","","","",0)}if(aQ=="innerDay"){au("#tab6-input12").val(X(at));addIndex=au("#tab6-check1").is(":checked");aE(aP,ah,aN(au("#tab6-input12").val()),aN(au("#tab6-input12").val()),0,0,addIndex,"","","year","","","year","","","","",au("#btn-export-data5").data("on"))}});function aE(aU,aQ,aT,a2,a6,aX,aS,aP,i,a1,aR,aZ,a5,aW,a3,aY,a0,aV){var a4=[];Socket.send(""+aF+"/bond/bestPricesBetweenBanks/"+aQ+".dzh?beginDate="+aT+"&endDate="+a2+"&bondType="+a6+"&couponType="+aX+"&addIndex="+aS+"&beginRemainingTerm="+aP+"&endRemainingTerm="+i+"&remainingTermType="+a1+"&beginIssueTerm="+aR+"&endIssueTerm="+aZ+"&issueTermType="+a5+"&beginIssueDate="+aW+"&endIssueDate="+a3+"&beginDuration"+aY+"=&endDuration="+a0+"",function(a7){if(aS||aV){aa(aU,a7,a7[0])}else{M=[];var a8=b(a7);a4=l(a8);M=a4;aM(aU,a4)}},".tab-content")}au("#tab-secondary").on("click","li a",function(){if(au(this).parent().hasClass("hasActive")){return}S=au(this).parent().data("did");ax=au(this).parent().index();au(this).parent().siblings().removeClass("hasActive");au(this).parent().addClass("hasActive");ao[ax].find("td.dataTables_empty").html(" ");au("#tab-secondary-datatable"+(ax+1)).parents(".dataTables_scroll").find(".dataTables_scrollHeadInner,.dataTable").css("width","100%");aO(ax,S,I)});au("#tab-main .data").on("click",".dataTable tbody tr",function(){var i=/\d+/g;if(au(this).hasClass("row_selected")){return}if(au("#tab-main-datatable1_wrapper .dataTables_scrollHead table.dataTable").position().top>0){au("#tab-main-datatable1_wrapper .dataTables_scrollHead table.dataTable").css("top","0")}I=au(this).children("td").eq(1).html().match(i).toString();aO(ax,S,I);au("#upDate").html(I)});function b(aP){var i=[];aP.forEach(function(aR){var aS=[];for(var aQ in aR){aS.push(aR[aQ])}i.push(aS)});return i}function aO(aQ,aP,i){if(!i){return}if(aQ<3){Socket.send("service=did&did="+aP+"&where=obj=IB"+i+".bond&response_times=1",function(aR){var aS;if(aR.length){if(aP=="100007"){aS=l(r(aR,t))}else{if(aP=="100211"){aS=l(an(aR[0].data.datas,N))}if(aP=="100207"){aS=l(u(aR[0].data.datas,v))}}}else{aS=[]}ak(aQ,aS,i)},"#tab-secondary")}else{Socket.send(""+aF+"/bond/bestPricesBetweenBanks/"+aP+"?bondCode=IB"+i+".bond",function(aS){var aR;if(aS.length){aR=l(b(aS))}else{aR=[]}ak(aQ,aR,i)},"#tab-secondary")}if(au(".monkey-ajax-loading").length){au(".monkey-ajax-loading").remove()}}var E=[],d=[],ai=[];bondCode=[];function x(){var aW={},aP,aR=[],aU=[],i=[],aS={},aQ={},aV={},aT=[];bondCode=[];E=[];ai=[];a=[];socketData1.concat(socketData).forEach(function(aX){if(!(aX.obj in this)){this.push(aX.obj);this[aX.obj]=true}},bondCode);socketData1.forEach(function(aX){aW[aX.obj]=aX;ai.push(aX.obj)});socketData.forEach(function(aX){if(aX.obj in aW){a.push(aX.obj)}E.push(aX.obj)});Socket.send(""+aF+"/bond/bestPricesBetweenBanks/getTodayQuotation.dzh?bondCode="+bondCode.toString()+"&bondType="+au("#tab1-select1").val()+"&couponType="+au("#tab1-select2").val()+"&bondRate="+au("#tab1-select3").val()+"&mainBodyRate="+au("#tab1-select4").val()+"&beginRemainingTerm="+au("#filter-remain-time-begin-1").val()+"&endRemainingTerm="+au("#filter-remain-time-end-1").val()+"&remainingTermType="+au("#filter-remain-time-unit-1").val()+"&beginIssueTerm="+au("#filter-release-time-end-1").val()+"&endIssueTerm="+au("#filter-release-time-begin-1").val()+"&issueTermType="+au("#filter-release-time-unit-1").val()+"&beginIssueDate="+au("#filter-release-date-begin-1").val()+"&endIssueDate="+au("#filter-release-date-end-1").val()+"&beginDuration="+au("#filter-duration-begin-1").val()+"&endDuration="+au("#filter-duration-end-1").val()+"",function(aZ){var aY={},aX=[];aZ.forEach(function(a0){aS[a0.obj]=a0});for(key in socketData1[0]){aV[key]="--"}for(key in socketData[0]){aQ[key]="--"}socketData.forEach(function(a0){if(a0.obj in aW){aT.push(au.extend({},a0,aW[a0.obj]))}else{aR.push(au.extend({},aV,a0))}});socketData1.forEach(function(a0){aR.push(au.extend({},aQ,a0))});aT.forEach(function(a0){aY[a0.obj]=a0});aR.forEach(function(a0){if(a0.obj in aY){aX.push(au.extend({},a0,aY[a0.obj]));delete aY[a0.obj]}else{aX.push(au.extend({},a0))}});aX.forEach(function(a2){var a1=[],a0,a3;if(a2.updateTime.length>8){a2.updateTime=X(a2.updateTime.substr(8,6))}if(a2.selltime.length>8){a2.selltime=X(a2.selltime.substr(8,6))}if(a2.buytime.length>8){a2.buytime=X(a2.buytime.substr(8,6))}if(a2.buyclean==0){a2.buyclean="--"}if(a2.sellclean==0){a2.sellclean="--"}if(a2.buyyield==0){a2.buyyield="--"}if(a2.sellyield==0){a2.sellyield="--"}if(!isNaN(a2.buyvol)&&a2.buyvol.toString().indexOf(".")===-1&&a2.buyvol>9999){a2.buyvol=(a2.buyvol/10000).toFixed(4)}else{if(a2.buyvol==0||isNaN(a2.buyvol)){a2.buyvol="--"}}if(!isNaN(a2.sellvol)&&a2.sellvol.toString().indexOf(".")===-1&&a2.sellvol>9999){a2.sellvol=(a2.sellvol/10000).toFixed(4)}else{if(a2.sellvol==0||isNaN(a2.sellvol)){a2.sellvol="--"}}if(!isNaN(a2.buyvol)){a3=(a2.buyclean-a2.sellclean).toFixed(4);a0=((a2.buyyield-a2.sellyield)*100).toFixed(4)}else{a3="--";a0="--"}a1.push(a3,a0);if(a2.obj in aS){aU.push(au.extend({},aS[a2.obj],a2,a1))}});aU.forEach(function(a0){var a1=[];G.forEach(function(a2){a1.push(a0[a2])});i.push(a1)});ad=[];aP=l(i);ad=aP;aC=aP;if(aP!==null||aP.length>0){aM(0,aP)}},".tab-content");Socket.send(""+aF+"/bond/bestPricesBetweenBanks/getBestPrices.dzh?bondCode="+E.toString()+"&bondCodeType="+a.toString()+"&bondType="+au("#tab2-select1").val()+"&couponType="+au("#tab2-select2").val()+"&bondRate="+au("#tab2-select3").val()+"&mainBodyRate="+au("#tab2-select4").val()+"&beginRemainingTerm="+au("#filter-remain-time-begin-2").val()+"&endRemainingTerm="+au("#filter-remain-time-end-2").val()+"&remainingTermType="+au("#filter-remain-time-unit-2").val()+"&beginIssueTerm="+au("#filter-release-time-end-2").val()+"&endIssueTerm="+au("#filter-release-time-begin-2").val()+"&issueTermType="+au("#filter-release-time-unit-2").val()+"&beginIssueDate="+au("#filter-release-date-begin-2").val()+"&endIssueDate="+au("#filter-release-date-end-2").val()+"&beginDuration="+au("#filter-duration-begin-2").val()+"&endDuration="+au("#filter-duration-end-2").val()+"",function(a1){var a0=[],aY={},aZ=[],aX=[];a1.forEach(function(a2){aY[a2.obj]=a2});socketData.forEach(function(a4){var a5,a2,a3=[];if(a4.updateTime.length>8){a4.updateTime=X(a4.updateTime.substr(8,6))}if(a4.selltime.length>8){a4.selltime=X(a4.selltime.substr(8,6))}if(a4.buytime.length>8){a4.buytime=X(a4.buytime.substr(8,6))}if(a4.buyclean==0){a4.buyclean="--"}if(a4.sellclean==0){a4.sellclean="--"}if(a4.buyyield==0){a4.buyyield="--"}if(a4.sellyield==0){a4.sellyield="--"}if(!isNaN(a4.buyvol)&&a4.buyvol.toString().indexOf(".")===-1&&a4.buyvol>9999){a4.buyvol=(a4.buyvol/10000).toFixed(4)}else{if(a4.buyvol==0||isNaN(a4.buyvol)){a4.buyvol="--"}}if(!isNaN(a4.sellvol)&&a4.sellvol.toString().indexOf(".")===-1&&a4.sellvol>9999){a4.sellvol=(a4.sellvol/10000).toFixed(4)}else{if(a4.sellvol==0||isNaN(a4.sellvol)){a4.sellvol="--"}}if(!isNaN(a4.buyvol)&&!isNaN(a4.sellyield)&&!isNaN(a4.sellclean)){a5=(a4.buyclean-a4.sellclean).toFixed(4);a2=((a4.buyyield-a4.sellyield)*100).toFixed(4)}else{a5="--";a2="--"}a3.push(a5,a2);if(a4.obj in aY){aX.push(au.extend({},aY[a4.obj],a4,a3))}});aX.forEach(function(a2){var a3=[];p.forEach(function(a4){a3.push(a2[a4])});a0.push(a3)});dataOptimal=[];dataOptimal=a0;az=[];aZ=l(dataOptimal);az=aZ;if(parseInt(localStorage.getItem("treeLe"))){R(aZ)}else{w=[];w=aZ;aM(1,aZ)}});Socket.send((""+aF+"/bond/bestPricesBetweenBanks/getTodayQuotation.dzh?bondCode="+ai.toString()+"&bondType="+au("#tab3-select1").val()+"&couponType="+au("#tab3-select2").val()+"&bondRate="+au("#tab3-select3").val()+"&mainBodyRate="+au("#tab3-select4").val()+"&beginRemainingTerm="+au("#filter-remain-time-begin-3").val()+"&endRemainingTerm="+au("#filter-remain-time-end-3").val()+"&remainingTermType="+au("#filter-remain-time-unit-3").val()+"&beginIssueTerm="+au("#filter-release-time-end-3").val()+"&endIssueTerm="+au("#filter-release-time-begin-3").val()+"&issueTermType="+au("#filter-release-time-unit-3").val()+"&beginIssueDate="+au("#filter-release-date-begin-3").val()+"&endIssueDate="+au("#filter-release-date-end-3").val()+"&beginDuration="+au("#filter-duration-begin-3").val()+"&endDuration="+au("#filter-duration-end-3").val()+"").replace(/=undefined/g,"="),function(a0){var aY={},aZ=[],aX=[];V=[];W=[];a0.forEach(function(a1){aY[a1.obj]=a1});socketData1.forEach(function(a1){if(a1.obj in aY){aX.push(au.extend({},aY[a1.obj],a1))}});aX.forEach(function(a1){if(a1.vol==0){a1.vol="--"}else{a1.vol=(a1.vol/10000).toFixed(4)}var a2=[];s.forEach(function(a3){a2.push(a1[a3])});aZ.push(a2)});dataMarket=[];dataMarket=aZ;V=l(dataMarket);W=V;aM(2,V)});ap=false}function y(aQ,aR){var aU=["bondCode","bondName","remainYear","2","3","4","5","buytime","buyinitiator","buyvol","buyclean","buyyield","sellyield","sellclean","sellvol","sellinitiator","selltime","0","1","couponRate","bondRating","mainBodyRate"],aP=[],i=[],aT={},aS=[];d=[];if(aQ.length){i=aQ}if(aR.length){i=aR}i.forEach(function(aV){d.push(aV.obj)});if(i.length>0){Socket.send(""+aF+"/bond/bestPricesBetweenBanks/getTodayQuotation.dzh?bondCode="+d.toString()+"&bondType="+au("#tab1-select1").val()+"&couponType="+au("#tab1-select2").val()+"&bondRate="+au("#tab1-select3").val()+"&mainBodyRate="+au("#tab1-select4").val()+"&beginRemainingTerm="+au("#filter-remain-time-begin-1").val()+"&endRemainingTerm="+au("#filter-remain-time-end-1").val()+"&remainingTermType="+au("#filter-remain-time-unit-1").val()+"&beginIssueTerm="+au("#filter-release-time-end-1").val()+"&endIssueTerm="+au("#filter-release-time-begin-1").val()+"&issueTermType="+au("#filter-release-time-unit-1").val()+"&beginIssueDate="+au("#filter-release-date-begin-1").val()+"&endIssueDate="+au("#filter-release-date-end-1").val()+"&beginDuration="+au("#filter-duration-begin-1").val()+"&endDuration="+au("#filter-duration-end-1").val()+"",function(aW){var aV=[];aC=[];aW.forEach(function(aX){aT[aX.obj]=aX});i.forEach(function(aZ){var aY=[],aX,a0;if(aZ.updateTime.length>8){aZ.updateTime=X(aZ.updateTime.substr(8,6))}if(aZ.selltime.length>8){aZ.selltime=X(aZ.selltime.substr(8,6))}if(aZ.buytime.length>8){aZ.buytime=X(aZ.buytime.substr(8,6))}if(aZ.buyclean==0){aZ.buyclean="--"}if(aZ.sellclean==0){aZ.sellclean="--"}if(aZ.buyyield==0){aZ.buyyield="--"}if(aZ.sellyield==0){aZ.sellyield="--"}if(!isNaN(aZ.buyvol)&&aZ.buyvol.toString().indexOf(".")===-1&&aZ.buyvol>9999){aZ.buyvol=(aZ.buyvol/10000).toFixed(4)}else{if(aZ.buyvol==0||isNaN(aZ.buyvol)){aZ.buyvol="--"}}if(!isNaN(aZ.sellvol)&&aZ.sellvol.toString().indexOf(".")===-1&&aZ.sellvol>9999){aZ.sellvol=(aZ.sellvol/10000).toFixed(4)}else{if(aZ.sellvol==0||isNaN(aZ.sellvol)){aZ.sellvol="--"}}if(!isNaN(aZ.buyvol)){a0=(aZ.buyclean-aZ.sellclean).toFixed(4);aX=((aZ.buyyield-aZ.sellyield)*100).toFixed(4)}else{a0="--";aX="--"}aY.push(a0,aX);if(aZ.obj in aT){aV.push(au.extend({},aT[aZ.obj],aZ,["--","--","--","--","--","--","--","--"],aY))}});aV.forEach(function(aX){var aY=[];aU.forEach(function(aZ){aY.push(aX[aZ])});aS.push(aY)});ad=[];aP=l(aS);ad=aP;aC=aP;if(aP!==null||aP.length>0){aM(0,aP)}},".tab-content");Socket.send(""+aF+"/bond/bestPricesBetweenBanks/getBestPrices.dzh?bondCode="+E.toString()+"&bondCodeType="+a.toString()+"&bondType="+au("#tab2-select1").val()+"&couponType="+au("#tab2-select2").val()+"&bondRate="+au("#tab2-select3").val()+"&mainBodyRate="+au("#tab2-select4").val()+"&beginRemainingTerm="+au("#filter-remain-time-begin-2").val()+"&endRemainingTerm="+au("#filter-remain-time-end-2").val()+"&remainingTermType="+au("#filter-remain-time-unit-2").val()+"&beginIssueTerm="+au("#filter-release-time-end-2").val()+"&endIssueTerm="+au("#filter-release-time-begin-2").val()+"&issueTermType="+au("#filter-release-time-unit-2").val()+"&beginIssueDate="+au("#filter-release-date-begin-2").val()+"&endIssueDate="+au("#filter-release-date-end-2").val()+"&beginDuration="+au("#filter-duration-begin-2").val()+"&endDuration="+au("#filter-duration-end-2").val()+"",function(aZ){var aY=[],aW={},aX=[],aV=[];aZ.forEach(function(a0){aW[a0.obj]=a0});aR.forEach(function(a2){var a3,a0,a1=[];if(a2.updateTime.length>8){a2.updateTime=X(a2.updateTime.substr(8,6))}if(a2.selltime.length>8){a2.selltime=X(a2.selltime.substr(8,6))}if(a2.buytime.length>8){a2.buytime=X(a2.buytime.substr(8,6))}if(a2.buyclean==0){a2.buyclean="--"}if(a2.sellclean==0){a2.sellclean="--"}if(a2.buyyield==0){a2.buyyield="--"}if(a2.sellyield==0){a2.sellyield="--"}if(!isNaN(a2.buyvol)&&a2.buyvol.toString().indexOf(".")===-1&&a2.buyvol>9999){a2.buyvol=(a2.buyvol/10000).toFixed(4)}else{if(a2.buyvol==0||isNaN(a2.buyvol)){a2.buyvol="--"}}if(!isNaN(a2.sellvol)&&a2.sellvol.toString().indexOf(".")===-1&&a2.sellvol>9999){a2.sellvol=(a2.sellvol/10000).toFixed(4)}else{if(a2.sellvol==0||isNaN(a2.sellvol)){a2.sellvol="--"}}if(!isNaN(a2.buyvol)&&!isNaN(a2.sellyield)&&!isNaN(a2.sellclean)){a3=(a2.buyclean-a2.sellclean).toFixed(4);a0=((a2.buyyield-a2.sellyield)*100).toFixed(4)}else{a3="--";a0="--"}a1.push(a3,a0);if(a2.obj in aW){aV.push(au.extend({},aW[a2.obj],a2,a1))}});aV.forEach(function(a0){var a1=[];p.forEach(function(a2){a1.push(a0[a2])});aY.push(a1)});dataOptimal=[];dataOptimal=aY;az=[];aX=l(dataOptimal);az=aX;if(parseInt(localStorage.getItem("treeLe"))){R(aX)}else{w=[];w=aX;aM(1,aX)}});W=aQ}ap=false}function aM(aR,aS){var aV=au("#tab-main-datatable"+(aR+1)+"_filter").find("input").val();if(aA!=aR||aV.length>0){return}au(".data-visibility").css("visibility","visible");if(aq[aR]){aq[aR].fnDestroy()}if(aR==0){z=8}else{if(aR==1){z=4}else{if(aR==2||aR==4){z=0}else{z=5}}}if(aR>3){ag=25}else{ag=51}aq[aR]=au("#tab-main-datatable"+(aR+1)+"").dataTable({iDisplayLength:"auto",bLengthChange:false,bFilter:true,bInfo:false,bAutoWidth:false,aaData:aS,bSort:true,sScrollX:"100%",sDom:"frtiS",aaSorting:[[z,"desc"]],bDeferRender:true,oLanguage:{sSearch:"查询:",sEmptyTable:"无数据",sZeroRecords:"无数据"},sScrollY:"100px",aoColumnDefs:[{bSortable:false,aTargets:[0]},{sClass:"my_left",aTargets:[1,2]}],fnDrawCallback:function(a0){if(a0.bSorted||a0.bFiltered){for(var aZ=0,aY=a0.aiDisplay.length;aZ<aY;aZ++){this.fnUpdate(aZ+1,a0.aiDisplay[aZ],0,false,false)}}}});au("#tab-main-datatable1_wrapper").css("visibility","visible");au("#tab-main-datatable"+(aR+1)+"_wrapper div.dataTables_scrollHead").height(ag);aq[aR].find("div.dataTables_scrollHeadInner").css({"padding-right":"20px"});aq[aR].parent(".dataTables_scrollBody").height("-webkit-calc(100% - "+ag+"px)");var aW=aR+1,aP;n(aW);if(au(".monkey-ajax-loading").length){au(".monkey-ajax-loading").remove()}if(au("#tab-main .dataTables_filter")){au("#tab-main .dataTables_filter").find("input").css({fontSize:"14"}).attr({placeholder:"代码,简称,报价方"})}var aX={text:"行情",func:function(){aP="IB"+au(this).find("td").eq(1).html()+".bond";if(aP){window.location="DZH://VIEWSTOCK?DATATYPE=DAY&LAYOUT=Level2默认&PAGE=分时走势&LABEL="+aP+""}}},aT={text:"深度资料F9",func:function(){aP="IB"+au(this).find("td").eq(1).html()+".bond";if(aP){window.location="DZH://VIEWSTOCK?LABEL="+aP+"&DATATYPE=DAY&LAYOUT=Level2默认&PAGE=深度资料"}}},aU={text:"债券计算器",func:function(){aP="IB"+au(this).find("td").eq(1).html()+".bond";if(aP){window.location="DZH://CHROME?URL='root://bond/calculator/index.html?cocode="+aP+"'"}}};var aQ=[[aX,aT,aU]];au("#tab-main tbody tr").smartMenu(aQ,{name:"债券",beforeShow:function(){if(au(this).hasClass("row_selected")){return}var i=/\d+/g;au(this).addClass("row_selected").siblings().removeClass("row_selected");I=au(this).children("td").eq(1).html().match(i).toString();aO(ax,S,I);au.smartMenu.remove()}})}au("#tab-main .data").on("dblclick",".dataTable tbody tr",function(){var i="IB"+au(this).find("td").eq(1).html()+".bond";if(i){window.location="DZH://VIEWSTOCK?DATATYPE=DAY&LAYOUT=Level2默认&PAGE=分时走势&LABEL="+i+""}});function ak(aR,aT,aQ){if(aQ!=I){return}var aP=ao[aR].fnSettings();ao[aR].oApi._fnClearTable(aP);for(var aS=0;aS<aT.length;aS++){ao[aR].oApi._fnAddData(aP,aT[aS])}ao[aR].fnDraw();if(au(".monkey-ajax-loading").length){au(".monkey-ajax-loading").remove()}}function an(aR,i){var aT=[],aS=[],aQ,aP;aR.forEach(function(aV){var aU=new Array(2);if(aV[0].length>8){aV[0]=X(aV[0].substr(8,6))}if(aV[7].length>8){aV[7]=X(aV[7].substr(8,6))}if(aV[1].length>8){aV[1]=X(aV[1].substr(8,6))}aV[6]=(aV[6]/10000).toFixed(4);aV[12]=(aV[12]/10000).toFixed(4);aQ=(aV[3]-aV[9]).toFixed(4);aP=((aV[4]-aV[10])*100).toFixed(4);if(parseInt(aV[6])===0){aV[6]="--"}if(parseInt(aV[12])===0){aV[12]="--"}if(parseInt(aV[3])===0){aV[3]="--"}if(parseInt(aV[9])===0){aV[9]="--"}if(parseInt(aV[4])===0){aV[4]="--"}if(parseInt(aV[10])===0){aV[10]="--"}if(isNaN(aV[3])||isNaN(aV[9])){aQ="--"}if(isNaN(aV[4])||isNaN(aV[10])){aP="--"}aU.push(aQ,aP);aU[13]=aQ;aU[14]=aP;aT.push(au.extend({},aU,aV))});aT.forEach(function(aU){var aV=[];i.forEach(function(aW){aV.push(aU[aW])});aS.push(aV)});return aS}function u(i,aQ){var aR=[],aP=[];i.forEach(function(aS){aS[0]=X(aS[0].substr(8,6));if(parseInt(aS[3])===0){aS[3]="--"}else{aS[3]=(aS[3]/10000).toFixed(4)}aR.push(au.extend({},aS))});aR.forEach(function(aS){var aT=[];aQ.forEach(function(aU){aT.push(aS[aU])});aP.push(aT)});return aP}function r(aP,aR){var aS=[],aQ=[],i=/\d+/g;aP.forEach(function(aT){aT.obj=aT.obj.match(i).toString();aT.vol=(aT.vol/10000).toFixed(4);if(parseInt(aT.vol)===0){aT.vol="--"}aS.push(au.extend({},aT))});aS.forEach(function(aT){var aU=[];aR.forEach(function(aV){aU.push(aT[aV])});aQ.push(aU)});return aQ}function ae(){var aV=0,aU=0,aT=0,aS=0,aP="",i="",a2="year",aQ="",a0="",a5="year",aW="",a3="",aX="",a1="",aR=false,aZ="",aY="";au("#tab-main").on("change","select.item",function(){if(aj==0){aj=1}aV=au("#tab"+aj+"-select1").val();aU=au("#tab"+aj+"-select2").val();aT=au("#tab"+aj+"-select3").val();aS=au("#tab"+aj+"-select4").val();aP=au("#filter-remain-time-begin-"+1+"").val(),i=au("#filter-remain-time-end-"+1+"").val(),a2=au("#filter-remain-time-unit-"+1+"").val(),aQ=au("#filter-release-time-begin-"+1+"").val(),a0=au("#filter-release-time-end-"+1+"").val(),a5=au("#filter-release-time-unit-"+1+"").val(),aW=au("#filter-release-date-begin-"+1+"").val(),a3=au("#filter-release-date-end-"+1+"").val(),aX=au("#filter-duration-begin-"+1+"").val(),a1=au("#filter-duration-end-"+1+"").val();if(aj<=3){B(ah,"","",aV,aU,aT,aS,aj,aP,i,a2,aQ,a0,a5,aW,a3,aX,a1)}});au("#tab-main form.filter-bar").on("click","a.btn-export-data",function(){var a6=aj-1,a7;aR=au("#tab"+aj+"-check1").is(":checked");aY=aN(au("#tab"+aj+"-input12").val());aV=au("#tab"+aj+"-select1").val();aU=au("#tab"+aj+"-select2").val();aP=au("#filter-remain-time-begin-"+1+"").val(),i=au("#filter-remain-time-end-"+1+"").val(),a2=au("#filter-remain-time-unit-"+1+"").val(),aQ=au("#filter-release-time-begin-"+1+"").val(),a0=au("#filter-release-time-end-"+1+"").val(),a5=au("#filter-release-time-unit-"+1+"").val(),aW=au("#filter-release-date-begin-"+1+"").val(),a3=au("#filter-release-date-end-"+1+"").val(),aX=au("#filter-duration-begin-"+1+"").val(),a1=au("#filter-duration-end-"+1+"").val();if(aR){au(this).data("on","1")}aE(a6,ah,aY,aY,aV,aU,aR,aP,i,a2,aQ,a0,a5,aW,a3,aX,a1,au(this).data("on"))});var a4;au("#btn-filter1,#btn-filter2,#btn-filter3,#btn-filter4,#btn-filter5,#btn-filter6").click(function(a6){a4=au.dialog({padding:10,left:"50%",top:"40%",title:"更多筛选",content:au("#dialog-more-filter-1")[0],lock:true,opacity:0.4,background:"#fff",button:[{name:'撤销筛选<i id="cancel-operation-1" style="display:none;"></i>',callback:function(){au("#dialog-form").get(0).reset();return false}},{name:"确定",callback:function(){aP=au("#filter-remain-time-begin-1").val(),i=au("#filter-remain-time-end-1").val(),a2=au("#filter-remain-time-unit-1").val(),aQ=au("#filter-release-time-begin-1").val(),a0=au("#filter-release-time-end-1").val(),a5=au("#filter-release-time-unit-1").val(),aW=au("#filter-release-date-begin-1").val(),a3=au("#filter-release-date-end-1").val(),aX=au("#filter-duration-begin-1").val(),a1=au("#filter-duration-end-1").val();if(aj==0){aj=1}if(aP>i||aQ>a0||aX>a1){au.dialog({content:"起始日期应大于结束日期,请正确填写！",ok:function(){au("#dialog-form").get(0).reset()}});return false}if(aj<=3){aY=""}else{aY=aN(au("#tab"+aj+"-input12").val())}B(ah,aY,aY,aV,aU,aT,aS,aj,aP,i,a2,aQ,a0,a5,aW,a3,aX,a1);a4.close()}},{name:"取消",callback:function(){a4.close()}}],init:function(){au("#cancel-operation-1").parent("button").css({"float":"left"})}});au(window).on("resize",function(){if(!a4.closed){a4.position("50%","40%")}});a6.preventDefault()})}function aN(aR){var aP=aR.split("-"),aS="";for(var aQ=0;aQ<aP.length;aQ++){aS+=aP[aQ]}return aS}function X(aP){var i=/(\d{2})(\d{2})(\d{2})/;return aP.replace(i,"$1:$2:$3")}function l(aR){for(var aQ=0;aQ<aR.length;aQ++){var aP=aQ+1;aR[aQ].unshift(aP)}return aR}function B(aQ,aT,a3,aW,aV,aU,aS,aY,aP,i,a2,aR,a0,a5,aX,a4,aZ,a1){var a6=au("#tab"+aY+"-check1").is(":checked");Socket.send(""+aF+"/bond/bestPricesBetweenBanks/"+aQ+".dzh?bondType="+aW+"&beginDate="+aT+"&endDate="+a3+"&couponType="+aV+"&bondRate="+aU+"&mainBodyRate="+aS+"&addIndex="+a6+"&beginRemainingTerm="+aP+"&endRemainingTerm="+i+"&remainingTermType="+a2+"&beginIssueTerm="+aR+"&endIssueTerm="+a0+"&issueTermType="+a5+"&beginIssueDate="+aX+"&endIssueDate="+a4+"&beginDuration="+aZ+"&endDuration="+a1+"&bondCode=",function(ba){var bb={},a8=[],bc=[],a7=aY-1,a9=/\d+/g;az=[];if(ba.length){ba.forEach(function(be){bb[be.bondCode]=be;var bf=[];for(var bd in be){bf.push(be[bd])}bc.push(bf)});if(aY==1){ad.forEach(function(bd){if(bd[1] in bb){a8.push(bd)}});aC=a8}if(aY==2){dataOptimal.forEach(function(bd){if(bd[1] in bb){a8.push(bd)}});w=a8}if(aY==3){dataMarket.forEach(function(bd){if(bd[1] in bb){a8.push(bd)}});W=a8}if(aY>=4){a8=l(bc)}}else{a8=[]}az=a8;if(parseInt(localStorage.getItem("treeLe"))&&aY==2){R(a8)}else{aM(a7,a8)}},".tab-content")}function aB(){au(".btn-columns").click(function(i){var aP=au.dialog({padding:10,left:"50%",top:"40%",title:"更多指标",content:au("#dialog-more-columns")[0],lock:true,opacity:0.4,background:"#fff",button:[{name:'恢复默认<i id="restore-default" style="display:none;"></i>',callback:function(){var aR=L.getNodes(),aQ=L.transformToArray(aR);aQ.forEach(function(aS){aS.checked=false;L.updateNode(aS)});L=au.fn.zTree.init(au("#more-columns-tree"),ar,zNodes);return false}},{name:"确定",callback:function(){R(az)}},{name:"取消",callback:function(){aP.close()}}],init:function(){if(!localStorage.getItem("storageBrian")){au.fn.zTree.init(au("#more-columns-tree"),ar,zNodes)}au("#restore-default").parent("button").css({"float":"left"})}});au(window).on("resize",function(){if(!aP.closed){aP.position("50%","40%")}});i.preventDefault()});au(document).on("click","#move-up,#move-down",function(){var aQ=au(this).data("pos"),i=L.getSelectedNodes(),aP;if(i.length==0){au.dialog({title:"提示",width:220,content:"请选择一个节点",icon:"face-sad",time:3});return}if(aQ=="prev"){aP=i[0].getPreNode()}else{if(aQ=="next"){aP=i[0].getNextNode()}}if(!aP){return}L.moveNode(aP,i[0],aQ)})}function Z(aP){var aQ=au(aP+" .tab-bar > li"),aR=au(aP+" .tab-content > li"),i=[];aQ.each(function(aS){au(this).on("click",function(aT){if(au(this).closest(".tab-list").attr("id")=="tab-main"){j=au(this).parent().find(".active").index("#tab-main .tab-bar > li")}if(au(this).closest(".tab-list").attr("id")=="tab-secondary"){Y=au(this).parent().find(".active").index("#tab-secondary .tab-bar > li")}aQ.removeClass("active");au(this).addClass("active");aR.removeClass("active");aR.eq(aS).addClass("active");aT.preventDefault()})})}var U=JSON.parse(localStorage.getItem("storageBrian"));L=au.fn.zTree.init(au("#more-columns-tree"),ar,U);function h(aU,aQ,aV){var aS=aV.getParentNode();if(aS&&aS.dropInner===false){return false}else{for(var aR=0,aP=f.length;aR<aP;aR++){var aT=f[aR].getParentNode();if(aT&&aT!==aV.getParentNode()&&aT.childOuter===false){return false}}}return true}function O(aS,aQ,aT){if(aT&&aT.dropInner===false){return false}else{for(var aR=0,aP=f.length;aR<aP;aR++){if(!aT&&f[aR].dropRoot===false){return false}else{if(f[aR].parentTId&&f[aR].getParentNode()!==aT&&f[aR].getParentNode().childOuter===false){return false}}}}return true}function J(aU,aQ,aV){var aS=aV.getParentNode();if(aS&&aS.dropInner===false){return false}else{for(var aR=0,aP=f.length;aR<aP;aR++){var aT=f[aR].getParentNode();if(aT&&aT!==aV.getParentNode()&&aT.childOuter===false){return false}}}return true}var g,ac="dark",f,ab;function af(aS,aR){ac=(ac==="dark"?"":"dark");for(var aQ=0,aP=aR.length;aQ<aP;aQ++){if(aR[aQ].drag===false){f=null;return false}else{if(aR[aQ].parentTId&&aR[aQ].getParentNode().childDrag===false){f=null;return false}}}f=aR;return true}function aL(aP,i){ab=i;return true}function A(aR,aQ,aS,aP,i){ac=(ac==="dark"?"":"dark");return true}function T(i,aQ,aP){ac=(ac==="dark"?"":"dark")}function o(aQ,aS,aR,aT,aP,i){ac=(ac==="dark"?"":"dark")}function ay(i,aQ,aP){if(aP===ab){ac=(ac==="dark"?"":"dark")}}function R(aP){var a8=L.getNodes(),bf=L.transformToArray(a8),a9=[],bg=[],ba=[],aV=[],a5=[],aT=[],aY=[],bb=[],a2=[],aW=[],a6=[],bh=[],aZ=aP,be=["序号","代码","简称","剩余年限","时间","报价方","券面总额(万元)","净价","收益率(%)"],aR=["净价差额","收益率差(BP)","收益率(%)","净价","券面总额(万元)","报价方","时间","日期","净价","全价","收益率(%)","票面利率/参考利率(%)","债券评级","主体评级"],a4=["2014-3-25","买入信息","买卖价差","卖出信息","最近成交","参考指标"];k=[];m=[];aK=[];Q=[];K=[];a9.push("[");for(var bd=0;bd<a8.length;bd++){if(a8[bd].checked===true&&(a8[bd].id!="buy_info"&&a8[bd].id!="sell_info")){bh.push(a8[bd].name)}var a1=a8[bd].children;a9.push('{"id" :"');a9.push(a8[bd].id);a9.push('","name":"');a9.push(a8[bd].name);a9.push('","checked":');a9.push(a8[bd].checked);a9.push(',"open":');a9.push(a8[bd].open);a9.push(',"childOuter":');a9.push(a8[bd].childOuter);if(a8[bd].id=="assessment_info"){a9.push(',"chkDisabled":');a9.push(a8[bd].chkDisabled)}a9.push(',"children":[');for(var bc=0;bc<a1.length;bc++){a9.push('{"id" :"');a9.push(a1[bc].id);a9.push('","name":"');a9.push(a1[bc].name);a9.push('","checked":');a9.push(a1[bc].checked);if(a8[bd].id=="assessment_info"){a9.push(',"chkDisabled":');a9.push(a1[bc].chkDisabled)}if(bc==a1.length-1){a9.push("}")}else{a9.push("},")}}if(bd==a8.length-1){a9.push("]}")}else{a9.push("]},")}}a9.push("]");for(var bd=0;bd<a8.length;bd++){var a1=a8[bd].children,a3=[];for(var bc=0;bc<a1.length;bc++){if(a1[bc].checked===true){a3.push(a1[bc].id);aY.push(a1[bc].id)}if(a1[bc].checked===true&&(a8[bd].id!="buy_info"&&a8[bd].id!="sell_info")){aW.push(a1[bc].id);bg.push(a1[bc].name)}}if(a8[bd].id=="buy_info"){for(var bc=0;bc<a1.length;bc++){if(a1[bc].checked===true){ba.push(a1[bc].name);bb.push(a1[bc].id)}}}if(a8[bd].id=="sell_info"){for(var bc=0;bc<a1.length;bc++){if(a1[bc].checked===true){aV.push(a1[bc].name);a2.push(a1[bc].id)}}}if(a3.length!=0){a5.push(a3.length)}if(a3.length!=0&&(a8[bd].id!="buy_info"&&a8[bd].id!="sell_info")){aT.push(a3.length)}}Q=au.map([4,5,2,5,4,3],function(bi,i){if(i==1){bi=bi+bb.length}if(i==3){bi=bi+a2.length}return bi});Q=Q.concat(aT);localStorage.removeItem("storageBrian");localStorage.storageBrian=a9.join("");localStorage.treeLe=aY.length;aZ.forEach(function(i){var bi=/\d+/g,bj;bj=i[1].match(bi).toString();a6.push(bj)});var aS={},aQ=[],a7=[],aU=["0","1","2","3","4","5","6","7","8"],a0=["9","10","11","12","13","14","15","16","17","18","19","20","21","22"],aX=[];Socket.send(""+aF+"/bond/bestPricesBetweenBanks/getMoreIndex.dzh?tree_info="+aY.toString()+"&optimal_data="+a6.toString()+"&bondCodeType="+a.toString()+"",function(i){m=a4.concat(bh);aJ=be.concat(ba);aV.forEach(function(bk,bi){var bj=7+bi;aR.splice(bj,0,bk)});aX=aU.concat(bb);a2.forEach(function(bk,bi){var bj=7+bi;a0.splice(bj,0,bk)});aQ=aX.concat(a0,aW);aH=aJ.concat(aR,bg);i.forEach(function(bi){aS[bi.col0]=bi});aZ.forEach(function(bi){if(bi[1] in aS){a7.push(au.extend({},aS[bi[1]],bi))}});a7.forEach(function(bj){var bi=[];if(bj[6]=="--"&&bj[7]=="--"){bj.transactionAmount="--";bj.fullPrice="--";bj.settlementAmount="--";bj.fullPriceInterest="--"}else{bj.transactionAmount=((bj[6]*bj[7])/100).toFixed(4);bj.fullPrice=(parseFloat(bj.col3)+parseFloat(bj[7])).toFixed(4);bj.settlementAmount=((bj.fullPrice*bj[6])/100).toFixed(4);bj.fullPriceInterest=((bj.col3*bj[6])/100).toFixed(4)}if(bj[12]=="--"&&bj[13]=="--"){bj.fullPrice2="--";bj.transactionAmount2="--";bj.settlementAmount2="--";bj.fullPriceInterest2="--"}else{bj.fullPrice2=(parseFloat(bj.col3)+parseFloat(bj[12])).toFixed(4);bj.transactionAmount2=((bj[12]*bj[13])/100).toFixed(4);bj.settlementAmount2=((bj.fullPrice2*bj[13])/100).toFixed(4);bj.fullPriceInterest2=((bj.col3*bj[13])/100).toFixed(4)}bj.interest2=bj.col3});a7.forEach(function(bi){var bj=[];aQ.forEach(function(bk){bj.push(bi[bk])});aK.push(bj)});w=aK;F(m,aH,aK,2,Q)},".tab-content")}function aa(aR,aU,aP){M=[];var aQ=[],i=aq[aR].fnSettings();change=b(aU);aq[aR].oApi._fnClearTable(i);aq[aR].fnDraw();aq[aR].fnDestroy();var aT=aq[aR].parent();aQ.push('<table cellpadding="0" cellspacing="0" border="0" class="display" id="tab-main-datatable'+(aR+1)+'"><thead><tr class="header-detail">');aQ.push("<th>序号</th>");for(var aS in aP){aQ.push("<th>");aQ.push(aS);aQ.push("</th>")}aQ.push("</tr></thead><tbody></tbody></table>");aq[aR].remove();aT.append(aQ.join(""));M=l(change);aq[aR]=aT.children(0).dataTable({bLengthChange:false,bFilter:true,bInfo:false,bAutoWidth:false,bSort:true,sScrollX:"100%",aaData:M,sScrollY:"100px",oLanguage:{sSearch:"查询:",sEmptyTable:"无数据",sZeroRecords:"无数据"},sDom:"frtiS",bDeferRender:true,aaSorting:[[4,"desc"]],aoColumnDefs:[{bSortable:false,aTargets:[0]},{sClass:"my_left",aTargets:[1,2]}],fnDrawCallback:function(aX){if(aX.bSorted||aX.bFiltered){for(var aW=0,aV=aX.aiDisplay.length;aW<aV;aW++){this.fnUpdate(aW+1,aX.aiDisplay[aW],0,false,false)}}}});n((aR+1));au("#tab-main-datatable"+(aR+1)+"_wrapper").css("visibility","visible");au("#tab-main-datatable"+(aR+1)+"_wrapper div.dataTables_scrollHead").height(25);aq[aR].find("div.dataTables_scrollHeadInner").css({"padding-right":"20px"});aq[aR].parent(".dataTables_scrollBody").height("-webkit-calc(100% - 25px)")}function F(aS,aT,aQ,aX,aP){if(aj!=aX||aT.length<=0){return}aS[0]=c(0);var aV=aX-1,aW=aq[aV].fnSettings(),aR=[];aq[aV].oApi._fnClearTable(aW);aq[aV].fnDraw();aq[aV].fnDestroy();var aY=aq[aV].parent();aR.push('<table cellpadding="0" cellspacing="0" border="0" class="display" id="tab-main-datatable'+aX+'"><thead><tr class="header-group">');for(var aU=0;aU<aS.length;aU++){aR.push('<th colspan="');aR.push(aP[aU]);aR.push('">');aR.push(aS[aU]);aR.push("</th>")}aR.push('</tr><tr class="header-detail">');for(var aU=0;aU<aT.length;aU++){aR.push("<th>");aR.push(aT[aU]);aR.push("</th>")}aR.push("</tr></thead><tbody></tbody></table>");aq[aV].remove();aY.append(aR.join(""));aq[aV]=aY.children(0).dataTable({bLengthChange:false,bFilter:true,bInfo:false,bAutoWidth:false,bSort:true,sScrollX:"100%",aaData:aQ,sScrollY:"100px",oLanguage:{sSearch:"查询:",sEmptyTable:"无数据",sZeroRecords:"无数据"},sDom:"frtiS",bDeferRender:true,aaSorting:[[4,"desc"]],aoColumnDefs:[{bSortable:false,aTargets:[0]},{sClass:"my_left",aTargets:[1,2]}],fnDrawCallback:function(a1){if(a1.bSorted||a1.bFiltered){for(var a0=0,aZ=a1.aiDisplay.length;a0<aZ;a0++){this.fnUpdate(a0+1,a1.aiDisplay[a0],0,false,false)}}}});n(aX);if(au("#tab-main-datatable"+aX+"_wrapper .dataTables_filter")){au("#tab-main-datatable"+aX+"_wrapper  .dataTables_filter").find("input").css({fontSize:"14"}).attr({placeholder:"代码,简称,报价方"})}au("#tab-main-datatable"+aX+"_wrapper").css("visibility","visible");au("#tab-main-datatable"+(aV+1)+"_wrapper div.dataTables_scrollHead").height(51);aq[aV].find("div.dataTables_scrollHeadInner").css({"padding-right":"20px"});aq[aV].parent(".dataTables_scrollBody").height("-webkit-calc(100% - 50px)")}function n(i){var aP=/\d+/g;if(au("#tab-main-datatable"+i+" tbody tr:first").find("td").eq(1).html()){I=au("#tab-main-datatable"+i+" tbody tr:first").find("td").eq(1).html().match(aP).toString()}au("#upDate").html(I);if(q){au("#tab-main-datatable"+i+" tbody tr:first").addClass("row_selected");aO(ax,S,I);q=false}}function am(aS,aR,aQ){aS=aS.replace(/\-/g,"/");aR=aR.replace(/\-/g,"/");aQ=aQ.toLowerCase();var aP=new Date(aS);var aT=new Date(aR);var i=1;switch(aQ){case"second":i=1000;break;case"minute":i=1000*60;break;case"hour":i=1000*3600;break;case"day":i=1000*3600*24;break;default:break}return parseInt((aT.getTime()-aP.getTime())/parseInt(i))}function C(){var aT=au("#tab-splitter").height();var aR="height: -webkit-calc( 60% - "+aT*0.6+"px );",i="height: -webkit-calc( 40% - "+aT*0.4+"px );",aP="height: -webkit-calc( 100% - "+aT+"px );",aQ="display:none;";au("#tab-splitter").after(au("#tab-splitter").clone().attr("id","tab-splitter-virtual"));au("#tab-splitter-virtual .tab-splitter-controller").click(function(aU){au(".tab-splitter").toggleClass("tab-splitter-down").toggleClass("tab-splitter-up");au("#main").toggleClass("expanded");if(au("#main").hasClass("expanded")){au("#tab-main").attr({style:aP});au("#tab-secondary").attr({style:aQ});au("#tab-splitter-virtual").draggable("disable");au(".tab-splitter-inner").css({cursor:"default"})}else{au("#tab-main").attr({style:aR});au("#tab-secondary").attr({style:i});au("#tab-splitter-virtual").draggable("enable");au(".tab-splitter-inner").css({cursor:"n-resize"})}});var aS=0;au("#tab-splitter-virtual").draggable({axis:"y",revert:true,revertDuration:0,start:function(aU,aV){au(this).css({opacity:0})},drag:function(aU,aV){aR="height: -webkit-calc(60% - "+aT+"px * 0.6 + "+(aS+aV.position.top)+"px);";i="height: -webkit-calc(40% - "+aT+"px * 0.4 - "+(aS+aV.position.top)+"px);";au("#tab-main").attr({style:aR});au("#tab-secondary").attr({style:i})},stop:function(aU,aV){aS=aS+aV.position.top;au(this).css({opacity:1})}})}au("#tab-main").on("click",".btn-export-excel",function(){if(!M[0]){return}var aT="大智慧数据导出",aU="数据导出"+(new Date()).getTime()+parseInt(Math.random()*100000),aP=M[0].length;if(M.length<=0){return}var aS=["<html xmlns:x='urn:schemas-microsoft-com:office:excel'><head><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>"];aS.push(aT);aS.push("</x:Name><x:WorksheetOptions><x:Panes></x:Panes></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--><meta http-equiv='content-type' content='text/html; charset=gbk'><style>.text { font-family:Arial;font-size:10pt;mso-number-format:'@';}</style></head>");aS.push("<body>");aS.push("<table width='100%' border='1' cellpadding='0' bordercolorlight='#999999' bordercolordark='#FFFFFF' cellspacing='0' align='center'>");aS.push("<thead><tr>");aS.push(au("#tab-main-datatable"+aj+"_wrapper .dataTables_scrollHead .header-detail").html());aS.push("</tr></thead><tbody>");for(var aR=0;aR<M.length;aR++){aS.push("<tr>");for(var aQ=0;aQ<aP;aQ++){aS.push("<td>");aS.push(M[aR][aQ]);aS.push("</td>")}aS.push("</tr>")}aS.push("</tbody></table>");aS.push("</body>");if(window.external.saveas){window.external.saveas(aS.join(""),aU,"xls")}else{alert("请在大智慧客户端使用")}});au(".data").on("click",".dataTable tbody tr",function(){au(this).addClass("row_selected").siblings().removeClass("row_selected")});for(var P=0;P<H;P++){aq[P]=au("#tab-main-datatable"+(P+1)).dataTable({bLengthChange:false,bFilter:true,bInfo:false,bPaginate:false,bAutoWidth:false,bSort:false,oLanguage:{sSearch:"查询:",sEmptyTable:"无数据",sZeroRecords:"无数据"},sScrollX:"100%",sScrollY:"-webkit-calc(100% - 50px)"});if(P==1){if(au("#tab-main .dataTables_filter")){au("#tab-main .dataTables_filter").find("input").css({fontSize:"14"}).attr({placeholder:"代码,简称,报价方"})}}}for(var P=0;P<aD;P++){if(P>3){al="25px"}else{al="50px"}ao[P]=au("#tab-secondary-datatable"+(P+1)).dataTable({bLengthChange:false,bFilter:true,bInfo:false,bPaginate:false,bAutoWidth:false,bSort:false,oLanguage:{sEmptyTable:"无数据"},sScrollX:"100%",sScrollY:"-webkit-calc(100% - "+al+")"})}if(au("#tab-secondary .dataTables_filter")){au("#tab-secondary .dataTables_filter").css("display","none")}au(window).bind("resize",function(){if(au(window).width()!=e){aq[au("#tab-main .tab-bar li.active").index()].fnAdjustColumnSizing();ao[au("#tab-secondary .tab-bar li.active").index()].fnAdjustColumnSizing();e=au(window).width()}});au("#tab-main .tab-bar > li").each(function(aP){au(this).on("click",function(i){if(aq[au("#tab-main .tab-bar li.active").index()]){aq[au("#tab-main .tab-bar li.active").index()].fnAdjustColumnSizing()}})});au("#tab-secondary .tab-bar > li").each(function(aP){au(this).on("click",function(i){if(au(this).index("#tab-secondary .tab-bar > li")!=Y){ao[aP].fnAdjustColumnSizing()}})});Z("#tab-main");Z("#tab-secondary");C();var aw=au("#filter-release-date-begin-1,#filter-release-date-end-1");aw.datepicker({onSelect:function(i){var aP=this.id=="filter-release-date-begin-1"?"minDate":"maxDate";aw.not(this).datepicker("option",aP,i)}});au("#tab6-input12").datepicker().datepicker("option",{maxDate:c(1)});au("#tab5-input12").datepicker().datepicker("option",{maxDate:c(1)});au("#tab4-input12").datepicker().datepicker("option",{maxDate:c(1)});function c(aP){var i=new Date(),aT;var aQ=new Date(i.getFullYear(),i.getMonth(),i.getDate()-aP);var aS=aQ.getMonth()+1;var aU=aQ.getDate();var aR=aQ.getFullYear();aT=aR+"-"+aS+"-"+aU;return aT}au("#tab-main-datatable1 th").removeClass("set-today-date");au("#main .set-today-date").html(c(0));ae();aB()})(jQuery);